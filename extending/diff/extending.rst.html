
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=ISO-8859-1" />
    <title></title>
    <style type="text/css">
        table.diff {font-family:Courier; border:medium;}
        .diff_header {background-color:#e0e0e0}
        td.diff_header {text-align:right}
        .diff_next {background-color:#c0c0c0}
        .diff_add {background-color:#aaffaa}
        .diff_chg {background-color:#ffff77}
        .diff_sub {background-color:#ffaaaa}
    </style>
</head>

<body>
    
        <table class="diff" id="difflib_chg_to32__top"
               cellspacing="0" cellpadding="0" rules="groups" >
            <colgroup></colgroup> <colgroup></colgroup> <colgroup></colgroup>
            <thead><tr><th class="diff_next"><br /></th><th colspan="2" class="diff_header">rest25/extending/extending.rst =&gt; rest262/extending/extending.rst</th></tr></thead>
            <tbody>
                <tr><td class="diff_next" id="difflib_chg_to32__0"><a href="#difflib_chg_to32__0">f</a></td><td class="diff_header" id="from32_1">1</td><td nowrap="nowrap">..&nbsp;highlightlang::&nbsp;c</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_2">2</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_3">3</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__1">n</a></td><td class="diff_header" id="from32_4">4-</td><td nowrap="nowrap"><span class="diff_sub">..&nbsp;_intro:</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__1">n</a></td><td class="diff_header" id="to32_4">4+</td><td nowrap="nowrap"><span class="diff_add">..&nbsp;_extending-intro:</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_5">5</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_6">6</td><td nowrap="nowrap">******************************</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_7">7</td><td nowrap="nowrap">Extending&nbsp;Python&nbsp;with&nbsp;C&nbsp;or&nbsp;C++</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_8">8</td><td nowrap="nowrap">******************************</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_9">9</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_10">10</td><td nowrap="nowrap">It&nbsp;is&nbsp;quite&nbsp;easy&nbsp;to&nbsp;add&nbsp;new&nbsp;built-in&nbsp;modules&nbsp;to&nbsp;Python,&nbsp;if&nbsp;you&nbsp;know&nbsp;how&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_11">11</td><td nowrap="nowrap">program&nbsp;in&nbsp;C.&nbsp;&nbsp;Such&nbsp;:dfn:`extension&nbsp;modules`&nbsp;can&nbsp;do&nbsp;two&nbsp;things&nbsp;that&nbsp;can't&nbsp;be</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_12">12</td><td nowrap="nowrap">done&nbsp;directly&nbsp;in&nbsp;Python:&nbsp;they&nbsp;can&nbsp;implement&nbsp;new&nbsp;built-in&nbsp;object&nbsp;types,&nbsp;and&nbsp;they</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__1"></td><td class="diff_header" id="from32_16">16</td><td nowrap="nowrap">defines&nbsp;a&nbsp;set&nbsp;of&nbsp;functions,&nbsp;macros&nbsp;and&nbsp;variables&nbsp;that&nbsp;provide&nbsp;access&nbsp;to&nbsp;most</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_17">17</td><td nowrap="nowrap">aspects&nbsp;of&nbsp;the&nbsp;Python&nbsp;run-time&nbsp;system.&nbsp;&nbsp;The&nbsp;Python&nbsp;API&nbsp;is&nbsp;incorporated&nbsp;in&nbsp;a&nbsp;C</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_18">18</td><td nowrap="nowrap">source&nbsp;file&nbsp;by&nbsp;including&nbsp;the&nbsp;header&nbsp;``"Python.h"``.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_19">19</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_20">20</td><td nowrap="nowrap">The&nbsp;compilation&nbsp;of&nbsp;an&nbsp;extension&nbsp;module&nbsp;depends&nbsp;on&nbsp;its&nbsp;intended&nbsp;use&nbsp;as&nbsp;well&nbsp;as&nbsp;on</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_21">21</td><td nowrap="nowrap">your&nbsp;system&nbsp;setup;&nbsp;details&nbsp;are&nbsp;given&nbsp;in&nbsp;later&nbsp;chapters.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_22">22</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_23">23</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__2">n</a></td><td class="diff_header" id="from32_24">24-</td><td nowrap="nowrap">..&nbsp;_simpleexample:</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__2">n</a></td><td class="diff_header" id="to32_24">24+</td><td nowrap="nowrap">..&nbsp;_<span class="diff_add">extending-</span>simpleexample:</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_25">25</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_26">26</td><td nowrap="nowrap">A&nbsp;Simple&nbsp;Example</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_27">27</td><td nowrap="nowrap">================</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_28">28</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_29">29</td><td nowrap="nowrap">Let's&nbsp;create&nbsp;an&nbsp;extension&nbsp;module&nbsp;called&nbsp;``spam``&nbsp;(the&nbsp;favorite&nbsp;food&nbsp;of&nbsp;Monty</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_30">30</td><td nowrap="nowrap">Python&nbsp;fans...)&nbsp;and&nbsp;let's&nbsp;say&nbsp;we&nbsp;want&nbsp;to&nbsp;create&nbsp;a&nbsp;Python&nbsp;interface&nbsp;to&nbsp;the&nbsp;C</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_31">31</td><td nowrap="nowrap">library&nbsp;function&nbsp;:cfunc:`system`.&nbsp;[#]_&nbsp;This&nbsp;function&nbsp;takes&nbsp;a&nbsp;null-terminated</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_32">32</td><td nowrap="nowrap">character&nbsp;string&nbsp;as&nbsp;argument&nbsp;and&nbsp;returns&nbsp;an&nbsp;integer.&nbsp;&nbsp;We&nbsp;want&nbsp;this&nbsp;function&nbsp;to</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__2"></td><td class="diff_header" id="from32_98">98</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_99">99</td><td nowrap="nowrap">:cfunc:`PyArg_ParseTuple`&nbsp;returns&nbsp;true&nbsp;(nonzero)&nbsp;if&nbsp;all&nbsp;arguments&nbsp;have&nbsp;the&nbsp;right</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_100">100</td><td nowrap="nowrap">type&nbsp;and&nbsp;its&nbsp;components&nbsp;have&nbsp;been&nbsp;stored&nbsp;in&nbsp;the&nbsp;variables&nbsp;whose&nbsp;addresses&nbsp;are</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_101">101</td><td nowrap="nowrap">passed.&nbsp;&nbsp;It&nbsp;returns&nbsp;false&nbsp;(zero)&nbsp;if&nbsp;an&nbsp;invalid&nbsp;argument&nbsp;list&nbsp;was&nbsp;passed.&nbsp;&nbsp;In&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_102">102</td><td nowrap="nowrap">latter&nbsp;case&nbsp;it&nbsp;also&nbsp;raises&nbsp;an&nbsp;appropriate&nbsp;exception&nbsp;so&nbsp;the&nbsp;calling&nbsp;function&nbsp;can</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_103">103</td><td nowrap="nowrap">return&nbsp;*NULL*&nbsp;immediately&nbsp;(as&nbsp;we&nbsp;saw&nbsp;in&nbsp;the&nbsp;example).</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_104">104</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_105">105</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__3">n</a></td><td class="diff_header" id="from32_106">106-</td><td nowrap="nowrap"><span class="diff_sub">..&nbsp;_errors:</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__3">n</a></td><td class="diff_header" id="to32_106">106+</td><td nowrap="nowrap"><span class="diff_add">..&nbsp;_extending-errors:</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_107">107</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_108">108</td><td nowrap="nowrap">Intermezzo:&nbsp;Errors&nbsp;and&nbsp;Exceptions</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_109">109</td><td nowrap="nowrap">=================================</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_110">110</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_111">111</td><td nowrap="nowrap">An&nbsp;important&nbsp;convention&nbsp;throughout&nbsp;the&nbsp;Python&nbsp;interpreter&nbsp;is&nbsp;the&nbsp;following:&nbsp;when</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__3"></td><td class="diff_header" id="from32_112">112</td><td nowrap="nowrap">a&nbsp;function&nbsp;fails,&nbsp;it&nbsp;should&nbsp;set&nbsp;an&nbsp;exception&nbsp;condition&nbsp;and&nbsp;return&nbsp;an&nbsp;error&nbsp;value</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_113">113</td><td nowrap="nowrap">(usually&nbsp;a&nbsp;*NULL*&nbsp;pointer).&nbsp;&nbsp;Exceptions&nbsp;are&nbsp;stored&nbsp;in&nbsp;a&nbsp;static&nbsp;global&nbsp;variable</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_114">114</td><td nowrap="nowrap">inside&nbsp;the&nbsp;interpreter;&nbsp;if&nbsp;this&nbsp;variable&nbsp;is&nbsp;*NULL*&nbsp;no&nbsp;exception&nbsp;has&nbsp;occurred.&nbsp;&nbsp;A</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_115">115</td><td nowrap="nowrap">second&nbsp;global&nbsp;variable&nbsp;stores&nbsp;the&nbsp;"associated&nbsp;value"&nbsp;of&nbsp;the&nbsp;exception&nbsp;(the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_116">116</td><td nowrap="nowrap">second&nbsp;argument&nbsp;to&nbsp;:keyword:`raise`).&nbsp;&nbsp;A&nbsp;third&nbsp;variable&nbsp;contains&nbsp;the&nbsp;stack</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_117">117</td><td nowrap="nowrap">traceback&nbsp;in&nbsp;case&nbsp;the&nbsp;error&nbsp;originated&nbsp;in&nbsp;Python&nbsp;code.&nbsp;&nbsp;These&nbsp;three&nbsp;variables</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_118">118</td><td nowrap="nowrap">are&nbsp;the&nbsp;C&nbsp;equivalents&nbsp;of&nbsp;the&nbsp;Python&nbsp;variables&nbsp;``sys.exc_type``,</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_119">119</td><td nowrap="nowrap">``sys.exc_value``&nbsp;and&nbsp;``sys.exc_traceback``&nbsp;(see&nbsp;the&nbsp;section&nbsp;on&nbsp;module</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__4">n</a></td><td class="diff_header" id="from32_120">120-</td><td nowrap="nowrap"><span class="diff_sub">:mod:`sys`&nbsp;in&nbsp;the&nbsp;Python&nbsp;Library&nbsp;Reference&nbsp;(XXX&nbsp;reference:&nbsp;../lib/lib.html)).</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__4">n</a></td><td class="diff_header" id="to32_120">120+</td><td nowrap="nowrap"><span class="diff_add">:mod:`sys`&nbsp;in&nbsp;the&nbsp;Python&nbsp;Library&nbsp;Reference).&nbsp;&nbsp;It&nbsp;is&nbsp;important&nbsp;to&nbsp;know&nbsp;about&nbsp;them</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_121">121-</td><td nowrap="nowrap"><span class="diff_sub">It&nbsp;is&nbsp;important&nbsp;to&nbsp;know&nbsp;about&nbsp;them&nbsp;to&nbsp;understand&nbsp;how&nbsp;errors&nbsp;are&nbsp;passed&nbsp;around.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_121">121+</td><td nowrap="nowrap"><span class="diff_add">to&nbsp;understand&nbsp;how&nbsp;errors&nbsp;are&nbsp;passed&nbsp;around.</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_122">122</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_123">123</td><td nowrap="nowrap">The&nbsp;Python&nbsp;API&nbsp;defines&nbsp;a&nbsp;number&nbsp;of&nbsp;functions&nbsp;to&nbsp;set&nbsp;various&nbsp;types&nbsp;of&nbsp;exceptions.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_124">124</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_125">125</td><td nowrap="nowrap">The&nbsp;most&nbsp;common&nbsp;one&nbsp;is&nbsp;:cfunc:`PyErr_SetString`.&nbsp;&nbsp;Its&nbsp;arguments&nbsp;are&nbsp;an&nbsp;exception</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_126">126</td><td nowrap="nowrap">object&nbsp;and&nbsp;a&nbsp;C&nbsp;string.&nbsp;&nbsp;The&nbsp;exception&nbsp;object&nbsp;is&nbsp;usually&nbsp;a&nbsp;predefined&nbsp;object&nbsp;like</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_127">127</td><td nowrap="nowrap">:cdata:`PyExc_ZeroDivisionError`.&nbsp;&nbsp;The&nbsp;C&nbsp;string&nbsp;indicates&nbsp;the&nbsp;cause&nbsp;of&nbsp;the&nbsp;error</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_128">128</td><td nowrap="nowrap">and&nbsp;is&nbsp;converted&nbsp;to&nbsp;a&nbsp;Python&nbsp;string&nbsp;object&nbsp;and&nbsp;stored&nbsp;as&nbsp;the&nbsp;"associated&nbsp;value"</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_129">129</td><td nowrap="nowrap">of&nbsp;the&nbsp;exception.</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__4"></td><td class="diff_header" id="from32_160">160</td><td nowrap="nowrap">To&nbsp;ignore&nbsp;an&nbsp;exception&nbsp;set&nbsp;by&nbsp;a&nbsp;function&nbsp;call&nbsp;that&nbsp;failed,&nbsp;the&nbsp;exception</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_161">161</td><td nowrap="nowrap">condition&nbsp;must&nbsp;be&nbsp;cleared&nbsp;explicitly&nbsp;by&nbsp;calling&nbsp;:cfunc:`PyErr_Clear`.&nbsp;&nbsp;The&nbsp;only</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_162">162</td><td nowrap="nowrap">time&nbsp;C&nbsp;code&nbsp;should&nbsp;call&nbsp;:cfunc:`PyErr_Clear`&nbsp;is&nbsp;if&nbsp;it&nbsp;doesn't&nbsp;want&nbsp;to&nbsp;pass&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_163">163</td><td nowrap="nowrap">error&nbsp;on&nbsp;to&nbsp;the&nbsp;interpreter&nbsp;but&nbsp;wants&nbsp;to&nbsp;handle&nbsp;it&nbsp;completely&nbsp;by&nbsp;itself</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_164">164</td><td nowrap="nowrap">(possibly&nbsp;by&nbsp;trying&nbsp;something&nbsp;else,&nbsp;or&nbsp;pretending&nbsp;nothing&nbsp;went&nbsp;wrong).</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_165">165</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_166">166</td><td nowrap="nowrap">Every&nbsp;failing&nbsp;:cfunc:`malloc`&nbsp;call&nbsp;must&nbsp;be&nbsp;turned&nbsp;into&nbsp;an&nbsp;exception&nbsp;---&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_167">167</td><td nowrap="nowrap">direct&nbsp;caller&nbsp;of&nbsp;:cfunc:`malloc`&nbsp;(or&nbsp;:cfunc:`realloc`)&nbsp;must&nbsp;call</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__5">n</a></td><td class="diff_header" id="from32_168">168-</td><td nowrap="nowrap">:cfunc:`PyErr_NoMemory`&nbsp;and&nbsp;return&nbsp;a&nbsp;failure&nbsp;indicator&nbsp;itself.&nbsp;&nbsp;All&nbsp;the<span class="diff_sub">&nbsp;object-</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__5">n</a></td><td class="diff_header" id="to32_168">168+</td><td nowrap="nowrap">:cfunc:`PyErr_NoMemory`&nbsp;and&nbsp;return&nbsp;a&nbsp;failure&nbsp;indicator&nbsp;itself.&nbsp;&nbsp;All&nbsp;the</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_169">169-</td><td nowrap="nowrap">creating&nbsp;functions&nbsp;(for&nbsp;example,&nbsp;:cfunc:`PyInt_FromLong`)&nbsp;already&nbsp;do<span class="diff_sub">&nbsp;this,&nbsp;so</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_169">169+</td><td nowrap="nowrap"><span class="diff_add">object-</span>creating&nbsp;functions&nbsp;(for&nbsp;example,&nbsp;:cfunc:`PyInt_FromLong`)&nbsp;already&nbsp;do</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_170">170-</td><td nowrap="nowrap">this&nbsp;note&nbsp;is&nbsp;only&nbsp;relevant&nbsp;to&nbsp;those&nbsp;who&nbsp;call&nbsp;:cfunc:`malloc`&nbsp;directly.</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_170">170+</td><td nowrap="nowrap">this<span class="diff_add">,&nbsp;so&nbsp;this</span>&nbsp;note&nbsp;is&nbsp;only&nbsp;relevant&nbsp;to&nbsp;those&nbsp;who&nbsp;call&nbsp;:cfunc:`malloc`&nbsp;directly.</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_171">171</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_172">172</td><td nowrap="nowrap">Also&nbsp;note&nbsp;that,&nbsp;with&nbsp;the&nbsp;important&nbsp;exception&nbsp;of&nbsp;:cfunc:`PyArg_ParseTuple`&nbsp;and</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_173">173</td><td nowrap="nowrap">friends,&nbsp;functions&nbsp;that&nbsp;return&nbsp;an&nbsp;integer&nbsp;status&nbsp;usually&nbsp;return&nbsp;a&nbsp;positive&nbsp;value</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_174">174</td><td nowrap="nowrap">or&nbsp;zero&nbsp;for&nbsp;success&nbsp;and&nbsp;``-1``&nbsp;for&nbsp;failure,&nbsp;like&nbsp;Unix&nbsp;system&nbsp;calls.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_175">175</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_176">176</td><td nowrap="nowrap">Finally,&nbsp;be&nbsp;careful&nbsp;to&nbsp;clean&nbsp;up&nbsp;garbage&nbsp;(by&nbsp;making&nbsp;:cfunc:`Py_XDECREF`&nbsp;or</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_177">177</td><td nowrap="nowrap">:cfunc:`Py_DECREF`&nbsp;calls&nbsp;for&nbsp;objects&nbsp;you&nbsp;have&nbsp;already&nbsp;created)&nbsp;when&nbsp;you&nbsp;return</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_178">178</td><td nowrap="nowrap">an&nbsp;error&nbsp;indicator!</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__5"></td><td class="diff_header" id="from32_196">196</td><td nowrap="nowrap">with&nbsp;an&nbsp;exception&nbsp;object&nbsp;(leaving&nbsp;out&nbsp;the&nbsp;error&nbsp;checking&nbsp;for&nbsp;now)::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_197">197</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_198">198</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;PyMODINIT_FUNC</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_199">199</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;initspam(void)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_200">200</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_201">201</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PyObject&nbsp;*m;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_202">202</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_203">203</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;=&nbsp;Py_InitModule("spam",&nbsp;SpamMethods);</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__6">n</a></td><td class="diff_header" id="to32_204">204+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m&nbsp;==&nbsp;NULL)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_205">205+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_204">204</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__6"></td><td class="diff_header" id="from32_205">205</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SpamError&nbsp;=&nbsp;PyErr_NewException("spam.error",&nbsp;NULL,&nbsp;NULL);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_206">206</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Py_INCREF(SpamError);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_207">207</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PyModule_AddObject(m,&nbsp;"error",&nbsp;SpamError);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_208">208</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;}</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_209">209</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_210">210</td><td nowrap="nowrap">Note&nbsp;that&nbsp;the&nbsp;Python&nbsp;name&nbsp;for&nbsp;the&nbsp;exception&nbsp;object&nbsp;is&nbsp;:exc:`spam.error`.&nbsp;&nbsp;The</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_211">211</td><td nowrap="nowrap">:cfunc:`PyErr_NewException`&nbsp;function&nbsp;may&nbsp;create&nbsp;a&nbsp;class&nbsp;with&nbsp;the&nbsp;base&nbsp;class</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_212">212</td><td nowrap="nowrap">being&nbsp;:exc:`Exception`&nbsp;(unless&nbsp;another&nbsp;class&nbsp;is&nbsp;passed&nbsp;in&nbsp;instead&nbsp;of&nbsp;*NULL*),</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__7">n</a></td><td class="diff_header" id="from32_213">213-</td><td nowrap="nowrap"><span class="diff_sub">described&nbsp;in&nbsp;the&nbsp;Python&nbsp;Library&nbsp;Reference&nbsp;(XXX&nbsp;reference:&nbsp;../lib/lib.html)&nbsp;under</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__7">n</a></td><td class="diff_header" id="to32_215">215+</td><td nowrap="nowrap"><span class="diff_add">described&nbsp;in&nbsp;:ref:`bltin-exceptions`.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_214">214-</td><td nowrap="nowrap"><span class="diff_sub">"Built-in&nbsp;Exceptions."</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_215">215</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_216">216</td><td nowrap="nowrap">Note&nbsp;also&nbsp;that&nbsp;the&nbsp;:cdata:`SpamError`&nbsp;variable&nbsp;retains&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;newly</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_217">217</td><td nowrap="nowrap">created&nbsp;exception&nbsp;class;&nbsp;this&nbsp;is&nbsp;intentional!&nbsp;&nbsp;Since&nbsp;the&nbsp;exception&nbsp;could&nbsp;be</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_218">218</td><td nowrap="nowrap">removed&nbsp;from&nbsp;the&nbsp;module&nbsp;by&nbsp;external&nbsp;code,&nbsp;an&nbsp;owned&nbsp;reference&nbsp;to&nbsp;the&nbsp;class&nbsp;is</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_219">219</td><td nowrap="nowrap">needed&nbsp;to&nbsp;ensure&nbsp;that&nbsp;it&nbsp;will&nbsp;not&nbsp;be&nbsp;discarded,&nbsp;causing&nbsp;:cdata:`SpamError`&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_220">220</td><td nowrap="nowrap">become&nbsp;a&nbsp;dangling&nbsp;pointer.&nbsp;Should&nbsp;it&nbsp;become&nbsp;a&nbsp;dangling&nbsp;pointer,&nbsp;C&nbsp;code&nbsp;which</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_221">221</td><td nowrap="nowrap">raises&nbsp;the&nbsp;exception&nbsp;could&nbsp;cause&nbsp;a&nbsp;core&nbsp;dump&nbsp;or&nbsp;other&nbsp;unintended&nbsp;side&nbsp;effects.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_222">222</td><td nowrap="nowrap"></td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__7"></td><td class="diff_header" id="from32_301">301</td><td nowrap="nowrap">arguments&nbsp;should&nbsp;be&nbsp;passed&nbsp;to&nbsp;the&nbsp;function.&nbsp;&nbsp;In&nbsp;this&nbsp;case,&nbsp;the&nbsp;C&nbsp;function&nbsp;should</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_302">302</td><td nowrap="nowrap">accept&nbsp;a&nbsp;third&nbsp;``PyObject&nbsp;*``&nbsp;parameter&nbsp;which&nbsp;will&nbsp;be&nbsp;a&nbsp;dictionary&nbsp;of&nbsp;keywords.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_303">303</td><td nowrap="nowrap">Use&nbsp;:cfunc:`PyArg_ParseTupleAndKeywords`&nbsp;to&nbsp;parse&nbsp;the&nbsp;arguments&nbsp;to&nbsp;such&nbsp;a</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_304">304</td><td nowrap="nowrap">function.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_305">305</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_306">306</td><td nowrap="nowrap">The&nbsp;method&nbsp;table&nbsp;must&nbsp;be&nbsp;passed&nbsp;to&nbsp;the&nbsp;interpreter&nbsp;in&nbsp;the&nbsp;module's</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_307">307</td><td nowrap="nowrap">initialization&nbsp;function.&nbsp;&nbsp;The&nbsp;initialization&nbsp;function&nbsp;must&nbsp;be&nbsp;named</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_308">308</td><td nowrap="nowrap">:cfunc:`initname`,&nbsp;where&nbsp;*name*&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;module,&nbsp;and&nbsp;should&nbsp;be&nbsp;the</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__8">n</a></td><td class="diff_header" id="from32_309">309-</td><td nowrap="nowrap">only&nbsp;non-\&nbsp;<span class="diff_chg">:keyword:</span>`static`&nbsp;item&nbsp;defined&nbsp;in&nbsp;the&nbsp;module&nbsp;file::</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__8">n</a></td><td class="diff_header" id="to32_310">310+</td><td nowrap="nowrap">only&nbsp;non-\&nbsp;<span class="diff_chg">`</span>`static`<span class="diff_add">`</span>&nbsp;item&nbsp;defined&nbsp;in&nbsp;the&nbsp;module&nbsp;file::</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_310">310</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_311">311</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;PyMODINIT_FUNC</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_312">312</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;initspam(void)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_313">313</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_314">314</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void)&nbsp;Py_InitModule("spam",&nbsp;SpamMethods);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_315">315</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;}</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_316">316</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_317">317</td><td nowrap="nowrap">Note&nbsp;that&nbsp;PyMODINIT_FUNC&nbsp;declares&nbsp;the&nbsp;function&nbsp;as&nbsp;``void``&nbsp;return&nbsp;type,</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__8"></td><td class="diff_header" id="from32_320">320</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_321">321</td><td nowrap="nowrap">When&nbsp;the&nbsp;Python&nbsp;program&nbsp;imports&nbsp;module&nbsp;:mod:`spam`&nbsp;for&nbsp;the&nbsp;first&nbsp;time,</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_322">322</td><td nowrap="nowrap">:cfunc:`initspam`&nbsp;is&nbsp;called.&nbsp;(See&nbsp;below&nbsp;for&nbsp;comments&nbsp;about&nbsp;embedding&nbsp;Python.)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_323">323</td><td nowrap="nowrap">It&nbsp;calls&nbsp;:cfunc:`Py_InitModule`,&nbsp;which&nbsp;creates&nbsp;a&nbsp;"module&nbsp;object"&nbsp;(which&nbsp;is</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_324">324</td><td nowrap="nowrap">inserted&nbsp;in&nbsp;the&nbsp;dictionary&nbsp;``sys.modules``&nbsp;under&nbsp;the&nbsp;key&nbsp;``"spam"``),&nbsp;and</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_325">325</td><td nowrap="nowrap">inserts&nbsp;built-in&nbsp;function&nbsp;objects&nbsp;into&nbsp;the&nbsp;newly&nbsp;created&nbsp;module&nbsp;based&nbsp;upon&nbsp;the</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__9"></td><td class="diff_header" id="from32_326">326</td><td nowrap="nowrap">table&nbsp;(an&nbsp;array&nbsp;of&nbsp;:ctype:`PyMethodDef`&nbsp;structures)&nbsp;that&nbsp;was&nbsp;passed&nbsp;as&nbsp;its</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_327">327</td><td nowrap="nowrap">second&nbsp;argument.&nbsp;:cfunc:`Py_InitModule`&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;module&nbsp;object</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__9">n</a></td><td class="diff_header" id="from32_328">328-</td><td nowrap="nowrap">that&nbsp;it&nbsp;creates&nbsp;(which&nbsp;is&nbsp;unused&nbsp;here).&nbsp;&nbsp;It&nbsp;abort<span class="diff_sub">s</span>&nbsp;with&nbsp;a&nbsp;fatal&nbsp;error&nbsp;<span class="diff_sub">i</span>f<span class="diff_chg">&nbsp;the</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__9">n</a></td><td class="diff_header" id="to32_329">329+</td><td nowrap="nowrap">that&nbsp;it&nbsp;creates&nbsp;(which&nbsp;is&nbsp;unused&nbsp;here).&nbsp;&nbsp;It<span class="diff_add">&nbsp;may</span>&nbsp;abort&nbsp;with&nbsp;a&nbsp;fatal&nbsp;error&nbsp;f<span class="diff_chg">or</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_329">329-</td><td nowrap="nowrap"><span class="diff_sub">module&nbsp;could&nbsp;not&nbsp;be&nbsp;initialized&nbsp;satisfactorily,&nbsp;so&nbsp;the&nbsp;caller&nbsp;doesn't&nbsp;need&nbsp;to</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_330">330+</td><td nowrap="nowrap"><span class="diff_add">certain&nbsp;errors,&nbsp;or&nbsp;return&nbsp;*NULL*&nbsp;if&nbsp;the&nbsp;module&nbsp;could&nbsp;not&nbsp;be&nbsp;initialized</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_330">330-</td><td nowrap="nowrap"><span class="diff_sub">check&nbsp;for&nbsp;errors.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_331">331+</td><td nowrap="nowrap"><span class="diff_add">satisfactorily.</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_331">331</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_332">332</td><td nowrap="nowrap">When&nbsp;embedding&nbsp;Python,&nbsp;the&nbsp;:cfunc:`initspam`&nbsp;function&nbsp;is&nbsp;not&nbsp;called</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_333">333</td><td nowrap="nowrap">automatically&nbsp;unless&nbsp;there's&nbsp;an&nbsp;entry&nbsp;in&nbsp;the&nbsp;:cdata:`_PyImport_Inittab`&nbsp;table.</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__10">n</a></td><td class="diff_header" id="from32_334">334-</td><td nowrap="nowrap">The&nbsp;easiest&nbsp;way&nbsp;to&nbsp;handle&nbsp;this&nbsp;is&nbsp;to<span class="diff_sub">&nbsp;</span>&nbsp;statically&nbsp;initialize&nbsp;your<span class="diff_sub">&nbsp;statically-</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__10">n</a></td><td class="diff_header" id="to32_335">335+</td><td nowrap="nowrap">The&nbsp;easiest&nbsp;way&nbsp;to&nbsp;handle&nbsp;this&nbsp;is&nbsp;to&nbsp;statically&nbsp;initialize&nbsp;your</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_335">335-</td><td nowrap="nowrap">linked&nbsp;modules&nbsp;by&nbsp;directly&nbsp;calling&nbsp;:cfunc:`initspam`&nbsp;after&nbsp;the&nbsp;call<span class="diff_sub">&nbsp;to</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_336">336+</td><td nowrap="nowrap"><span class="diff_add">statically-</span>linked&nbsp;modules&nbsp;by&nbsp;directly&nbsp;calling&nbsp;:cfunc:`initspam`&nbsp;after&nbsp;the&nbsp;call</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_336">336-</td><td nowrap="nowrap">:cfunc:`Py_Initialize`::</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_337">337+</td><td nowrap="nowrap"><span class="diff_add">to&nbsp;</span>:cfunc:`Py_Initialize`::</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_337">337</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_338">338</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;int</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_339">339</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;main(int&nbsp;argc,&nbsp;char&nbsp;*argv[])</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_340">340</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_341">341</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Pass&nbsp;argv[0]&nbsp;to&nbsp;the&nbsp;Python&nbsp;interpreter&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_342">342</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Py_SetProgramName(argv[0]);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_343">343</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_344">344</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Initialize&nbsp;the&nbsp;Python&nbsp;interpreter.&nbsp;&nbsp;Required.&nbsp;*/</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__10"></td><td class="diff_header" id="from32_417">417</td><td nowrap="nowrap">callback&nbsp;mechanism&nbsp;to&nbsp;the&nbsp;Python&nbsp;programmer;&nbsp;the&nbsp;implementation&nbsp;will&nbsp;require</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_418">418</td><td nowrap="nowrap">calling&nbsp;the&nbsp;Python&nbsp;callback&nbsp;functions&nbsp;from&nbsp;a&nbsp;C&nbsp;callback.&nbsp;&nbsp;Other&nbsp;uses&nbsp;are&nbsp;also</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_419">419</td><td nowrap="nowrap">imaginable.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_420">420</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_421">421</td><td nowrap="nowrap">Fortunately,&nbsp;the&nbsp;Python&nbsp;interpreter&nbsp;is&nbsp;easily&nbsp;called&nbsp;recursively,&nbsp;and&nbsp;there&nbsp;is&nbsp;a</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_422">422</td><td nowrap="nowrap">standard&nbsp;interface&nbsp;to&nbsp;call&nbsp;a&nbsp;Python&nbsp;function.&nbsp;&nbsp;(I&nbsp;won't&nbsp;dwell&nbsp;on&nbsp;how&nbsp;to&nbsp;call&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_423">423</td><td nowrap="nowrap">Python&nbsp;parser&nbsp;with&nbsp;a&nbsp;particular&nbsp;string&nbsp;as&nbsp;input&nbsp;---&nbsp;if&nbsp;you're&nbsp;interested,&nbsp;have&nbsp;a</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_424">424</td><td nowrap="nowrap">look&nbsp;at&nbsp;the&nbsp;implementation&nbsp;of&nbsp;the&nbsp;:option:`-c`&nbsp;command&nbsp;line&nbsp;option&nbsp;in</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__11">n</a></td><td class="diff_header" id="from32_425">425-</td><td nowrap="nowrap">:file:`<span class="diff_chg">Pyth</span>o<span class="diff_chg">n</span>/<span class="diff_sub">python</span>main.c`&nbsp;from&nbsp;the&nbsp;Python&nbsp;source&nbsp;code.)</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__11">n</a></td><td class="diff_header" id="to32_426">426+</td><td nowrap="nowrap">:file:`<span class="diff_chg">M</span>o<span class="diff_chg">dules</span>/main.c`&nbsp;from&nbsp;the&nbsp;Python&nbsp;source&nbsp;code.)</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_426">426</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_427">427</td><td nowrap="nowrap">Calling&nbsp;a&nbsp;Python&nbsp;function&nbsp;is&nbsp;easy.&nbsp;&nbsp;First,&nbsp;the&nbsp;Python&nbsp;program&nbsp;must&nbsp;somehow&nbsp;pass</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_428">428</td><td nowrap="nowrap">you&nbsp;the&nbsp;Python&nbsp;function&nbsp;object.&nbsp;&nbsp;You&nbsp;should&nbsp;provide&nbsp;a&nbsp;function&nbsp;(or&nbsp;some&nbsp;other</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_429">429</td><td nowrap="nowrap">interface)&nbsp;to&nbsp;do&nbsp;this.&nbsp;&nbsp;When&nbsp;this&nbsp;function&nbsp;is&nbsp;called,&nbsp;save&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_430">430</td><td nowrap="nowrap">Python&nbsp;function&nbsp;object&nbsp;(be&nbsp;careful&nbsp;to&nbsp;:cfunc:`Py_INCREF`&nbsp;it!)&nbsp;in&nbsp;a&nbsp;global</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_431">431</td><td nowrap="nowrap">variable&nbsp;---&nbsp;or&nbsp;wherever&nbsp;you&nbsp;see&nbsp;fit.&nbsp;For&nbsp;example,&nbsp;the&nbsp;following&nbsp;function&nbsp;might</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_432">432</td><td nowrap="nowrap">be&nbsp;part&nbsp;of&nbsp;a&nbsp;module&nbsp;definition::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_433">433</td><td nowrap="nowrap"></td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__11"></td><td class="diff_header" id="from32_450">450</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Boilerplate&nbsp;to&nbsp;return&nbsp;"None"&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_451">451</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Py_INCREF(Py_None);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_452">452</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;Py_None;</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__12"></td><td class="diff_header" id="from32_453">453</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_454">454</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;result;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_455">455</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;}</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_456">456</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_457">457</td><td nowrap="nowrap">This&nbsp;function&nbsp;must&nbsp;be&nbsp;registered&nbsp;with&nbsp;the&nbsp;interpreter&nbsp;using&nbsp;the</td></tr><tr><td class="diff_next" id="difflib_chg_to32__13"><a href="#difflib_chg_to32__12">n</a></td><td class="diff_header" id="from32_458">458-</td><td nowrap="nowrap">:const:`METH_VARARGS`&nbsp;flag;&nbsp;this&nbsp;is&nbsp;described&nbsp;in&nbsp;section&nbsp;:ref:`methodtable`<span class="diff_chg">,</span></td></tr>
<tr><td class="diff_next" id="difflib_chg_to32__13"><a href="#difflib_chg_to32__12">n</a></td><td class="diff_header" id="to32_459">459+</td><td nowrap="nowrap">:const:`METH_VARARGS`&nbsp;flag;&nbsp;this&nbsp;is&nbsp;described&nbsp;in&nbsp;section&nbsp;:ref:`methodtable`<span class="diff_chg">.&nbsp;&nbsp;The</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_459">459-</td><td nowrap="nowrap"><span class="diff_sub">"The&nbsp;Module's&nbsp;Method&nbsp;Table&nbsp;and&nbsp;Initialization&nbsp;Function."&nbsp;&nbsp;The</span></td></tr>
            <tr><td class="diff_next" id="difflib_chg_to32__14"></td><td class="diff_header" id="from32_460">460</td><td nowrap="nowrap">:cfunc:`PyArg_ParseTuple`&nbsp;function&nbsp;and&nbsp;its&nbsp;arguments&nbsp;are&nbsp;documented&nbsp;in&nbsp;section</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__13">n</a></td><td class="diff_header" id="from32_461">461-</td><td nowrap="nowrap"><span class="diff_sub">:ref:`parsetuple`,&nbsp;"Extracting&nbsp;Parameters&nbsp;in&nbsp;Extension&nbsp;Functions."</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__13">n</a></td><td class="diff_header" id="to32_461">461+</td><td nowrap="nowrap"><span class="diff_add">:ref:`parsetuple`.</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_462">462</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__15"></td><td class="diff_header" id="from32_463">463</td><td nowrap="nowrap">The&nbsp;macros&nbsp;:cfunc:`Py_XINCREF`&nbsp;and&nbsp;:cfunc:`Py_XDECREF`&nbsp;increment/decrement&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_464">464</td><td nowrap="nowrap">reference&nbsp;count&nbsp;of&nbsp;an&nbsp;object&nbsp;and&nbsp;are&nbsp;safe&nbsp;in&nbsp;the&nbsp;presence&nbsp;of&nbsp;*NULL*&nbsp;pointers</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_465">465</td><td nowrap="nowrap">(but&nbsp;note&nbsp;that&nbsp;*temp*&nbsp;will&nbsp;not&nbsp;be&nbsp;&nbsp;*NULL*&nbsp;in&nbsp;this&nbsp;context).&nbsp;&nbsp;More&nbsp;info&nbsp;on&nbsp;them</td></tr><tr><td class="diff_next" id="difflib_chg_to32__16"><a href="#difflib_chg_to32__14">n</a></td><td class="diff_header" id="from32_466">466-</td><td nowrap="nowrap"><span class="diff_sub">in&nbsp;section&nbsp;:ref:`refcounts`,&nbsp;"Reference&nbsp;Counts."</span></td></tr>
<tr><td class="diff_next" id="difflib_chg_to32__16"><a href="#difflib_chg_to32__14">n</a></td><td class="diff_header" id="to32_466">466+</td><td nowrap="nowrap"><span class="diff_add">in&nbsp;section&nbsp;:ref:`refcounts`.</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_467">467</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__15">n</a></td><td class="diff_header" id="from32_468">468-</td><td nowrap="nowrap">..&nbsp;index::&nbsp;single:&nbsp;Py<span class="diff_chg">Eval</span>_CallObject()</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__15">n</a></td><td class="diff_header" id="to32_468">468+</td><td nowrap="nowrap">..&nbsp;index::&nbsp;single:&nbsp;Py<span class="diff_chg">Object</span>_CallObject()</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_469">469</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_470">470</td><td nowrap="nowrap">Later,&nbsp;when&nbsp;it&nbsp;is&nbsp;time&nbsp;to&nbsp;call&nbsp;the&nbsp;function,&nbsp;you&nbsp;call&nbsp;the&nbsp;C&nbsp;function</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__16">n</a></td><td class="diff_header" id="from32_471">471-</td><td nowrap="nowrap">:cfunc:`Py<span class="diff_chg">Eval</span>_CallObject`.&nbsp;&nbsp;This&nbsp;function&nbsp;has&nbsp;two&nbsp;arguments,&nbsp;both&nbsp;pointers&nbsp;to</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__16">n</a></td><td class="diff_header" id="to32_471">471+</td><td nowrap="nowrap">:cfunc:`Py<span class="diff_chg">Object</span>_CallObject`.&nbsp;&nbsp;This&nbsp;function&nbsp;has&nbsp;two&nbsp;arguments,&nbsp;both&nbsp;pointers&nbsp;to</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_472">472</td><td nowrap="nowrap">arbitrary&nbsp;Python&nbsp;objects:&nbsp;the&nbsp;Python&nbsp;function,&nbsp;and&nbsp;the&nbsp;argument&nbsp;list.&nbsp;&nbsp;The</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_473">473</td><td nowrap="nowrap">argument&nbsp;list&nbsp;must&nbsp;always&nbsp;be&nbsp;a&nbsp;tuple&nbsp;object,&nbsp;whose&nbsp;length&nbsp;is&nbsp;the&nbsp;number&nbsp;of</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__17">n</a></td><td class="diff_header" id="from32_474">474-</td><td nowrap="nowrap">arguments.&nbsp;&nbsp;To&nbsp;call&nbsp;the&nbsp;Python&nbsp;function&nbsp;with&nbsp;no&nbsp;arguments,&nbsp;pass&nbsp;<span class="diff_chg">a</span>n&nbsp;<span class="diff_chg">empty&nbsp;tuple;</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__17">n</a></td><td class="diff_header" id="to32_474">474+</td><td nowrap="nowrap">arguments.&nbsp;&nbsp;To&nbsp;call&nbsp;the&nbsp;Python&nbsp;function&nbsp;with&nbsp;no&nbsp;arguments,&nbsp;pass&nbsp;<span class="diff_chg">i</span>n&nbsp;<span class="diff_chg">NULL,&nbsp;or</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_475">475-</td><td nowrap="nowrap"><span class="diff_sub">to&nbsp;call&nbsp;it&nbsp;with&nbsp;one&nbsp;argument,&nbsp;pass&nbsp;a&nbsp;singleton&nbsp;tuple.&nbsp;:cfunc:`Py_BuildValue`</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_475">475+</td><td nowrap="nowrap"><span class="diff_add">an&nbsp;empty&nbsp;tuple;&nbsp;to&nbsp;call&nbsp;it&nbsp;with&nbsp;one&nbsp;argument,&nbsp;pass&nbsp;a&nbsp;singleton&nbsp;tuple.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_476">476-</td><td nowrap="nowrap"><span class="diff_sub">returns&nbsp;a&nbsp;tuple&nbsp;when&nbsp;its&nbsp;format&nbsp;string&nbsp;consists&nbsp;of&nbsp;zero&nbsp;or&nbsp;more&nbsp;format&nbsp;codes</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_476">476+</td><td nowrap="nowrap"><span class="diff_add">:cfunc:`Py_BuildValue`&nbsp;returns&nbsp;a&nbsp;tuple&nbsp;when&nbsp;its&nbsp;format&nbsp;string&nbsp;consists&nbsp;of&nbsp;zero</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_477">477-</td><td nowrap="nowrap">between&nbsp;parentheses.&nbsp;&nbsp;For&nbsp;example::</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_477">477+</td><td nowrap="nowrap"><span class="diff_add">or&nbsp;more&nbsp;format&nbsp;codes&nbsp;</span>between&nbsp;parentheses.&nbsp;&nbsp;For&nbsp;example::</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_478">478</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__17"></td><td class="diff_header" id="from32_479">479</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;int&nbsp;arg;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_480">480</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;PyObject&nbsp;*arglist;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_481">481</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;PyObject&nbsp;*result;</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__18"></td><td class="diff_header" id="from32_482">482</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;...</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_483">483</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;arg&nbsp;=&nbsp;123;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_484">484</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;...</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_485">485</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;/*&nbsp;Time&nbsp;to&nbsp;call&nbsp;the&nbsp;callback&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_486">486</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;arglist&nbsp;=&nbsp;Py_BuildValue("(i)",&nbsp;arg);</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__18">n</a></td><td class="diff_header" id="from32_487">487-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;Py<span class="diff_chg">Eval</span>_CallObject(my_callback,&nbsp;arglist);</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__18">n</a></td><td class="diff_header" id="to32_487">487+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;Py<span class="diff_chg">Object</span>_CallObject(my_callback,&nbsp;arglist);</td></tr>
            <tr><td class="diff_next" id="difflib_chg_to32__19"></td><td class="diff_header" id="from32_488">488</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Py_DECREF(arglist);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_489">489</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__19">n</a></td><td class="diff_header" id="from32_490">490-</td><td nowrap="nowrap">:cfunc:`Py<span class="diff_chg">Eval</span>_CallObject`&nbsp;returns&nbsp;a&nbsp;Python&nbsp;object&nbsp;pointer:&nbsp;this&nbsp;is&nbsp;the&nbsp;return</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__19">n</a></td><td class="diff_header" id="to32_490">490+</td><td nowrap="nowrap">:cfunc:`Py<span class="diff_chg">Object</span>_CallObject`&nbsp;returns&nbsp;a&nbsp;Python&nbsp;object&nbsp;pointer:&nbsp;this&nbsp;is&nbsp;the&nbsp;return</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_491">491-</td><td nowrap="nowrap">value&nbsp;of&nbsp;the&nbsp;Python&nbsp;function.&nbsp;&nbsp;:cfunc:`Py<span class="diff_chg">Eval</span>_CallObject`&nbsp;is<span class="diff_sub">&nbsp;"reference-count-</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_491">491+</td><td nowrap="nowrap">value&nbsp;of&nbsp;the&nbsp;Python&nbsp;function.&nbsp;&nbsp;:cfunc:`Py<span class="diff_chg">Object</span>_CallObject`&nbsp;is</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_492">492-</td><td nowrap="nowrap">neutral"&nbsp;with&nbsp;respect&nbsp;to&nbsp;its&nbsp;arguments.&nbsp;&nbsp;In&nbsp;the&nbsp;example&nbsp;a&nbsp;new<span class="diff_sub">&nbsp;tuple&nbsp;was&nbsp;created</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_492">492+</td><td nowrap="nowrap"><span class="diff_add">"reference-count-</span>neutral"&nbsp;with&nbsp;respect&nbsp;to&nbsp;its&nbsp;arguments.&nbsp;&nbsp;In&nbsp;the&nbsp;example&nbsp;a&nbsp;new</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_493">493-</td><td nowrap="nowrap">to&nbsp;serve&nbsp;as&nbsp;the&nbsp;argument&nbsp;list,&nbsp;which&nbsp;is&nbsp;:cfunc:`Py_DECREF`\<span class="diff_sub">&nbsp;-ed&nbsp;immediately</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_493">493+</td><td nowrap="nowrap"><span class="diff_add">tuple&nbsp;was&nbsp;created&nbsp;</span>to&nbsp;serve&nbsp;as&nbsp;the&nbsp;argument&nbsp;list,&nbsp;which&nbsp;is&nbsp;:cfunc:`Py_DECREF`\</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_494">494-</td><td nowrap="nowrap"><span class="diff_sub">after&nbsp;the&nbsp;call.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_494">494+</td><td nowrap="nowrap"><span class="diff_add">-ed&nbsp;immediately&nbsp;after&nbsp;the&nbsp;call.</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_495">495</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next" id="difflib_chg_to32__20"><a href="#difflib_chg_to32__20">n</a></td><td class="diff_header" id="from32_496">496-</td><td nowrap="nowrap">The&nbsp;return&nbsp;value&nbsp;of&nbsp;:cfunc:`Py<span class="diff_chg">Eval</span>_CallObject`&nbsp;is&nbsp;"new":&nbsp;either&nbsp;it&nbsp;is&nbsp;a&nbsp;brand</td></tr>
<tr><td class="diff_next" id="difflib_chg_to32__20"><a href="#difflib_chg_to32__20">n</a></td><td class="diff_header" id="to32_496">496+</td><td nowrap="nowrap">The&nbsp;return&nbsp;value&nbsp;of&nbsp;:cfunc:`Py<span class="diff_chg">Object</span>_CallObject`&nbsp;is&nbsp;"new":&nbsp;either&nbsp;it&nbsp;is&nbsp;a&nbsp;brand</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_497">497</td><td nowrap="nowrap">new&nbsp;object,&nbsp;or&nbsp;it&nbsp;is&nbsp;an&nbsp;existing&nbsp;object&nbsp;whose&nbsp;reference&nbsp;count&nbsp;has&nbsp;been</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_498">498</td><td nowrap="nowrap">incremented.&nbsp;&nbsp;So,&nbsp;unless&nbsp;you&nbsp;want&nbsp;to&nbsp;save&nbsp;it&nbsp;in&nbsp;a&nbsp;global&nbsp;variable,&nbsp;you&nbsp;should</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_499">499</td><td nowrap="nowrap">somehow&nbsp;:cfunc:`Py_DECREF`&nbsp;the&nbsp;result,&nbsp;even&nbsp;(especially!)&nbsp;if&nbsp;you&nbsp;are&nbsp;not</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_500">500</td><td nowrap="nowrap">interested&nbsp;in&nbsp;its&nbsp;value.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_501">501</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_502">502</td><td nowrap="nowrap">Before&nbsp;you&nbsp;do&nbsp;this,&nbsp;however,&nbsp;it&nbsp;is&nbsp;important&nbsp;to&nbsp;check&nbsp;that&nbsp;the&nbsp;return&nbsp;value</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_503">503</td><td nowrap="nowrap">isn't&nbsp;*NULL*.&nbsp;&nbsp;If&nbsp;it&nbsp;is,&nbsp;the&nbsp;Python&nbsp;function&nbsp;terminated&nbsp;by&nbsp;raising&nbsp;an&nbsp;exception.</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__21">n</a></td><td class="diff_header" id="from32_504">504-</td><td nowrap="nowrap">If&nbsp;the&nbsp;C&nbsp;code&nbsp;that&nbsp;called&nbsp;:cfunc:`Py<span class="diff_chg">Eval</span>_CallObject`&nbsp;is&nbsp;called&nbsp;from&nbsp;Python,&nbsp;it</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__21">n</a></td><td class="diff_header" id="to32_504">504+</td><td nowrap="nowrap">If&nbsp;the&nbsp;C&nbsp;code&nbsp;that&nbsp;called&nbsp;:cfunc:`Py<span class="diff_chg">Object</span>_CallObject`&nbsp;is&nbsp;called&nbsp;from&nbsp;Python,&nbsp;it</td></tr>
            <tr><td class="diff_next" id="difflib_chg_to32__21"></td><td class="diff_header" id="from32_505">505</td><td nowrap="nowrap">should&nbsp;now&nbsp;return&nbsp;an&nbsp;error&nbsp;indication&nbsp;to&nbsp;its&nbsp;Python&nbsp;caller,&nbsp;so&nbsp;the&nbsp;interpreter</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_506">506</td><td nowrap="nowrap">can&nbsp;print&nbsp;a&nbsp;stack&nbsp;trace,&nbsp;or&nbsp;the&nbsp;calling&nbsp;Python&nbsp;code&nbsp;can&nbsp;handle&nbsp;the&nbsp;exception.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_507">507</td><td nowrap="nowrap">If&nbsp;this&nbsp;is&nbsp;not&nbsp;possible&nbsp;or&nbsp;desirable,&nbsp;the&nbsp;exception&nbsp;should&nbsp;be&nbsp;cleared&nbsp;by&nbsp;calling</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__22"></td><td class="diff_header" id="from32_508">508</td><td nowrap="nowrap">:cfunc:`PyErr_Clear`.&nbsp;&nbsp;For&nbsp;example::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_509">509</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_510">510</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;if&nbsp;(result&nbsp;==&nbsp;NULL)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_511">511</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;&nbsp;/*&nbsp;Pass&nbsp;error&nbsp;back&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_512">512</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;...use&nbsp;result...</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__22">n</a></td><td class="diff_header" id="from32_513">513-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Py_DECREF(result);<span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__22">n</a></td><td class="diff_header" id="to32_513">513+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Py_DECREF(result);</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_514">514</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_515">515</td><td nowrap="nowrap">Depending&nbsp;on&nbsp;the&nbsp;desired&nbsp;interface&nbsp;to&nbsp;the&nbsp;Python&nbsp;callback&nbsp;function,&nbsp;you&nbsp;may&nbsp;also</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__23">n</a></td><td class="diff_header" id="from32_516">516-</td><td nowrap="nowrap">have&nbsp;to&nbsp;provide&nbsp;an&nbsp;argument&nbsp;list&nbsp;to&nbsp;:cfunc:`Py<span class="diff_chg">Eval</span>_CallObject`.&nbsp;&nbsp;In&nbsp;some&nbsp;cases</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__23">n</a></td><td class="diff_header" id="to32_516">516+</td><td nowrap="nowrap">have&nbsp;to&nbsp;provide&nbsp;an&nbsp;argument&nbsp;list&nbsp;to&nbsp;:cfunc:`Py<span class="diff_chg">Object</span>_CallObject`.&nbsp;&nbsp;In&nbsp;some&nbsp;cases</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_517">517</td><td nowrap="nowrap">the&nbsp;argument&nbsp;list&nbsp;is&nbsp;also&nbsp;provided&nbsp;by&nbsp;the&nbsp;Python&nbsp;program,&nbsp;through&nbsp;the&nbsp;same</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_518">518</td><td nowrap="nowrap">interface&nbsp;that&nbsp;specified&nbsp;the&nbsp;callback&nbsp;function.&nbsp;&nbsp;It&nbsp;can&nbsp;then&nbsp;be&nbsp;saved&nbsp;and&nbsp;used</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__23"></td><td class="diff_header" id="from32_519">519</td><td nowrap="nowrap">in&nbsp;the&nbsp;same&nbsp;manner&nbsp;as&nbsp;the&nbsp;function&nbsp;object.&nbsp;&nbsp;In&nbsp;other&nbsp;cases,&nbsp;you&nbsp;may&nbsp;have&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_520">520</td><td nowrap="nowrap">construct&nbsp;a&nbsp;new&nbsp;tuple&nbsp;to&nbsp;pass&nbsp;as&nbsp;the&nbsp;argument&nbsp;list.&nbsp;&nbsp;The&nbsp;simplest&nbsp;way&nbsp;to&nbsp;do&nbsp;this</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_521">521</td><td nowrap="nowrap">is&nbsp;to&nbsp;call&nbsp;:cfunc:`Py_BuildValue`.&nbsp;&nbsp;For&nbsp;example,&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;pass&nbsp;an&nbsp;integral</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_522">522</td><td nowrap="nowrap">event&nbsp;code,&nbsp;you&nbsp;might&nbsp;use&nbsp;the&nbsp;following&nbsp;code::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_523">523</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_524">524</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;PyObject&nbsp;*arglist;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_525">525</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;...</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_526">526</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;arglist&nbsp;=&nbsp;Py_BuildValue("(l)",&nbsp;eventcode);</td></tr><tr><td class="diff_next" id="difflib_chg_to32__24"><a href="#difflib_chg_to32__24">n</a></td><td class="diff_header" id="from32_527">527-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;Py<span class="diff_chg">Eval</span>_CallObject(my_callback,&nbsp;arglist);</td></tr>
<tr><td class="diff_next" id="difflib_chg_to32__24"><a href="#difflib_chg_to32__24">n</a></td><td class="diff_header" id="to32_527">527+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;Py<span class="diff_chg">Object</span>_CallObject(my_callback,&nbsp;arglist);</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_528">528</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Py_DECREF(arglist);</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__25"></td><td class="diff_header" id="from32_529">529</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;if&nbsp;(result&nbsp;==&nbsp;NULL)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_530">530</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;&nbsp;/*&nbsp;Pass&nbsp;error&nbsp;back&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_531">531</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;/*&nbsp;Here&nbsp;maybe&nbsp;use&nbsp;the&nbsp;result&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_532">532</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Py_DECREF(result);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_533">533</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_534">534</td><td nowrap="nowrap">Note&nbsp;the&nbsp;placement&nbsp;of&nbsp;``Py_DECREF(arglist)``&nbsp;immediately&nbsp;after&nbsp;the&nbsp;call,&nbsp;before</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__25">n</a></td><td class="diff_header" id="from32_535">535-</td><td nowrap="nowrap">the&nbsp;error&nbsp;check!&nbsp;&nbsp;Also&nbsp;note&nbsp;that&nbsp;strictly&nbsp;sp<span class="diff_chg">o</span>k<span class="diff_chg">e</span>n&nbsp;this&nbsp;code&nbsp;is&nbsp;not&nbsp;complete:</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__25">n</a></td><td class="diff_header" id="to32_535">535+</td><td nowrap="nowrap">the&nbsp;error&nbsp;check!&nbsp;&nbsp;Also&nbsp;note&nbsp;that&nbsp;strictly&nbsp;sp<span class="diff_chg">ea</span>k<span class="diff_chg">i</span>n<span class="diff_add">g</span>&nbsp;this&nbsp;code&nbsp;is&nbsp;not&nbsp;complete:</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_536">536</td><td nowrap="nowrap">:cfunc:`Py_BuildValue`&nbsp;may&nbsp;run&nbsp;out&nbsp;of&nbsp;memory,&nbsp;and&nbsp;this&nbsp;should&nbsp;be&nbsp;checked.</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__26">n</a></td><td class="diff_header" id="to32_537">537+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_538">538+</td><td nowrap="nowrap"><span class="diff_add">You&nbsp;may&nbsp;also&nbsp;call&nbsp;a&nbsp;function&nbsp;with&nbsp;keyword&nbsp;arguments&nbsp;by&nbsp;using</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_539">539+</td><td nowrap="nowrap"><span class="diff_add">:cfunc:`PyObject_Call`,&nbsp;which&nbsp;supports&nbsp;arguments&nbsp;and&nbsp;keyword&nbsp;arguments.&nbsp;&nbsp;As&nbsp;in</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_540">540+</td><td nowrap="nowrap"><span class="diff_add">the&nbsp;above&nbsp;example,&nbsp;we&nbsp;use&nbsp;:cfunc:`Py_BuildValue`&nbsp;to&nbsp;construct&nbsp;the&nbsp;dictionary.&nbsp;::</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_541">541+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_542">542+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;PyObject&nbsp;*dict;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_543">543+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;...</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_544">544+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;dict&nbsp;=&nbsp;Py_BuildValue("{s:i}",&nbsp;"name",&nbsp;val);</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_545">545+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;PyObject_Call(my_callback,&nbsp;NULL,&nbsp;dict);</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_546">546+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;Py_DECREF(dict);</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_547">547+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;if&nbsp;(result&nbsp;==&nbsp;NULL)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_548">548+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;&nbsp;/*&nbsp;Pass&nbsp;error&nbsp;back&nbsp;*/</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_549">549+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;/*&nbsp;Here&nbsp;maybe&nbsp;use&nbsp;the&nbsp;result&nbsp;*/</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_550">550+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;Py_DECREF(result);</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_537">537</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_538">538</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_539">539</td><td nowrap="nowrap">..&nbsp;_parsetuple:</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_540">540</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_541">541</td><td nowrap="nowrap">Extracting&nbsp;Parameters&nbsp;in&nbsp;Extension&nbsp;Functions</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_542">542</td><td nowrap="nowrap">============================================</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_543">543</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__26"></td><td class="diff_header" id="from32_544">544</td><td nowrap="nowrap">..&nbsp;index::&nbsp;single:&nbsp;PyArg_ParseTuple()</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_545">545</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_546">546</td><td nowrap="nowrap">The&nbsp;:cfunc:`PyArg_ParseTuple`&nbsp;function&nbsp;is&nbsp;declared&nbsp;as&nbsp;follows::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_547">547</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_548">548</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;int&nbsp;PyArg_ParseTuple(PyObject&nbsp;*arg,&nbsp;char&nbsp;*format,&nbsp;...);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_549">549</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_550">550</td><td nowrap="nowrap">The&nbsp;*arg*&nbsp;argument&nbsp;must&nbsp;be&nbsp;a&nbsp;tuple&nbsp;object&nbsp;containing&nbsp;an&nbsp;argument&nbsp;list&nbsp;passed</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_551">551</td><td nowrap="nowrap">from&nbsp;Python&nbsp;to&nbsp;a&nbsp;C&nbsp;function.&nbsp;&nbsp;The&nbsp;*format*&nbsp;argument&nbsp;must&nbsp;be&nbsp;a&nbsp;format&nbsp;string,</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__27">n</a></td><td class="diff_header" id="from32_552">552-</td><td nowrap="nowrap"><span class="diff_sub">whose&nbsp;syntax&nbsp;is&nbsp;explained&nbsp;in&nbsp;"Parsing&nbsp;arguments&nbsp;and&nbsp;building&nbsp;values&nbsp;(XXX</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__27">n</a></td><td class="diff_header" id="to32_566">566+</td><td nowrap="nowrap"><span class="diff_add">whose&nbsp;syntax&nbsp;is&nbsp;explained&nbsp;in&nbsp;:ref:`arg-parsing`&nbsp;in&nbsp;the&nbsp;Python/C&nbsp;API&nbsp;Reference</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_553">553-</td><td nowrap="nowrap"><span class="diff_sub">reference:&nbsp;../api/arg-parsing.html)"&nbsp;in&nbsp;the&nbsp;Python/C&nbsp;API&nbsp;Reference&nbsp;Manual&nbsp;(XXX</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_567">567+</td><td nowrap="nowrap"><span class="diff_add">Manual.&nbsp;&nbsp;The&nbsp;remaining&nbsp;arguments&nbsp;must&nbsp;be&nbsp;addresses&nbsp;of&nbsp;variables&nbsp;whose&nbsp;type&nbsp;is</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_554">554-</td><td nowrap="nowrap"><span class="diff_sub">reference:&nbsp;../api/api.html).&nbsp;&nbsp;The&nbsp;remaining&nbsp;arguments&nbsp;must&nbsp;be&nbsp;addresses&nbsp;of</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_568">568+</td><td nowrap="nowrap"><span class="diff_add">determined&nbsp;by&nbsp;the&nbsp;format&nbsp;string.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_555">555-</td><td nowrap="nowrap"><span class="diff_sub">variables&nbsp;whose&nbsp;type&nbsp;is&nbsp;determined&nbsp;by&nbsp;the&nbsp;format&nbsp;string.</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_556">556</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_557">557</td><td nowrap="nowrap">Note&nbsp;that&nbsp;while&nbsp;:cfunc:`PyArg_ParseTuple`&nbsp;checks&nbsp;that&nbsp;the&nbsp;Python&nbsp;arguments&nbsp;have</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_558">558</td><td nowrap="nowrap">the&nbsp;required&nbsp;types,&nbsp;it&nbsp;cannot&nbsp;check&nbsp;the&nbsp;validity&nbsp;of&nbsp;the&nbsp;addresses&nbsp;of&nbsp;C&nbsp;variables</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_559">559</td><td nowrap="nowrap">passed&nbsp;to&nbsp;the&nbsp;call:&nbsp;if&nbsp;you&nbsp;make&nbsp;mistakes&nbsp;there,&nbsp;your&nbsp;code&nbsp;will&nbsp;probably&nbsp;crash&nbsp;or</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_560">560</td><td nowrap="nowrap">at&nbsp;least&nbsp;overwrite&nbsp;random&nbsp;bits&nbsp;in&nbsp;memory.&nbsp;&nbsp;So&nbsp;be&nbsp;careful!</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_561">561</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_562">562</td><td nowrap="nowrap">Note&nbsp;that&nbsp;any&nbsp;Python&nbsp;object&nbsp;references&nbsp;which&nbsp;are&nbsp;provided&nbsp;to&nbsp;the&nbsp;caller&nbsp;are</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_563">563</td><td nowrap="nowrap">*borrowed*&nbsp;references;&nbsp;do&nbsp;not&nbsp;decrement&nbsp;their&nbsp;reference&nbsp;count!</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__27"></td><td class="diff_header" id="from32_648">648</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_649">649</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Nested&nbsp;tuples&nbsp;cannot&nbsp;be&nbsp;parsed&nbsp;when&nbsp;using&nbsp;keyword&nbsp;arguments!&nbsp;&nbsp;Keyword&nbsp;parameters</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_650">650</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;passed&nbsp;in&nbsp;which&nbsp;are&nbsp;not&nbsp;present&nbsp;in&nbsp;the&nbsp;*kwlist*&nbsp;will&nbsp;cause&nbsp;:exc:`TypeError`&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_651">651</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;be&nbsp;raised.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_652">652</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_653">653</td><td nowrap="nowrap">..&nbsp;index::&nbsp;single:&nbsp;Philbrick,&nbsp;Geoff</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_654">654</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_655">655</td><td nowrap="nowrap">Here&nbsp;is&nbsp;an&nbsp;example&nbsp;module&nbsp;which&nbsp;uses&nbsp;keywords,&nbsp;based&nbsp;on&nbsp;an&nbsp;example&nbsp;by&nbsp;Geoff</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__28">n</a></td><td class="diff_header" id="from32_656">656-</td><td nowrap="nowrap">Philbrick&nbsp;(philbrick@hks.com):</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__28">n</a></td><td class="diff_header" id="to32_669">669+</td><td nowrap="nowrap">Philbrick&nbsp;(philbrick@hks.com):<span class="diff_add">:</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_657">657-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next" id="difflib_chg_to32__28"></td><td class="diff_header" id="from32_658">658-</td><td nowrap="nowrap"><span class="diff_sub">..&nbsp;%&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_659">659-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_660">660-</td><td nowrap="nowrap"><span class="diff_sub">::</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_661">661</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_662">662</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#include&nbsp;"Python.h"</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_663">663</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_664">664</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;static&nbsp;PyObject&nbsp;*</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_665">665</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;keywdarg_parrot(PyObject&nbsp;*self,&nbsp;PyObject&nbsp;*args,&nbsp;PyObject&nbsp;*keywds)</td></tr><tr><td class="diff_next" id="difflib_chg_to32__29"><a href="#difflib_chg_to32__29">n</a></td><td class="diff_header" id="from32_666">666-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;{<span class="diff_sub">&nbsp;&nbsp;</span></td></tr>
<tr><td class="diff_next" id="difflib_chg_to32__29"><a href="#difflib_chg_to32__29">n</a></td><td class="diff_header" id="to32_675">675+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;{</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_667">667</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;voltage;</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__30"></td><td class="diff_header" id="from32_668">668</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;*state&nbsp;=&nbsp;"a&nbsp;stiff";</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_669">669</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;*action&nbsp;=&nbsp;"voom";</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__31"></td><td class="diff_header" id="from32_670">670</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;*type&nbsp;=&nbsp;"Norwegian&nbsp;Blue";</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_671">671</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_672">672</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;char&nbsp;*kwlist[]&nbsp;=&nbsp;{"voltage",&nbsp;"state",&nbsp;"action",&nbsp;"type",&nbsp;NULL};</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_673">673</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__30">n</a></td><td class="diff_header" id="from32_674">674-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!PyArg_ParseTupleAndKeywords(args,&nbsp;keywds,&nbsp;"i|sss",&nbsp;kwlist,<span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__30">n</a></td><td class="diff_header" id="to32_683">683+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!PyArg_ParseTupleAndKeywords(args,&nbsp;keywds,&nbsp;"i|sss",&nbsp;kwlist,</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_675">675</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;voltage,&nbsp;&amp;state,&nbsp;&amp;action,&nbsp;&amp;type))</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__31">n</a></td><td class="diff_header" id="from32_676">676-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;<span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__31">n</a></td><td class="diff_header" id="to32_685">685+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_677">677</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__32">n</a></td><td class="diff_header" id="from32_678">678-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("--&nbsp;This&nbsp;parrot&nbsp;wouldn't&nbsp;%s&nbsp;if&nbsp;you&nbsp;put&nbsp;%i&nbsp;Volts&nbsp;through&nbsp;it.\n",<span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__32">n</a></td><td class="diff_header" id="to32_687">687+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("--&nbsp;This&nbsp;parrot&nbsp;wouldn't&nbsp;%s&nbsp;if&nbsp;you&nbsp;put&nbsp;%i&nbsp;Volts&nbsp;through&nbsp;it.\n",</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_679">679</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action,&nbsp;voltage);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_680">680</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("--&nbsp;Lovely&nbsp;plumage,&nbsp;the&nbsp;%s&nbsp;--&nbsp;It's&nbsp;%s!\n",&nbsp;type,&nbsp;state);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_681">681</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_682">682</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Py_INCREF(Py_None);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_683">683</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_684">684</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Py_None;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_685">685</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;}</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_686">686</td><td nowrap="nowrap"></td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__32"></td><td class="diff_header" id="from32_748">748</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_749">749</td><td nowrap="nowrap">..&nbsp;_refcounts:</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_750">750</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_751">751</td><td nowrap="nowrap">Reference&nbsp;Counts</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_752">752</td><td nowrap="nowrap">================</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_753">753</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_754">754</td><td nowrap="nowrap">In&nbsp;languages&nbsp;like&nbsp;C&nbsp;or&nbsp;C++,&nbsp;the&nbsp;programmer&nbsp;is&nbsp;responsible&nbsp;for&nbsp;dynamic&nbsp;allocation</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_755">755</td><td nowrap="nowrap">and&nbsp;deallocation&nbsp;of&nbsp;memory&nbsp;on&nbsp;the&nbsp;heap.&nbsp;&nbsp;In&nbsp;C,&nbsp;this&nbsp;is&nbsp;done&nbsp;using&nbsp;the&nbsp;functions</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__33">n</a></td><td class="diff_header" id="from32_756">756-</td><td nowrap="nowrap">:cfunc:`malloc`&nbsp;and&nbsp;:cfunc:`free`.&nbsp;&nbsp;In&nbsp;C++,&nbsp;the&nbsp;operators&nbsp;<span class="diff_chg">:keyword:</span>`new`&nbsp;and</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__33">n</a></td><td class="diff_header" id="to32_765">765+</td><td nowrap="nowrap">:cfunc:`malloc`&nbsp;and&nbsp;:cfunc:`free`.&nbsp;&nbsp;In&nbsp;C++,&nbsp;the&nbsp;operators&nbsp;<span class="diff_chg">`</span>`new`<span class="diff_add">`</span>&nbsp;and</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_757">757-</td><td nowrap="nowrap"><span class="diff_chg">:keyword:</span>`delete`&nbsp;are&nbsp;used&nbsp;with&nbsp;essentially&nbsp;the&nbsp;same&nbsp;meaning&nbsp;and&nbsp;we'll&nbsp;restrict</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_766">766+</td><td nowrap="nowrap"><span class="diff_chg">`</span>`delete`<span class="diff_add">`</span>&nbsp;are&nbsp;used&nbsp;with&nbsp;essentially&nbsp;the&nbsp;same&nbsp;meaning&nbsp;and&nbsp;we'll&nbsp;restrict</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_758">758</td><td nowrap="nowrap">the&nbsp;following&nbsp;discussion&nbsp;to&nbsp;the&nbsp;C&nbsp;case.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_759">759</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_760">760</td><td nowrap="nowrap">Every&nbsp;block&nbsp;of&nbsp;memory&nbsp;allocated&nbsp;with&nbsp;:cfunc:`malloc`&nbsp;should&nbsp;eventually&nbsp;be</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_761">761</td><td nowrap="nowrap">returned&nbsp;to&nbsp;the&nbsp;pool&nbsp;of&nbsp;available&nbsp;memory&nbsp;by&nbsp;exactly&nbsp;one&nbsp;call&nbsp;to&nbsp;:cfunc:`free`.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_762">762</td><td nowrap="nowrap">It&nbsp;is&nbsp;important&nbsp;to&nbsp;call&nbsp;:cfunc:`free`&nbsp;at&nbsp;the&nbsp;right&nbsp;time.&nbsp;&nbsp;If&nbsp;a&nbsp;block's&nbsp;address</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_763">763</td><td nowrap="nowrap">is&nbsp;forgotten&nbsp;but&nbsp;:cfunc:`free`&nbsp;is&nbsp;not&nbsp;called&nbsp;for&nbsp;it,&nbsp;the&nbsp;memory&nbsp;it&nbsp;occupies</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_764">764</td><td nowrap="nowrap">cannot&nbsp;be&nbsp;reused&nbsp;until&nbsp;the&nbsp;program&nbsp;terminates.&nbsp;&nbsp;This&nbsp;is&nbsp;called&nbsp;a&nbsp;:dfn:`memory</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_765">765</td><td nowrap="nowrap">leak`.&nbsp;&nbsp;On&nbsp;the&nbsp;other&nbsp;hand,&nbsp;if&nbsp;a&nbsp;program&nbsp;calls&nbsp;:cfunc:`free`&nbsp;for&nbsp;a&nbsp;block&nbsp;and&nbsp;then</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__33"></td><td class="diff_header" id="from32_810">810</td><td nowrap="nowrap">which&nbsp;is&nbsp;non-zero.&nbsp;&nbsp;Typical&nbsp;reference&nbsp;counting&nbsp;implementations&nbsp;are&nbsp;not&nbsp;able&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_811">811</td><td nowrap="nowrap">reclaim&nbsp;the&nbsp;memory&nbsp;belonging&nbsp;to&nbsp;any&nbsp;objects&nbsp;in&nbsp;a&nbsp;reference&nbsp;cycle,&nbsp;or&nbsp;referenced</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_812">812</td><td nowrap="nowrap">from&nbsp;the&nbsp;objects&nbsp;in&nbsp;the&nbsp;cycle,&nbsp;even&nbsp;though&nbsp;there&nbsp;are&nbsp;no&nbsp;further&nbsp;references&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_813">813</td><td nowrap="nowrap">the&nbsp;cycle&nbsp;itself.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_814">814</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_815">815</td><td nowrap="nowrap">The&nbsp;cycle&nbsp;detector&nbsp;is&nbsp;able&nbsp;to&nbsp;detect&nbsp;garbage&nbsp;cycles&nbsp;and&nbsp;can&nbsp;reclaim&nbsp;them&nbsp;so&nbsp;long</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_816">816</td><td nowrap="nowrap">as&nbsp;there&nbsp;are&nbsp;no&nbsp;finalizers&nbsp;implemented&nbsp;in&nbsp;Python&nbsp;(:meth:`__del__`&nbsp;methods).</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_817">817</td><td nowrap="nowrap">When&nbsp;there&nbsp;are&nbsp;such&nbsp;finalizers,&nbsp;the&nbsp;detector&nbsp;exposes&nbsp;the&nbsp;cycles&nbsp;through&nbsp;the</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__34">n</a></td><td class="diff_header" id="from32_818">818-</td><td nowrap="nowrap"><span class="diff_sub">:mod:`gc`&nbsp;module&nbsp;(XXX&nbsp;reference:&nbsp;../lib/module-gc.html)&nbsp;(specifically,&nbsp;the</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__34">n</a></td><td class="diff_header" id="to32_827">827+</td><td nowrap="nowrap"><span class="diff_add">:mod:`gc`&nbsp;module&nbsp;(specifically,&nbsp;the</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_819">819</td><td nowrap="nowrap">``garbage``&nbsp;variable&nbsp;in&nbsp;that&nbsp;module).&nbsp;&nbsp;The&nbsp;:mod:`gc`&nbsp;module&nbsp;also&nbsp;exposes&nbsp;a&nbsp;way</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_820">820</td><td nowrap="nowrap">to&nbsp;run&nbsp;the&nbsp;detector&nbsp;(the&nbsp;:func:`collect`&nbsp;function),&nbsp;as&nbsp;well&nbsp;as&nbsp;configuration</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_821">821</td><td nowrap="nowrap">interfaces&nbsp;and&nbsp;the&nbsp;ability&nbsp;to&nbsp;disable&nbsp;the&nbsp;detector&nbsp;at&nbsp;runtime.&nbsp;&nbsp;The&nbsp;cycle</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_822">822</td><td nowrap="nowrap">detector&nbsp;is&nbsp;considered&nbsp;an&nbsp;optional&nbsp;component;&nbsp;though&nbsp;it&nbsp;is&nbsp;included&nbsp;by&nbsp;default,</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_823">823</td><td nowrap="nowrap">it&nbsp;can&nbsp;be&nbsp;disabled&nbsp;at&nbsp;build&nbsp;time&nbsp;using&nbsp;the&nbsp;:option:`--without-cycle-gc`&nbsp;option</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_824">824</td><td nowrap="nowrap">to&nbsp;the&nbsp;:program:`configure`&nbsp;script&nbsp;on&nbsp;Unix&nbsp;platforms&nbsp;(including&nbsp;Mac&nbsp;OS&nbsp;X)&nbsp;or&nbsp;by</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_825">825</td><td nowrap="nowrap">removing&nbsp;the&nbsp;definition&nbsp;of&nbsp;``WITH_CYCLE_GC``&nbsp;in&nbsp;the&nbsp;:file:`pyconfig.h`&nbsp;header&nbsp;on</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_826">826</td><td nowrap="nowrap">other&nbsp;platforms.&nbsp;&nbsp;If&nbsp;the&nbsp;cycle&nbsp;detector&nbsp;is&nbsp;disabled&nbsp;in&nbsp;this&nbsp;way,&nbsp;the&nbsp;:mod:`gc`</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__34"></td><td class="diff_header" id="from32_852">852</td><td nowrap="nowrap">borrower&nbsp;of&nbsp;a&nbsp;reference&nbsp;should&nbsp;not&nbsp;call&nbsp;:cfunc:`Py_DECREF`.&nbsp;&nbsp;The&nbsp;borrower&nbsp;must</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_853">853</td><td nowrap="nowrap">not&nbsp;hold&nbsp;on&nbsp;to&nbsp;the&nbsp;object&nbsp;longer&nbsp;than&nbsp;the&nbsp;owner&nbsp;from&nbsp;which&nbsp;it&nbsp;was&nbsp;borrowed.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_854">854</td><td nowrap="nowrap">Using&nbsp;a&nbsp;borrowed&nbsp;reference&nbsp;after&nbsp;the&nbsp;owner&nbsp;has&nbsp;disposed&nbsp;of&nbsp;it&nbsp;risks&nbsp;using&nbsp;freed</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_855">855</td><td nowrap="nowrap">memory&nbsp;and&nbsp;should&nbsp;be&nbsp;avoided&nbsp;completely.&nbsp;[#]_</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_856">856</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_857">857</td><td nowrap="nowrap">The&nbsp;advantage&nbsp;of&nbsp;borrowing&nbsp;over&nbsp;owning&nbsp;a&nbsp;reference&nbsp;is&nbsp;that&nbsp;you&nbsp;don't&nbsp;need&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_858">858</td><td nowrap="nowrap">take&nbsp;care&nbsp;of&nbsp;disposing&nbsp;of&nbsp;the&nbsp;reference&nbsp;on&nbsp;all&nbsp;possible&nbsp;paths&nbsp;through&nbsp;the&nbsp;code</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_859">859</td><td nowrap="nowrap">---&nbsp;in&nbsp;other&nbsp;words,&nbsp;with&nbsp;a&nbsp;borrowed&nbsp;reference&nbsp;you&nbsp;don't&nbsp;run&nbsp;the&nbsp;risk&nbsp;of&nbsp;leaking</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__35">n</a></td><td class="diff_header" id="from32_860">860-</td><td nowrap="nowrap">when&nbsp;a&nbsp;premature&nbsp;exit&nbsp;is&nbsp;taken.&nbsp;&nbsp;The&nbsp;disadvantage&nbsp;of&nbsp;borrowing&nbsp;over&nbsp;<span class="diff_chg">leak</span>ing&nbsp;is</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__35">n</a></td><td class="diff_header" id="to32_869">869+</td><td nowrap="nowrap">when&nbsp;a&nbsp;premature&nbsp;exit&nbsp;is&nbsp;taken.&nbsp;&nbsp;The&nbsp;disadvantage&nbsp;of&nbsp;borrowing&nbsp;over&nbsp;<span class="diff_chg">own</span>ing&nbsp;is</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_861">861</td><td nowrap="nowrap">that&nbsp;there&nbsp;are&nbsp;some&nbsp;subtle&nbsp;situations&nbsp;where&nbsp;in&nbsp;seemingly&nbsp;correct&nbsp;code&nbsp;a&nbsp;borrowed</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_862">862</td><td nowrap="nowrap">reference&nbsp;can&nbsp;be&nbsp;used&nbsp;after&nbsp;the&nbsp;owner&nbsp;from&nbsp;which&nbsp;it&nbsp;was&nbsp;borrowed&nbsp;has&nbsp;in&nbsp;fact</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_863">863</td><td nowrap="nowrap">disposed&nbsp;of&nbsp;it.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_864">864</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_865">865</td><td nowrap="nowrap">A&nbsp;borrowed&nbsp;reference&nbsp;can&nbsp;be&nbsp;changed&nbsp;into&nbsp;an&nbsp;owned&nbsp;reference&nbsp;by&nbsp;calling</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_866">866</td><td nowrap="nowrap">:cfunc:`Py_INCREF`.&nbsp;&nbsp;This&nbsp;does&nbsp;not&nbsp;affect&nbsp;the&nbsp;status&nbsp;of&nbsp;the&nbsp;owner&nbsp;from&nbsp;which&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_867">867</td><td nowrap="nowrap">reference&nbsp;was&nbsp;borrowed&nbsp;---&nbsp;it&nbsp;creates&nbsp;a&nbsp;new&nbsp;owned&nbsp;reference,&nbsp;and&nbsp;gives&nbsp;full</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_868">868</td><td nowrap="nowrap">owner&nbsp;responsibilities&nbsp;(the&nbsp;new&nbsp;owner&nbsp;must&nbsp;dispose&nbsp;of&nbsp;the&nbsp;reference&nbsp;properly,&nbsp;as</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__35"></td><td class="diff_header" id="from32_1022">1022</td><td nowrap="nowrap">checking.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1023">1023</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1024">1024</td><td nowrap="nowrap">The&nbsp;C&nbsp;function&nbsp;calling&nbsp;mechanism&nbsp;guarantees&nbsp;that&nbsp;the&nbsp;argument&nbsp;list&nbsp;passed&nbsp;to&nbsp;C</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1025">1025</td><td nowrap="nowrap">functions&nbsp;(``args``&nbsp;in&nbsp;the&nbsp;examples)&nbsp;is&nbsp;never&nbsp;*NULL*&nbsp;---&nbsp;in&nbsp;fact&nbsp;it&nbsp;guarantees</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1026">1026</td><td nowrap="nowrap">that&nbsp;it&nbsp;is&nbsp;always&nbsp;a&nbsp;tuple.&nbsp;[#]_</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1027">1027</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1028">1028</td><td nowrap="nowrap">It&nbsp;is&nbsp;a&nbsp;severe&nbsp;error&nbsp;to&nbsp;ever&nbsp;let&nbsp;a&nbsp;*NULL*&nbsp;pointer&nbsp;"escape"&nbsp;to&nbsp;the&nbsp;Python&nbsp;user.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1029">1029</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__36">n</a></td><td class="diff_header" id="from32_1030">1030-</td><td nowrap="nowrap">..<span class="diff_sub">&nbsp;%</span>&nbsp;Frank&nbsp;Stajano:</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__36">n</a></td><td class="diff_header" id="to32_1039">1039+</td><td nowrap="nowrap">..&nbsp;Frank&nbsp;Stajano:</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_1031">1031-</td><td nowrap="nowrap"><span class="diff_chg">..&nbsp;%</span>&nbsp;A&nbsp;pedagogically&nbsp;buggy&nbsp;example,&nbsp;along&nbsp;the&nbsp;lines&nbsp;of&nbsp;the&nbsp;previous&nbsp;listing,</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_1040">1040+</td><td nowrap="nowrap"><span class="diff_chg">&nbsp;&nbsp;</span>&nbsp;A&nbsp;pedagogically&nbsp;buggy&nbsp;example,&nbsp;along&nbsp;the&nbsp;lines&nbsp;of&nbsp;the&nbsp;previous&nbsp;listing,<span class="diff_add">&nbsp;would</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_1032">1032-</td><td nowrap="nowrap"><span class="diff_chg">..&nbsp;%&nbsp;would</span>&nbsp;be&nbsp;helpful&nbsp;here&nbsp;--&nbsp;showing&nbsp;in&nbsp;more&nbsp;concrete&nbsp;terms&nbsp;what&nbsp;sort&nbsp;of</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_1041">1041+</td><td nowrap="nowrap"><span class="diff_chg">&nbsp;&nbsp;</span>&nbsp;be&nbsp;helpful&nbsp;here&nbsp;--&nbsp;showing&nbsp;in&nbsp;more&nbsp;concrete&nbsp;terms&nbsp;what&nbsp;sort&nbsp;of<span class="diff_add">&nbsp;actions&nbsp;could</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_1033">1033-</td><td nowrap="nowrap"><span class="diff_chg">..&nbsp;%&nbsp;actions&nbsp;could</span>&nbsp;cause&nbsp;the&nbsp;problem.&nbsp;I&nbsp;can't&nbsp;very&nbsp;well&nbsp;imagine&nbsp;it&nbsp;from&nbsp;the</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_1042">1042+</td><td nowrap="nowrap"><span class="diff_chg">&nbsp;&nbsp;</span>&nbsp;cause&nbsp;the&nbsp;problem.&nbsp;I&nbsp;can't&nbsp;very&nbsp;well&nbsp;imagine&nbsp;it&nbsp;from&nbsp;the<span class="diff_add">&nbsp;description.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_1034">1034-</td><td nowrap="nowrap"><span class="diff_sub">..&nbsp;%&nbsp;description.</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1035">1035</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1036">1036</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1037">1037</td><td nowrap="nowrap">..&nbsp;_cplusplus:</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1038">1038</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1039">1039</td><td nowrap="nowrap">Writing&nbsp;Extensions&nbsp;in&nbsp;C++</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1040">1040</td><td nowrap="nowrap">=========================</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1041">1041</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1042">1042</td><td nowrap="nowrap">It&nbsp;is&nbsp;possible&nbsp;to&nbsp;write&nbsp;extension&nbsp;modules&nbsp;in&nbsp;C++.&nbsp;&nbsp;Some&nbsp;restrictions&nbsp;apply.&nbsp;&nbsp;If</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__36"></td><td class="diff_header" id="from32_1062">1062</td><td nowrap="nowrap">Python,&nbsp;but&nbsp;sometimes&nbsp;the&nbsp;code&nbsp;in&nbsp;an&nbsp;extension&nbsp;module&nbsp;can&nbsp;be&nbsp;useful&nbsp;for&nbsp;other</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1063">1063</td><td nowrap="nowrap">extension&nbsp;modules.&nbsp;For&nbsp;example,&nbsp;an&nbsp;extension&nbsp;module&nbsp;could&nbsp;implement&nbsp;a&nbsp;type</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1064">1064</td><td nowrap="nowrap">"collection"&nbsp;which&nbsp;works&nbsp;like&nbsp;lists&nbsp;without&nbsp;order.&nbsp;Just&nbsp;like&nbsp;the&nbsp;standard&nbsp;Python</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1065">1065</td><td nowrap="nowrap">list&nbsp;type&nbsp;has&nbsp;a&nbsp;C&nbsp;API&nbsp;which&nbsp;permits&nbsp;extension&nbsp;modules&nbsp;to&nbsp;create&nbsp;and&nbsp;manipulate</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1066">1066</td><td nowrap="nowrap">lists,&nbsp;this&nbsp;new&nbsp;collection&nbsp;type&nbsp;should&nbsp;have&nbsp;a&nbsp;set&nbsp;of&nbsp;C&nbsp;functions&nbsp;for&nbsp;direct</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1067">1067</td><td nowrap="nowrap">manipulation&nbsp;from&nbsp;other&nbsp;extension&nbsp;modules.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1068">1068</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1069">1069</td><td nowrap="nowrap">At&nbsp;first&nbsp;sight&nbsp;this&nbsp;seems&nbsp;easy:&nbsp;just&nbsp;write&nbsp;the&nbsp;functions&nbsp;(without&nbsp;declaring&nbsp;them</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__37">n</a></td><td class="diff_header" id="from32_1070">1070-</td><td nowrap="nowrap"><span class="diff_chg">:keyword:</span>`static`,&nbsp;of&nbsp;course),&nbsp;provide&nbsp;an&nbsp;appropriate&nbsp;header&nbsp;file,&nbsp;and&nbsp;document</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__37">n</a></td><td class="diff_header" id="to32_1078">1078+</td><td nowrap="nowrap"><span class="diff_chg">`</span>`static`<span class="diff_add">`</span>,&nbsp;of&nbsp;course),&nbsp;provide&nbsp;an&nbsp;appropriate&nbsp;header&nbsp;file,&nbsp;and&nbsp;document</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1071">1071</td><td nowrap="nowrap">the&nbsp;C&nbsp;API.&nbsp;And&nbsp;in&nbsp;fact&nbsp;this&nbsp;would&nbsp;work&nbsp;if&nbsp;all&nbsp;extension&nbsp;modules&nbsp;were&nbsp;always</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1072">1072</td><td nowrap="nowrap">linked&nbsp;statically&nbsp;with&nbsp;the&nbsp;Python&nbsp;interpreter.&nbsp;When&nbsp;modules&nbsp;are&nbsp;used&nbsp;as&nbsp;shared</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1073">1073</td><td nowrap="nowrap">libraries,&nbsp;however,&nbsp;the&nbsp;symbols&nbsp;defined&nbsp;in&nbsp;one&nbsp;module&nbsp;may&nbsp;not&nbsp;be&nbsp;visible&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1074">1074</td><td nowrap="nowrap">another&nbsp;module.&nbsp;The&nbsp;details&nbsp;of&nbsp;visibility&nbsp;depend&nbsp;on&nbsp;the&nbsp;operating&nbsp;system;&nbsp;some</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__37"></td><td class="diff_header" id="from32_1075">1075</td><td nowrap="nowrap">systems&nbsp;use&nbsp;one&nbsp;global&nbsp;namespace&nbsp;for&nbsp;the&nbsp;Python&nbsp;interpreter&nbsp;and&nbsp;all&nbsp;extension</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1076">1076</td><td nowrap="nowrap">modules&nbsp;(Windows,&nbsp;for&nbsp;example),&nbsp;whereas&nbsp;others&nbsp;require&nbsp;an&nbsp;explicit&nbsp;list&nbsp;of</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1077">1077</td><td nowrap="nowrap">imported&nbsp;symbols&nbsp;at&nbsp;module&nbsp;link&nbsp;time&nbsp;(AIX&nbsp;is&nbsp;one&nbsp;example),&nbsp;or&nbsp;offer&nbsp;a&nbsp;choice&nbsp;of</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1078">1078</td><td nowrap="nowrap">different&nbsp;strategies&nbsp;(most&nbsp;Unices).&nbsp;And&nbsp;even&nbsp;if&nbsp;symbols&nbsp;are&nbsp;globally&nbsp;visible,</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1079">1079</td><td nowrap="nowrap">the&nbsp;module&nbsp;whose&nbsp;functions&nbsp;one&nbsp;wishes&nbsp;to&nbsp;call&nbsp;might&nbsp;not&nbsp;have&nbsp;been&nbsp;loaded&nbsp;yet!</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1080">1080</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1081">1081</td><td nowrap="nowrap">Portability&nbsp;therefore&nbsp;requires&nbsp;not&nbsp;to&nbsp;make&nbsp;any&nbsp;assumptions&nbsp;about&nbsp;symbol</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1082">1082</td><td nowrap="nowrap">visibility.&nbsp;This&nbsp;means&nbsp;that&nbsp;all&nbsp;symbols&nbsp;in&nbsp;extension&nbsp;modules&nbsp;should&nbsp;be&nbsp;declared</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__38">n</a></td><td class="diff_header" id="from32_1083">1083-</td><td nowrap="nowrap"><span class="diff_chg">:keyword:</span>`static`,&nbsp;except&nbsp;for&nbsp;the&nbsp;module's&nbsp;initialization&nbsp;function,&nbsp;in&nbsp;order&nbsp;to</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__38">n</a></td><td class="diff_header" id="to32_1091">1091+</td><td nowrap="nowrap"><span class="diff_chg">`</span>`static`<span class="diff_add">`</span>,&nbsp;except&nbsp;for&nbsp;the&nbsp;module's&nbsp;initialization&nbsp;function,&nbsp;in&nbsp;order&nbsp;to</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1084">1084</td><td nowrap="nowrap">avoid&nbsp;name&nbsp;clashes&nbsp;with&nbsp;other&nbsp;extension&nbsp;modules&nbsp;(as&nbsp;discussed&nbsp;in&nbsp;section</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1085">1085</td><td nowrap="nowrap">:ref:`methodtable`).&nbsp;And&nbsp;it&nbsp;means&nbsp;that&nbsp;symbols&nbsp;that&nbsp;*should*&nbsp;be&nbsp;accessible&nbsp;from</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1086">1086</td><td nowrap="nowrap">other&nbsp;extension&nbsp;modules&nbsp;must&nbsp;be&nbsp;exported&nbsp;in&nbsp;a&nbsp;different&nbsp;way.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1087">1087</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1088">1088</td><td nowrap="nowrap">Python&nbsp;provides&nbsp;a&nbsp;special&nbsp;mechanism&nbsp;to&nbsp;pass&nbsp;C-level&nbsp;information&nbsp;(pointers)&nbsp;from</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1089">1089</td><td nowrap="nowrap">one&nbsp;extension&nbsp;module&nbsp;to&nbsp;another&nbsp;one:&nbsp;CObjects.&nbsp;A&nbsp;CObject&nbsp;is&nbsp;a&nbsp;Python&nbsp;data&nbsp;type</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1090">1090</td><td nowrap="nowrap">which&nbsp;stores&nbsp;a&nbsp;pointer&nbsp;(:ctype:`void&nbsp;\*`).&nbsp;&nbsp;CObjects&nbsp;can&nbsp;only&nbsp;be&nbsp;created&nbsp;and</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1091">1091</td><td nowrap="nowrap">accessed&nbsp;via&nbsp;their&nbsp;C&nbsp;API,&nbsp;but&nbsp;they&nbsp;can&nbsp;be&nbsp;passed&nbsp;around&nbsp;like&nbsp;any&nbsp;other&nbsp;Python</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__38"></td><td class="diff_header" id="from32_1103">1103</td><td nowrap="nowrap">the&nbsp;writer&nbsp;of&nbsp;the&nbsp;exporting&nbsp;module,&nbsp;which&nbsp;is&nbsp;appropriate&nbsp;for&nbsp;commonly&nbsp;used</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1104">1104</td><td nowrap="nowrap">library&nbsp;modules.&nbsp;It&nbsp;stores&nbsp;all&nbsp;C&nbsp;API&nbsp;pointers&nbsp;(just&nbsp;one&nbsp;in&nbsp;the&nbsp;example!)&nbsp;in&nbsp;an</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1105">1105</td><td nowrap="nowrap">array&nbsp;of&nbsp;:ctype:`void`&nbsp;pointers&nbsp;which&nbsp;becomes&nbsp;the&nbsp;value&nbsp;of&nbsp;a&nbsp;CObject.&nbsp;The&nbsp;header</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1106">1106</td><td nowrap="nowrap">file&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;module&nbsp;provides&nbsp;a&nbsp;macro&nbsp;that&nbsp;takes&nbsp;care&nbsp;of&nbsp;importing</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1107">1107</td><td nowrap="nowrap">the&nbsp;module&nbsp;and&nbsp;retrieving&nbsp;its&nbsp;C&nbsp;API&nbsp;pointers;&nbsp;client&nbsp;modules&nbsp;only&nbsp;have&nbsp;to&nbsp;call</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1108">1108</td><td nowrap="nowrap">this&nbsp;macro&nbsp;before&nbsp;accessing&nbsp;the&nbsp;C&nbsp;API.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1109">1109</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__39"></td><td class="diff_header" id="from32_1110">1110</td><td nowrap="nowrap">The&nbsp;exporting&nbsp;module&nbsp;is&nbsp;a&nbsp;modification&nbsp;of&nbsp;the&nbsp;:mod:`spam`&nbsp;module&nbsp;from&nbsp;section</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__39">n</a></td><td class="diff_header" id="from32_1111">1111-</td><td nowrap="nowrap">:ref:`simpleexample`.&nbsp;The&nbsp;function&nbsp;:func:`spam.system`&nbsp;does&nbsp;not&nbsp;call<span class="diff_sub">&nbsp;the&nbsp;C</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__39">n</a></td><td class="diff_header" id="to32_1119">1119+</td><td nowrap="nowrap">:ref:`<span class="diff_add">extending-</span>simpleexample`.&nbsp;The&nbsp;function&nbsp;:func:`spam.system`&nbsp;does&nbsp;not&nbsp;call</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_1112">1112-</td><td nowrap="nowrap">library&nbsp;function&nbsp;:cfunc:`system`&nbsp;directly,&nbsp;but&nbsp;a&nbsp;function</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_1120">1120+</td><td nowrap="nowrap"><span class="diff_add">the&nbsp;C&nbsp;</span>library&nbsp;function&nbsp;:cfunc:`system`&nbsp;directly,&nbsp;but&nbsp;a&nbsp;function</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1113">1113</td><td nowrap="nowrap">:cfunc:`PySpam_System`,&nbsp;which&nbsp;would&nbsp;of&nbsp;course&nbsp;do&nbsp;something&nbsp;more&nbsp;complicated&nbsp;in</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1114">1114</td><td nowrap="nowrap">reality&nbsp;(such&nbsp;as&nbsp;adding&nbsp;"spam"&nbsp;to&nbsp;every&nbsp;command).&nbsp;This&nbsp;function</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1115">1115</td><td nowrap="nowrap">:cfunc:`PySpam_System`&nbsp;is&nbsp;also&nbsp;exported&nbsp;to&nbsp;other&nbsp;extension&nbsp;modules.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1116">1116</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1117">1117</td><td nowrap="nowrap">The&nbsp;function&nbsp;:cfunc:`PySpam_System`&nbsp;is&nbsp;a&nbsp;plain&nbsp;C&nbsp;function,&nbsp;declared</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__40">n</a></td><td class="diff_header" id="from32_1118">1118-</td><td nowrap="nowrap"><span class="diff_chg">:keyword:</span>`static`&nbsp;like&nbsp;everything&nbsp;else::</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__40">n</a></td><td class="diff_header" id="to32_1126">1126+</td><td nowrap="nowrap"><span class="diff_chg">`</span>`static`<span class="diff_add">`</span>&nbsp;like&nbsp;everything&nbsp;else::</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1119">1119</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1120">1120</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;static&nbsp;int</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1121">1121</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;PySpam_System(const&nbsp;char&nbsp;*command)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1122">1122</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1123">1123</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;system(command);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1124">1124</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;}</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1125">1125</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1126">1126</td><td nowrap="nowrap">The&nbsp;function&nbsp;:cfunc:`spam_system`&nbsp;is&nbsp;modified&nbsp;in&nbsp;a&nbsp;trivial&nbsp;way::</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__40"></td><td class="diff_header" id="from32_1153">1153</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;PyMODINIT_FUNC</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1154">1154</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;initspam(void)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1155">1155</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1156">1156</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PyObject&nbsp;*m;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1157">1157</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;void&nbsp;*PySpam_API[PySpam_API_pointers];</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1158">1158</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PyObject&nbsp;*c_api_object;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1159">1159</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1160">1160</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;=&nbsp;Py_InitModule("spam",&nbsp;SpamMethods);</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__41">n</a></td><td class="diff_header" id="to32_1169">1169+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m&nbsp;==&nbsp;NULL)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_1170">1170+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1161">1161</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1162">1162</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Initialize&nbsp;the&nbsp;C&nbsp;API&nbsp;pointer&nbsp;array&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1163">1163</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PySpam_API[PySpam_System_NUM]&nbsp;=&nbsp;(void&nbsp;*)PySpam_System;</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__41"></td><td class="diff_header" id="from32_1164">1164</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1165">1165</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Create&nbsp;a&nbsp;CObject&nbsp;containing&nbsp;the&nbsp;API&nbsp;pointer&nbsp;array's&nbsp;address&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1166">1166</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c_api_object&nbsp;=&nbsp;PyCObject_FromVoidPtr((void&nbsp;*)PySpam_API,&nbsp;NULL);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1167">1167</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1168">1168</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(c_api_object&nbsp;!=&nbsp;NULL)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1169">1169</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PyModule_AddObject(m,&nbsp;"_C_API",&nbsp;c_api_object);</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1170">1170</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;}</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1171">1171</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__42">n</a></td><td class="diff_header" id="from32_1172">1172-</td><td nowrap="nowrap">Note&nbsp;that&nbsp;``PySpam_API``&nbsp;is&nbsp;declared&nbsp;<span class="diff_chg">:keyword:</span>`static`;&nbsp;otherwise&nbsp;the&nbsp;pointer</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__42">n</a></td><td class="diff_header" id="to32_1182">1182+</td><td nowrap="nowrap">Note&nbsp;that&nbsp;``PySpam_API``&nbsp;is&nbsp;declared&nbsp;<span class="diff_chg">`</span>`static`<span class="diff_add">`</span>;&nbsp;otherwise&nbsp;the&nbsp;pointer</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1173">1173</td><td nowrap="nowrap">array&nbsp;would&nbsp;disappear&nbsp;when&nbsp;:func:`initspam`&nbsp;terminates!</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1174">1174</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1175">1175</td><td nowrap="nowrap">The&nbsp;bulk&nbsp;of&nbsp;the&nbsp;work&nbsp;is&nbsp;in&nbsp;the&nbsp;header&nbsp;file&nbsp;:file:`spammodule.h`,&nbsp;which&nbsp;looks</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1176">1176</td><td nowrap="nowrap">like&nbsp;this::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1177">1177</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1178">1178</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#ifndef&nbsp;Py_SPAMMODULE_H</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1179">1179</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#define&nbsp;Py_SPAMMODULE_H</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1180">1180</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#ifdef&nbsp;__cplusplus</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to32__42"></td><td class="diff_header" id="from32_1234">1234</td><td nowrap="nowrap">:cfunc:`PySpam_System`&nbsp;is&nbsp;to&nbsp;call&nbsp;the&nbsp;function&nbsp;(or&nbsp;rather&nbsp;macro)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1235">1235</td><td nowrap="nowrap">:cfunc:`import_spam`&nbsp;in&nbsp;its&nbsp;initialization&nbsp;function::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1236">1236</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1237">1237</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;PyMODINIT_FUNC</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1238">1238</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;initclient(void)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1239">1239</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1240">1240</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PyObject&nbsp;*m;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1241">1241</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__43">n</a></td><td class="diff_header" id="from32_1242">1242-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Py_InitModule("client",&nbsp;ClientMethods);</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__43">n</a></td><td class="diff_header" id="to32_1252">1252+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="diff_add">&nbsp;m&nbsp;=</span>&nbsp;Py_InitModule("client",&nbsp;ClientMethods);</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_1253">1253+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m&nbsp;==&nbsp;NULL)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to32_1254">1254+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1243">1243</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(import_spam()&nbsp;&lt;&nbsp;0)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1244">1244</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1245">1245</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;additional&nbsp;initialization&nbsp;can&nbsp;happen&nbsp;here&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1246">1246</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;}</td></tr>            <tr><td class="diff_next" id="difflib_chg_to32__43"></td><td class="diff_header" id="from32_1247">1247</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1248">1248</td><td nowrap="nowrap">The&nbsp;main&nbsp;disadvantage&nbsp;of&nbsp;this&nbsp;approach&nbsp;is&nbsp;that&nbsp;the&nbsp;file&nbsp;:file:`spammodule.h`&nbsp;is</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1249">1249</td><td nowrap="nowrap">rather&nbsp;complicated.&nbsp;However,&nbsp;the&nbsp;basic&nbsp;structure&nbsp;is&nbsp;the&nbsp;same&nbsp;for&nbsp;each&nbsp;function</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1250">1250</td><td nowrap="nowrap">that&nbsp;is&nbsp;exported,&nbsp;so&nbsp;it&nbsp;has&nbsp;to&nbsp;be&nbsp;learned&nbsp;only&nbsp;once.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1251">1251</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1252">1252</td><td nowrap="nowrap">Finally&nbsp;it&nbsp;should&nbsp;be&nbsp;mentioned&nbsp;that&nbsp;CObjects&nbsp;offer&nbsp;additional&nbsp;functionality,</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1253">1253</td><td nowrap="nowrap">which&nbsp;is&nbsp;especially&nbsp;useful&nbsp;for&nbsp;memory&nbsp;allocation&nbsp;and&nbsp;deallocation&nbsp;of&nbsp;the&nbsp;pointer</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1254">1254</td><td nowrap="nowrap">stored&nbsp;in&nbsp;a&nbsp;CObject.&nbsp;The&nbsp;details&nbsp;are&nbsp;described&nbsp;in&nbsp;the&nbsp;Python/C&nbsp;API&nbsp;Reference</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to32__top">t</a></td><td class="diff_header" id="from32_1255">1255-</td><td nowrap="nowrap"><span class="diff_sub">Manual&nbsp;(XXX&nbsp;reference:&nbsp;../api/api.html)&nbsp;in&nbsp;the&nbsp;section&nbsp;"CObjects&nbsp;(XXX&nbsp;reference:</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to32__top">t</a></td><td class="diff_header" id="to32_1267">1267+</td><td nowrap="nowrap"><span class="diff_add">Manual&nbsp;in&nbsp;the&nbsp;section&nbsp;:ref:`cobjects`&nbsp;and&nbsp;in&nbsp;the&nbsp;implementation&nbsp;of&nbsp;CObjects&nbsp;(files</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from32_1256">1256-</td><td nowrap="nowrap"><span class="diff_sub">../api/cObjects.html)"&nbsp;and&nbsp;in&nbsp;the&nbsp;implementation&nbsp;of&nbsp;CObjects&nbsp;(files</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1257">1257</td><td nowrap="nowrap">:file:`Include/cobject.h`&nbsp;and&nbsp;:file:`Objects/cobject.c`&nbsp;in&nbsp;the&nbsp;Python&nbsp;source</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1258">1258</td><td nowrap="nowrap">code&nbsp;distribution).</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1259">1259</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1260">1260</td><td nowrap="nowrap">..&nbsp;rubric::&nbsp;Footnotes</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1261">1261</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1262">1262</td><td nowrap="nowrap">..&nbsp;[#]&nbsp;An&nbsp;interface&nbsp;for&nbsp;this&nbsp;function&nbsp;already&nbsp;exists&nbsp;in&nbsp;the&nbsp;standard&nbsp;module&nbsp;:mod:`os`</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1263">1263</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;---&nbsp;it&nbsp;was&nbsp;chosen&nbsp;as&nbsp;a&nbsp;simple&nbsp;and&nbsp;straightforward&nbsp;example.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from32_1264">1264</td><td nowrap="nowrap"></td></tr>        </tbody>
        </table>
    <table class="diff" summary="Legends">
        <tr> <th colspan="2"> Legends </th> </tr>
        <tr> <td> <table border="" summary="Colors">
                      <tr><th> Colors </th> </tr>
                      <tr><td class="diff_add">&nbsp;Added&nbsp;</td></tr>
                      <tr><td class="diff_chg">Changed</td> </tr>
                      <tr><td class="diff_sub">Deleted</td> </tr>
                  </table></td>
             <td> <table border="" summary="Links">
                      <tr><th colspan="2"> Links </th> </tr>
                      <tr><td>(f)irst change</td> </tr>
                      <tr><td>(n)ext change</td> </tr>
                      <tr><td>(t)op</td> </tr>
                  </table></td> </tr>
    </table>
</body>

</html>