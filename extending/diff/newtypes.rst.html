
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=ISO-8859-1" />
    <title></title>
    <style type="text/css">
        table.diff {font-family:Courier; border:medium;}
        .diff_header {background-color:#e0e0e0}
        td.diff_header {text-align:right}
        .diff_next {background-color:#c0c0c0}
        .diff_add {background-color:#aaffaa}
        .diff_chg {background-color:#ffff77}
        .diff_sub {background-color:#ffaaaa}
    </style>
</head>

<body>
    
        <table class="diff" id="difflib_chg_to44__top"
               cellspacing="0" cellpadding="0" rules="groups" >
            <colgroup></colgroup> <colgroup></colgroup> <colgroup></colgroup>
            <thead><tr><th class="diff_next"><br /></th><th colspan="2" class="diff_header">r262/extending/newtypes.rst =&gt; r266/extending/newtypes.rst</th></tr></thead>
            <tbody>
                <tr><td class="diff_next" id="difflib_chg_to44__0"></td><td class="diff_header" id="from44_247">247</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_248">248</td><td nowrap="nowrap">..&nbsp;literalinclude::&nbsp;../includes/noddy2.c</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_249">249</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_250">250</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_251">251</td><td nowrap="nowrap">This&nbsp;version&nbsp;of&nbsp;the&nbsp;module&nbsp;has&nbsp;a&nbsp;number&nbsp;of&nbsp;changes.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_252">252</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_253">253</td><td nowrap="nowrap">We've&nbsp;added&nbsp;an&nbsp;extra&nbsp;include::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_254">254</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to44__1">n</a></td><td class="diff_header" id="from44_255">255-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#include&nbsp;<span class="diff_chg">"</span>structmember.h<span class="diff_chg">"</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to44__1">n</a></td><td class="diff_header" id="to44_255">255+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#include&nbsp;<span class="diff_chg">&lt;</span>structmember.h<span class="diff_chg">&gt;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from44_256">256</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_257">257</td><td nowrap="nowrap">This&nbsp;include&nbsp;provides&nbsp;declarations&nbsp;that&nbsp;we&nbsp;use&nbsp;to&nbsp;handle&nbsp;attributes,&nbsp;as</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_258">258</td><td nowrap="nowrap">described&nbsp;a&nbsp;bit&nbsp;later.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_259">259</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_260">260</td><td nowrap="nowrap">The&nbsp;name&nbsp;of&nbsp;the&nbsp;:class:`Noddy`&nbsp;object&nbsp;structure&nbsp;has&nbsp;been&nbsp;shortened&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_261">261</td><td nowrap="nowrap">:class:`Noddy`.&nbsp;&nbsp;The&nbsp;type&nbsp;object&nbsp;name&nbsp;has&nbsp;been&nbsp;shortened&nbsp;to&nbsp;:class:`NoddyType`.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_262">262</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_263">263</td><td nowrap="nowrap">The&nbsp;&nbsp;:class:`Noddy`&nbsp;type&nbsp;now&nbsp;has&nbsp;three&nbsp;data&nbsp;attributes,&nbsp;*first*,&nbsp;*last*,&nbsp;and</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to44__1"></td><td class="diff_header" id="from44_441">441</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{NULL}&nbsp;&nbsp;/*&nbsp;Sentinel&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_442">442</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;};</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_443">443</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_444">444</td><td nowrap="nowrap">and&nbsp;put&nbsp;the&nbsp;definitions&nbsp;in&nbsp;the&nbsp;:attr:`tp_members`&nbsp;slot::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_445">445</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_446">446</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Noddy_members,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;tp_members&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_447">447</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_448">448</td><td nowrap="nowrap">Each&nbsp;member&nbsp;definition&nbsp;has&nbsp;a&nbsp;member&nbsp;name,&nbsp;type,&nbsp;offset,&nbsp;access&nbsp;flags&nbsp;and</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to44__2">n</a></td><td class="diff_header" id="from44_449">449-</td><td nowrap="nowrap">documentation&nbsp;string.&nbsp;See&nbsp;the&nbsp;<span class="diff_chg">"</span>Generic<span class="diff_chg">&nbsp;</span>Attribute<span class="diff_chg">&nbsp;</span>Management<span class="diff_chg">"</span>&nbsp;section&nbsp;below&nbsp;for</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to44__2">n</a></td><td class="diff_header" id="to44_449">449+</td><td nowrap="nowrap">documentation&nbsp;string.&nbsp;See&nbsp;the&nbsp;<span class="diff_chg">:ref:`</span>Generic<span class="diff_chg">-</span>Attribute<span class="diff_chg">-</span>Management<span class="diff_chg">`</span>&nbsp;section&nbsp;below&nbsp;for</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from44_450">450</td><td nowrap="nowrap">details.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_451">451</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_452">452</td><td nowrap="nowrap">A&nbsp;disadvantage&nbsp;of&nbsp;this&nbsp;approach&nbsp;is&nbsp;that&nbsp;it&nbsp;doesn't&nbsp;provide&nbsp;a&nbsp;way&nbsp;to&nbsp;restrict&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_453">453</td><td nowrap="nowrap">types&nbsp;of&nbsp;objects&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;to&nbsp;the&nbsp;Python&nbsp;attributes.&nbsp;&nbsp;We&nbsp;expect&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_454">454</td><td nowrap="nowrap">first&nbsp;and&nbsp;last&nbsp;names&nbsp;to&nbsp;be&nbsp;strings,&nbsp;but&nbsp;any&nbsp;Python&nbsp;objects&nbsp;can&nbsp;be&nbsp;assigned.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_455">455</td><td nowrap="nowrap">Further,&nbsp;the&nbsp;attributes&nbsp;can&nbsp;be&nbsp;deleted,&nbsp;setting&nbsp;the&nbsp;C&nbsp;pointers&nbsp;to&nbsp;*NULL*.&nbsp;&nbsp;Even</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_456">456</td><td nowrap="nowrap">though&nbsp;we&nbsp;can&nbsp;make&nbsp;sure&nbsp;the&nbsp;members&nbsp;are&nbsp;initialized&nbsp;to&nbsp;non-*NULL*&nbsp;values,&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_457">457</td><td nowrap="nowrap">members&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;*NULL*&nbsp;if&nbsp;the&nbsp;attributes&nbsp;are&nbsp;deleted.</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to44__2"></td><td class="diff_header" id="from44_814">814</td><td nowrap="nowrap">-----------------------</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_815">815</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_816">816</td><td nowrap="nowrap">It&nbsp;is&nbsp;possible&nbsp;to&nbsp;create&nbsp;new&nbsp;extension&nbsp;types&nbsp;that&nbsp;are&nbsp;derived&nbsp;from&nbsp;existing</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_817">817</td><td nowrap="nowrap">types.&nbsp;It&nbsp;is&nbsp;easiest&nbsp;to&nbsp;inherit&nbsp;from&nbsp;the&nbsp;built&nbsp;in&nbsp;types,&nbsp;since&nbsp;an&nbsp;extension&nbsp;can</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_818">818</td><td nowrap="nowrap">easily&nbsp;use&nbsp;the&nbsp;:class:`PyTypeObject`&nbsp;it&nbsp;needs.&nbsp;It&nbsp;can&nbsp;be&nbsp;difficult&nbsp;to&nbsp;share</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_819">819</td><td nowrap="nowrap">these&nbsp;:class:`PyTypeObject`&nbsp;structures&nbsp;between&nbsp;extension&nbsp;modules.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_820">820</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_821">821</td><td nowrap="nowrap">In&nbsp;this&nbsp;example&nbsp;we&nbsp;will&nbsp;create&nbsp;a&nbsp;:class:`Shoddy`&nbsp;type&nbsp;that&nbsp;inherits&nbsp;from&nbsp;the</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to44__3">n</a></td><td class="diff_header" id="from44_822">822-</td><td nowrap="nowrap">builtin&nbsp;:class:`list`&nbsp;type.&nbsp;The&nbsp;new&nbsp;type&nbsp;will&nbsp;be&nbsp;completely&nbsp;compatible&nbsp;with</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to44__3">n</a></td><td class="diff_header" id="to44_822">822+</td><td nowrap="nowrap">built<span class="diff_add">-</span>in&nbsp;:class:`list`&nbsp;type.&nbsp;The&nbsp;new&nbsp;type&nbsp;will&nbsp;be&nbsp;completely&nbsp;compatible&nbsp;with</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from44_823">823</td><td nowrap="nowrap">regular&nbsp;lists,&nbsp;but&nbsp;will&nbsp;have&nbsp;an&nbsp;additional&nbsp;:meth:`increment`&nbsp;method&nbsp;that</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_824">824</td><td nowrap="nowrap">increases&nbsp;an&nbsp;internal&nbsp;counter.&nbsp;::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_825">825</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_826">826</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;import&nbsp;shoddy</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_827">827</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;s&nbsp;=&nbsp;shoddy.Shoddy(range(3))</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_828">828</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;s.extend(s)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_829">829</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;print&nbsp;len(s)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_830">830</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;6</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to44__3"></td><td class="diff_header" id="from44_1123">1123</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1124">1124</td><td nowrap="nowrap">If&nbsp;accessing&nbsp;attributes&nbsp;of&nbsp;an&nbsp;object&nbsp;is&nbsp;always&nbsp;a&nbsp;simple&nbsp;operation&nbsp;(this&nbsp;will&nbsp;be</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1125">1125</td><td nowrap="nowrap">explained&nbsp;shortly),&nbsp;there&nbsp;are&nbsp;generic&nbsp;implementations&nbsp;which&nbsp;can&nbsp;be&nbsp;used&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1126">1126</td><td nowrap="nowrap">provide&nbsp;the&nbsp;:ctype:`PyObject\*`&nbsp;version&nbsp;of&nbsp;the&nbsp;attribute&nbsp;management&nbsp;functions.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1127">1127</td><td nowrap="nowrap">The&nbsp;actual&nbsp;need&nbsp;for&nbsp;type-specific&nbsp;attribute&nbsp;handlers&nbsp;almost&nbsp;completely</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1128">1128</td><td nowrap="nowrap">disappeared&nbsp;starting&nbsp;with&nbsp;Python&nbsp;2.2,&nbsp;though&nbsp;there&nbsp;are&nbsp;many&nbsp;examples&nbsp;which&nbsp;have</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1129">1129</td><td nowrap="nowrap">not&nbsp;been&nbsp;updated&nbsp;to&nbsp;use&nbsp;some&nbsp;of&nbsp;the&nbsp;new&nbsp;generic&nbsp;mechanism&nbsp;that&nbsp;is&nbsp;available.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1130">1130</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to44__top">t</a></td><td class="diff_header" id="to44_1131">1131+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to44_1132">1132+</td><td nowrap="nowrap"><span class="diff_add">..&nbsp;_generic-attribute-management:</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1131">1131</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1132">1132</td><td nowrap="nowrap">Generic&nbsp;Attribute&nbsp;Management</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1133">1133</td><td nowrap="nowrap">^^^^^^^^^^^^^^^^^^^^^^^^^^^^</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1134">1134</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1135">1135</td><td nowrap="nowrap">..&nbsp;versionadded::&nbsp;2.2</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1136">1136</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1137">1137</td><td nowrap="nowrap">Most&nbsp;extension&nbsp;types&nbsp;only&nbsp;use&nbsp;*simple*&nbsp;attributes.&nbsp;&nbsp;So,&nbsp;what&nbsp;makes&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from44_1138">1138</td><td nowrap="nowrap">attributes&nbsp;simple?&nbsp;&nbsp;There&nbsp;are&nbsp;only&nbsp;a&nbsp;couple&nbsp;of&nbsp;conditions&nbsp;that&nbsp;must&nbsp;be&nbsp;met:</td></tr>        </tbody>
        </table>
    <table class="diff" summary="Legends">
        <tr> <th colspan="2"> Legends </th> </tr>
        <tr> <td> <table border="" summary="Colors">
                      <tr><th> Colors </th> </tr>
                      <tr><td class="diff_add">&nbsp;Added&nbsp;</td></tr>
                      <tr><td class="diff_chg">Changed</td> </tr>
                      <tr><td class="diff_sub">Deleted</td> </tr>
                  </table></td>
             <td> <table border="" summary="Links">
                      <tr><th colspan="2"> Links </th> </tr>
                      <tr><td>(f)irst change</td> </tr>
                      <tr><td>(n)ext change</td> </tr>
                      <tr><td>(t)op</td> </tr>
                  </table></td> </tr>
    </table>
</body>

</html>