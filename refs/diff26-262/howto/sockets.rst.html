
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=ISO-8859-1" />
    <title></title>
    <style type="text/css">
        table.diff {font-family:Courier; border:medium;}
        .diff_header {background-color:#e0e0e0}
        td.diff_header {text-align:right}
        .diff_next {background-color:#c0c0c0}
        .diff_add {background-color:#aaffaa}
        .diff_chg {background-color:#ffff77}
        .diff_sub {background-color:#ffaaaa}
    </style>
</head>

<body>
    
        <table class="diff" id="difflib_chg_to41__top"
               cellspacing="0" cellpadding="0" rules="groups" >
            <colgroup></colgroup> <colgroup></colgroup> <colgroup></colgroup>
            <thead><tr><th class="diff_next"><br /></th><th colspan="2" class="diff_header">rest26/howto/sockets.rst =&gt; rest262/howto/sockets.rst</th></tr></thead>
            <tbody>
                <tr><td class="diff_next" id="difflib_chg_to41__0"><a href="#difflib_chg_to41__0">f</a></td><td class="diff_header" id="from41_1">1</td><td nowrap="nowrap">****************************</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to41__1">n</a></td><td class="diff_header" id="from41_2">2-</td><td nowrap="nowrap">&nbsp;&nbsp;Socket&nbsp;Programming&nbsp;HOWTO<span class="diff_sub">&nbsp;&nbsp;</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to41__1">n</a></td><td class="diff_header" id="to41_2">2+</td><td nowrap="nowrap">&nbsp;&nbsp;Socket&nbsp;Programming&nbsp;HOWTO</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from41_3">3</td><td nowrap="nowrap">****************************</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_4">4</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_5">5</td><td nowrap="nowrap">:Author:&nbsp;Gordon&nbsp;McMillan</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_6">6</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_7">7</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_8">8</td><td nowrap="nowrap">..&nbsp;topic::&nbsp;Abstract</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_9">9</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_10">10</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Sockets&nbsp;are&nbsp;used&nbsp;nearly&nbsp;everywhere,&nbsp;but&nbsp;are&nbsp;one&nbsp;of&nbsp;the&nbsp;most&nbsp;severely</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to41__1"></td><td class="diff_header" id="from41_58">58</td><td nowrap="nowrap">=================</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_59">59</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_60">60</td><td nowrap="nowrap">Roughly&nbsp;speaking,&nbsp;when&nbsp;you&nbsp;clicked&nbsp;on&nbsp;the&nbsp;link&nbsp;that&nbsp;brought&nbsp;you&nbsp;to&nbsp;this&nbsp;page,</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_61">61</td><td nowrap="nowrap">your&nbsp;browser&nbsp;did&nbsp;something&nbsp;like&nbsp;the&nbsp;following::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_62">62</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_63">63</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#create&nbsp;an&nbsp;INET,&nbsp;STREAMing&nbsp;socket</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_64">64</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;s&nbsp;=&nbsp;socket.socket(</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_65">65</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.AF_INET,&nbsp;socket.SOCK_STREAM)</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to41__2">n</a></td><td class="diff_header" id="from41_66">66-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#now&nbsp;connect&nbsp;to&nbsp;the&nbsp;web&nbsp;server&nbsp;on&nbsp;port&nbsp;80<span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to41__2">n</a></td><td class="diff_header" id="to41_66">66+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#now&nbsp;connect&nbsp;to&nbsp;the&nbsp;web&nbsp;server&nbsp;on&nbsp;port&nbsp;80</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from41_67">67</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#&nbsp;-&nbsp;the&nbsp;normal&nbsp;http&nbsp;port</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_68">68</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;s.connect(("www.mcmillan-inc.com",&nbsp;80))</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_69">69</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_70">70</td><td nowrap="nowrap">When&nbsp;the&nbsp;``connect``&nbsp;completes,&nbsp;the&nbsp;socket&nbsp;``s``&nbsp;can&nbsp;now&nbsp;be&nbsp;used&nbsp;to&nbsp;send&nbsp;in&nbsp;a</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_71">71</td><td nowrap="nowrap">request&nbsp;for&nbsp;the&nbsp;text&nbsp;of&nbsp;this&nbsp;page.&nbsp;The&nbsp;same&nbsp;socket&nbsp;will&nbsp;read&nbsp;the&nbsp;reply,&nbsp;and&nbsp;then</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_72">72</td><td nowrap="nowrap">be&nbsp;destroyed.&nbsp;That's&nbsp;right&nbsp;-&nbsp;destroyed.&nbsp;Client&nbsp;sockets&nbsp;are&nbsp;normally&nbsp;only&nbsp;used</td></tr>            <tr><td class="diff_next" id="difflib_chg_to41__2"></td><td class="diff_header" id="from41_73">73</td><td nowrap="nowrap">for&nbsp;one&nbsp;exchange&nbsp;(or&nbsp;a&nbsp;small&nbsp;set&nbsp;of&nbsp;sequential&nbsp;exchanges).</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_74">74</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_75">75</td><td nowrap="nowrap">What&nbsp;happens&nbsp;in&nbsp;the&nbsp;web&nbsp;server&nbsp;is&nbsp;a&nbsp;bit&nbsp;more&nbsp;complex.&nbsp;First,&nbsp;the&nbsp;web&nbsp;server</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_76">76</td><td nowrap="nowrap">creates&nbsp;a&nbsp;"server&nbsp;socket".&nbsp;::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_77">77</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_78">78</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#create&nbsp;an&nbsp;INET,&nbsp;STREAMing&nbsp;socket</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_79">79</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;serversocket&nbsp;=&nbsp;socket.socket(</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_80">80</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.AF_INET,&nbsp;socket.SOCK_STREAM)</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to41__3">n</a></td><td class="diff_header" id="from41_81">81-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#bind&nbsp;the&nbsp;socket&nbsp;to&nbsp;a&nbsp;public&nbsp;host,<span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to41__3">n</a></td><td class="diff_header" id="to41_81">81+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#bind&nbsp;the&nbsp;socket&nbsp;to&nbsp;a&nbsp;public&nbsp;host,</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from41_82">82</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#&nbsp;and&nbsp;a&nbsp;well-known&nbsp;port</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_83">83</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;serversocket.bind((socket.gethostname(),&nbsp;80))</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_84">84</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#become&nbsp;a&nbsp;server&nbsp;socket</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_85">85</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;serversocket.listen(5)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_86">86</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_87">87</td><td nowrap="nowrap">A&nbsp;couple&nbsp;things&nbsp;to&nbsp;notice:&nbsp;we&nbsp;used&nbsp;``socket.gethostname()``&nbsp;so&nbsp;that&nbsp;the&nbsp;socket</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_88">88</td><td nowrap="nowrap">would&nbsp;be&nbsp;visible&nbsp;to&nbsp;the&nbsp;outside&nbsp;world.&nbsp;If&nbsp;we&nbsp;had&nbsp;used&nbsp;``s.bind(('',&nbsp;80))``&nbsp;or</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_89">89</td><td nowrap="nowrap">``s.bind(('localhost',&nbsp;80))``&nbsp;or&nbsp;``s.bind(('127.0.0.1',&nbsp;80))``&nbsp;we&nbsp;would&nbsp;still</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to41__3"></td><td class="diff_header" id="from41_180">180</td><td nowrap="nowrap">be&nbsp;delimited*&nbsp;(shrug),&nbsp;*or&nbsp;indicate&nbsp;how&nbsp;long&nbsp;they&nbsp;are*&nbsp;(much&nbsp;better),&nbsp;*or&nbsp;end&nbsp;by</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_181">181</td><td nowrap="nowrap">shutting&nbsp;down&nbsp;the&nbsp;connection*.&nbsp;The&nbsp;choice&nbsp;is&nbsp;entirely&nbsp;yours,&nbsp;(but&nbsp;some&nbsp;ways&nbsp;are</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_182">182</td><td nowrap="nowrap">righter&nbsp;than&nbsp;others).</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_183">183</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_184">184</td><td nowrap="nowrap">Assuming&nbsp;you&nbsp;don't&nbsp;want&nbsp;to&nbsp;end&nbsp;the&nbsp;connection,&nbsp;the&nbsp;simplest&nbsp;solution&nbsp;is&nbsp;a&nbsp;fixed</td></tr>            <tr><td class="diff_next" id="difflib_chg_to41__4"></td><td class="diff_header" id="from41_185">185</td><td nowrap="nowrap">length&nbsp;message::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_186">186</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_187">187</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;class&nbsp;mysocket:</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to41__4">n</a></td><td class="diff_header" id="from41_188">188-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'''demonstration&nbsp;class&nbsp;only<span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to41__4">n</a></td><td class="diff_header" id="to41_188">188+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'''demonstration&nbsp;class&nbsp;only</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from41_189">189</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;coded&nbsp;for&nbsp;clarity,&nbsp;not&nbsp;efficiency</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_190">190</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'''</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_191">191</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next" id="difflib_chg_to41__5"></td><td class="diff_header" id="from41_192">192</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;sock=None):</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to41__5">n</a></td><td class="diff_header" id="from41_193">193-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sock&nbsp;is&nbsp;None:</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to41__5">n</a></td><td class="diff_header" id="to41_193">193+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sock&nbsp;is&nbsp;None:</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_194">194-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;self.sock&nbsp;=&nbsp;socket.socket(</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_194">194+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;self.sock&nbsp;=&nbsp;socket.socket(</td></tr>
<tr><td class="diff_next" id="difflib_chg_to41__6"></td><td class="diff_header" id="from41_195">195-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.AF_INET,&nbsp;socket.SOCK_STREAM)</span></td></tr>
<tr><td class="diff_next" id="difflib_chg_to41__6"></td><td class="diff_header" id="to41_195">195+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.AF_INET,&nbsp;socket.SOCK_STREAM)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_196">196-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_196">196+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_197">197-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;self.sock&nbsp;=&nbsp;sock</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_197">197+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;self.sock&nbsp;=&nbsp;sock</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from41_198">198</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_199">199</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;connect(self,&nbsp;host,&nbsp;port):</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to41__6">n</a></td><td class="diff_header" id="from41_200">200-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>self.sock.connect((host,&nbsp;port))</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to41__6">n</a></td><td class="diff_header" id="to41_200">200+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>self.sock.connect((host,&nbsp;port))</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from41_201">201</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_202">202</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;mysend(self,&nbsp;msg):</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to41__7">n</a></td><td class="diff_header" id="from41_203">203-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;totalsent&nbsp;=&nbsp;0</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to41__7">n</a></td><td class="diff_header" id="to41_203">203+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;totalsent&nbsp;=&nbsp;0</span></td></tr>
<tr><td class="diff_next" id="difflib_chg_to41__7"></td><td class="diff_header" id="from41_204">204-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>while&nbsp;totalsent&nbsp;&lt;&nbsp;MSGLEN:</td></tr>
<tr><td class="diff_next" id="difflib_chg_to41__7"></td><td class="diff_header" id="to41_204">204+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>while&nbsp;totalsent&nbsp;&lt;&nbsp;MSGLEN:</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_205">205-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;sent&nbsp;=&nbsp;self.sock.send(msg[totalsent:])</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_205">205+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;sent&nbsp;=&nbsp;self.sock.send(msg[totalsent:])</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_206">206-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sent&nbsp;==&nbsp;0:</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_206">206+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sent&nbsp;==&nbsp;0:</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_207">207-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;RuntimeError,&nbsp;\</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_207">207+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;RuntimeError,&nbsp;\</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_208">208-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"socket&nbsp;connection&nbsp;broken"</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_208">208+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"socket&nbsp;connection&nbsp;broken"</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_209">209-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;totalsent&nbsp;=&nbsp;totalsent&nbsp;+&nbsp;sent</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_209">209+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;totalsent&nbsp;=&nbsp;totalsent&nbsp;+&nbsp;sent</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from41_210">210</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_211">211</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;myreceive(self):</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to41__8">n</a></td><td class="diff_header" id="from41_212">212-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg&nbsp;=&nbsp;''</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to41__8">n</a></td><td class="diff_header" id="to41_212">212+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg&nbsp;=&nbsp;''</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_213">213-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>while&nbsp;len(msg)&nbsp;&lt;&nbsp;MSGLEN:</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_213">213+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>while&nbsp;len(msg)&nbsp;&lt;&nbsp;MSGLEN:</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_214">214-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;chunk&nbsp;=&nbsp;self.sock.recv(MSGLEN-len(msg))</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_214">214+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;chunk&nbsp;=&nbsp;self.sock.recv(MSGLEN-len(msg))</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_215">215-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;chunk&nbsp;==&nbsp;'':</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_215">215+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;chunk&nbsp;==&nbsp;'':</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_216">216-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;RuntimeError,&nbsp;\</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_216">216+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;RuntimeError,&nbsp;\</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_217">217-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"socket&nbsp;connection&nbsp;broken"</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_217">217+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"socket&nbsp;connection&nbsp;broken"</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_218">218-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;msg&nbsp;=&nbsp;msg&nbsp;+&nbsp;chunk</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_218">218+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;msg&nbsp;=&nbsp;msg&nbsp;+&nbsp;chunk</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_219">219-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;msg</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_219">219+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;msg</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from41_220">220</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_221">221</td><td nowrap="nowrap">The&nbsp;sending&nbsp;code&nbsp;here&nbsp;is&nbsp;usable&nbsp;for&nbsp;almost&nbsp;any&nbsp;messaging&nbsp;scheme&nbsp;-&nbsp;in&nbsp;Python&nbsp;you</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_222">222</td><td nowrap="nowrap">send&nbsp;strings,&nbsp;and&nbsp;you&nbsp;can&nbsp;use&nbsp;``len()``&nbsp;to&nbsp;determine&nbsp;its&nbsp;length&nbsp;(even&nbsp;if&nbsp;it&nbsp;has</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_223">223</td><td nowrap="nowrap">embedded&nbsp;``\0``&nbsp;characters).&nbsp;It's&nbsp;mostly&nbsp;the&nbsp;receiving&nbsp;code&nbsp;that&nbsp;gets&nbsp;more</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_224">224</td><td nowrap="nowrap">complex.&nbsp;(And&nbsp;in&nbsp;C,&nbsp;it's&nbsp;not&nbsp;much&nbsp;worse,&nbsp;except&nbsp;you&nbsp;can't&nbsp;use&nbsp;``strlen``&nbsp;if&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_225">225</td><td nowrap="nowrap">message&nbsp;has&nbsp;embedded&nbsp;``\0``\&nbsp;s.)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_226">226</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_227">227</td><td nowrap="nowrap">The&nbsp;easiest&nbsp;enhancement&nbsp;is&nbsp;to&nbsp;make&nbsp;the&nbsp;first&nbsp;character&nbsp;of&nbsp;the&nbsp;message&nbsp;an</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to41__8"></td><td class="diff_header" id="from41_338">338</td><td nowrap="nowrap">Use&nbsp;``select``.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_339">339</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_340">340</td><td nowrap="nowrap">In&nbsp;C,&nbsp;coding&nbsp;``select``&nbsp;is&nbsp;fairly&nbsp;complex.&nbsp;In&nbsp;Python,&nbsp;it's&nbsp;a&nbsp;piece&nbsp;of&nbsp;cake,&nbsp;but</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_341">341</td><td nowrap="nowrap">it's&nbsp;close&nbsp;enough&nbsp;to&nbsp;the&nbsp;C&nbsp;version&nbsp;that&nbsp;if&nbsp;you&nbsp;understand&nbsp;``select``&nbsp;in&nbsp;Python,</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_342">342</td><td nowrap="nowrap">you'll&nbsp;have&nbsp;little&nbsp;trouble&nbsp;with&nbsp;it&nbsp;in&nbsp;C.&nbsp;::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_343">343</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_344">344</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;ready_to_read,&nbsp;ready_to_write,&nbsp;in_error&nbsp;=&nbsp;\</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_345">345</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select.select(</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to41__top">t</a></td><td class="diff_header" id="from41_346">346-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;potential_readers,<span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to41__top">t</a></td><td class="diff_header" id="to41_346">346+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;potential_readers,</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_347">347-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;potential_writers,<span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_347">347+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;potential_writers,</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from41_348">348-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;potential_errs,<span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to41_348">348+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;potential_errs,</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from41_349">349</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_350">350</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_351">351</td><td nowrap="nowrap">You&nbsp;pass&nbsp;``select``&nbsp;three&nbsp;lists:&nbsp;the&nbsp;first&nbsp;contains&nbsp;all&nbsp;sockets&nbsp;that&nbsp;you&nbsp;might</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_352">352</td><td nowrap="nowrap">want&nbsp;to&nbsp;try&nbsp;reading;&nbsp;the&nbsp;second&nbsp;all&nbsp;the&nbsp;sockets&nbsp;you&nbsp;might&nbsp;want&nbsp;to&nbsp;try&nbsp;writing</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_353">353</td><td nowrap="nowrap">to,&nbsp;and&nbsp;the&nbsp;last&nbsp;(normally&nbsp;left&nbsp;empty)&nbsp;those&nbsp;that&nbsp;you&nbsp;want&nbsp;to&nbsp;check&nbsp;for&nbsp;errors.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_354">354</td><td nowrap="nowrap">You&nbsp;should&nbsp;note&nbsp;that&nbsp;a&nbsp;socket&nbsp;can&nbsp;go&nbsp;into&nbsp;more&nbsp;than&nbsp;one&nbsp;list.&nbsp;The&nbsp;``select``</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_355">355</td><td nowrap="nowrap">call&nbsp;is&nbsp;blocking,&nbsp;but&nbsp;you&nbsp;can&nbsp;give&nbsp;it&nbsp;a&nbsp;timeout.&nbsp;This&nbsp;is&nbsp;generally&nbsp;a&nbsp;sensible</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from41_356">356</td><td nowrap="nowrap">thing&nbsp;to&nbsp;do&nbsp;-&nbsp;give&nbsp;it&nbsp;a&nbsp;nice&nbsp;long&nbsp;timeout&nbsp;(say&nbsp;a&nbsp;minute)&nbsp;unless&nbsp;you&nbsp;have&nbsp;good</td></tr>        </tbody>
        </table>
    <table class="diff" summary="Legends">
        <tr> <th colspan="2"> Legends </th> </tr>
        <tr> <td> <table border="" summary="Colors">
                      <tr><th> Colors </th> </tr>
                      <tr><td class="diff_add">&nbsp;Added&nbsp;</td></tr>
                      <tr><td class="diff_chg">Changed</td> </tr>
                      <tr><td class="diff_sub">Deleted</td> </tr>
                  </table></td>
             <td> <table border="" summary="Links">
                      <tr><th colspan="2"> Links </th> </tr>
                      <tr><td>(f)irst change</td> </tr>
                      <tr><td>(n)ext change</td> </tr>
                      <tr><td>(t)op</td> </tr>
                  </table></td> </tr>
    </table>
</body>

</html>