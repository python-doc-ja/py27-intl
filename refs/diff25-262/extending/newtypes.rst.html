
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=ISO-8859-1" />
    <title></title>
    <style type="text/css">
        table.diff {font-family:Courier; border:medium;}
        .diff_header {background-color:#e0e0e0}
        td.diff_header {text-align:right}
        .diff_next {background-color:#c0c0c0}
        .diff_add {background-color:#aaffaa}
        .diff_chg {background-color:#ffff77}
        .diff_sub {background-color:#ffaaaa}
    </style>
</head>

<body>
    
        <table class="diff" id="difflib_chg_to34__top"
               cellspacing="0" cellpadding="0" rules="groups" >
            <colgroup></colgroup> <colgroup></colgroup> <colgroup></colgroup>
            <thead><tr><th class="diff_next"><br /></th><th colspan="2" class="diff_header">rest25/extending/newtypes.rst =&gt; rest262/extending/newtypes.rst</th></tr></thead>
            <tbody>
                <tr><td class="diff_next" id="difflib_chg_to34__0"></td><td class="diff_header" id="from34_42">42</td><td nowrap="nowrap">them&nbsp;from&nbsp;things&nbsp;like&nbsp;``[].append``&nbsp;(which&nbsp;we&nbsp;call&nbsp;"object&nbsp;methods").</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_43">43</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_44">44</td><td nowrap="nowrap">So,&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;define&nbsp;a&nbsp;new&nbsp;object&nbsp;type,&nbsp;you&nbsp;need&nbsp;to&nbsp;create&nbsp;a&nbsp;new&nbsp;type</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_45">45</td><td nowrap="nowrap">object.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_46">46</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_47">47</td><td nowrap="nowrap">This&nbsp;sort&nbsp;of&nbsp;thing&nbsp;can&nbsp;only&nbsp;be&nbsp;explained&nbsp;by&nbsp;example,&nbsp;so&nbsp;here's&nbsp;a&nbsp;minimal,&nbsp;but</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_48">48</td><td nowrap="nowrap">complete,&nbsp;module&nbsp;that&nbsp;defines&nbsp;a&nbsp;new&nbsp;type:</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_49">49</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__1">n</a></td><td class="diff_header" id="from34_50">50-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_51">51-</td><td nowrap="nowrap">..&nbsp;include::&nbsp;../includes/noddy.c</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_50">50+</td><td nowrap="nowrap">..&nbsp;<span class="diff_add">literal</span>include::&nbsp;../includes/noddy.c</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_52">52-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;:literal:</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_51">51+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_53">53</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_54">54</td><td nowrap="nowrap">Now&nbsp;that's&nbsp;quite&nbsp;a&nbsp;bit&nbsp;to&nbsp;take&nbsp;in&nbsp;at&nbsp;once,&nbsp;but&nbsp;hopefully&nbsp;bits&nbsp;will&nbsp;seem&nbsp;familiar</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_55">55</td><td nowrap="nowrap">from&nbsp;the&nbsp;last&nbsp;chapter.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_56">56</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_57">57</td><td nowrap="nowrap">The&nbsp;first&nbsp;bit&nbsp;that&nbsp;will&nbsp;be&nbsp;new&nbsp;is::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_58">58</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_59">59</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;typedef&nbsp;struct&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_60">60</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PyObject_HEAD</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__1"></td><td class="diff_header" id="from34_228">228</td><td nowrap="nowrap">in&nbsp;a&nbsp;file&nbsp;called&nbsp;:file:`setup.py`;&nbsp;then&nbsp;typing&nbsp;::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_229">229</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_230">230</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;$&nbsp;python&nbsp;setup.py&nbsp;build</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_231">231</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_232">232</td><td nowrap="nowrap">at&nbsp;a&nbsp;shell&nbsp;should&nbsp;produce&nbsp;a&nbsp;file&nbsp;:file:`noddy.so`&nbsp;in&nbsp;a&nbsp;subdirectory;&nbsp;move&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_233">233</td><td nowrap="nowrap">that&nbsp;directory&nbsp;and&nbsp;fire&nbsp;up&nbsp;Python&nbsp;---&nbsp;you&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;``import&nbsp;noddy``&nbsp;and</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_234">234</td><td nowrap="nowrap">play&nbsp;around&nbsp;with&nbsp;Noddy&nbsp;objects.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_235">235</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__2">n</a></td><td class="diff_header" id="from34_236">236-</td><td nowrap="nowrap"><span class="diff_sub">..&nbsp;%&nbsp;$&nbsp;&lt;--&nbsp;bow&nbsp;to&nbsp;font-lock&nbsp;&nbsp;;-(</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_237">237-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_238">238</td><td nowrap="nowrap">That&nbsp;wasn't&nbsp;so&nbsp;hard,&nbsp;was&nbsp;it?</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_239">239</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_240">240</td><td nowrap="nowrap">Of&nbsp;course,&nbsp;the&nbsp;current&nbsp;Noddy&nbsp;type&nbsp;is&nbsp;pretty&nbsp;uninteresting.&nbsp;It&nbsp;has&nbsp;no&nbsp;data&nbsp;and</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_241">241</td><td nowrap="nowrap">doesn't&nbsp;do&nbsp;anything.&nbsp;It&nbsp;can't&nbsp;even&nbsp;be&nbsp;subclassed.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_242">242</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next" id="difflib_chg_to34__2"></td><td class="diff_header" id="from34_243">243</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_244">244</td><td nowrap="nowrap">Adding&nbsp;data&nbsp;and&nbsp;methods&nbsp;to&nbsp;the&nbsp;Basic&nbsp;example</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_245">245</td><td nowrap="nowrap">--------------------------------------------</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_246">246</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_247">247</td><td nowrap="nowrap">Let's&nbsp;expend&nbsp;the&nbsp;basic&nbsp;example&nbsp;to&nbsp;add&nbsp;some&nbsp;data&nbsp;and&nbsp;methods.&nbsp;&nbsp;Let's&nbsp;also&nbsp;make</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_248">248</td><td nowrap="nowrap">the&nbsp;type&nbsp;usable&nbsp;as&nbsp;a&nbsp;base&nbsp;class.&nbsp;We'll&nbsp;create&nbsp;a&nbsp;new&nbsp;module,&nbsp;:mod:`noddy2`&nbsp;that</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_249">249</td><td nowrap="nowrap">adds&nbsp;these&nbsp;capabilities:</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_250">250</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__3">n</a></td><td class="diff_header" id="from34_251">251-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_252">252-</td><td nowrap="nowrap">..&nbsp;include::&nbsp;../includes/noddy2.c</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_248">248+</td><td nowrap="nowrap">..&nbsp;<span class="diff_add">literal</span>include::&nbsp;../includes/noddy2.c</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_253">253-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;:literal:</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_249">249+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_254">254</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_255">255</td><td nowrap="nowrap">This&nbsp;version&nbsp;of&nbsp;the&nbsp;module&nbsp;has&nbsp;a&nbsp;number&nbsp;of&nbsp;changes.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_256">256</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_257">257</td><td nowrap="nowrap">We've&nbsp;added&nbsp;an&nbsp;extra&nbsp;include::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_258">258</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_259">259</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;#include&nbsp;"structmember.h"</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_260">260</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_261">261</td><td nowrap="nowrap">This&nbsp;include&nbsp;provides&nbsp;declarations&nbsp;that&nbsp;we&nbsp;use&nbsp;to&nbsp;handle&nbsp;attributes,&nbsp;as</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__3"></td><td class="diff_header" id="from34_427">427</td><td nowrap="nowrap">*&nbsp;when&nbsp;we&nbsp;absolutely&nbsp;know&nbsp;that&nbsp;the&nbsp;reference&nbsp;count&nbsp;is&nbsp;greater&nbsp;than&nbsp;1</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_428">428</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_429">429</td><td nowrap="nowrap">*&nbsp;when&nbsp;we&nbsp;know&nbsp;that&nbsp;deallocation&nbsp;of&nbsp;the&nbsp;object&nbsp;[#]_&nbsp;will&nbsp;not&nbsp;cause&nbsp;any&nbsp;calls</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_430">430</td><td nowrap="nowrap">&nbsp;&nbsp;back&nbsp;into&nbsp;our&nbsp;type's&nbsp;code</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_431">431</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_432">432</td><td nowrap="nowrap">*&nbsp;when&nbsp;decrementing&nbsp;a&nbsp;reference&nbsp;count&nbsp;in&nbsp;a&nbsp;:attr:`tp_dealloc`&nbsp;handler&nbsp;when</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_433">433</td><td nowrap="nowrap">&nbsp;&nbsp;garbage-collections&nbsp;is&nbsp;not&nbsp;supported&nbsp;[#]_</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_434">434</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__4">n</a></td><td class="diff_header" id="from34_435">435-</td><td nowrap="nowrap"><span class="diff_sub">*</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_436">436-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_437">437-</td><td nowrap="nowrap">We&nbsp;want&nbsp;to<span class="diff_sub">&nbsp;want&nbsp;to</span>&nbsp;expose&nbsp;our&nbsp;instance&nbsp;variables&nbsp;as&nbsp;attributes.&nbsp;There&nbsp;are&nbsp;a</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_431">431+</td><td nowrap="nowrap">We&nbsp;want&nbsp;to&nbsp;expose&nbsp;our&nbsp;instance&nbsp;variables&nbsp;as&nbsp;attributes.&nbsp;There&nbsp;are&nbsp;a</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_438">438</td><td nowrap="nowrap">number&nbsp;of&nbsp;ways&nbsp;to&nbsp;do&nbsp;that.&nbsp;The&nbsp;simplest&nbsp;way&nbsp;is&nbsp;to&nbsp;define&nbsp;member&nbsp;definitions::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_439">439</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_440">440</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;static&nbsp;PyMemberDef&nbsp;Noddy_members[]&nbsp;=&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_441">441</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"first",&nbsp;T_OBJECT_EX,&nbsp;offsetof(Noddy,&nbsp;first),&nbsp;0,</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_442">442</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"first&nbsp;name"},</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_443">443</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"last",&nbsp;T_OBJECT_EX,&nbsp;offsetof(Noddy,&nbsp;last),&nbsp;0,</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_444">444</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"last&nbsp;name"},</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_445">445</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"number",&nbsp;T_INT,&nbsp;offsetof(Noddy,&nbsp;number),&nbsp;0,</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__4"></td><td class="diff_header" id="from34_554">554</td><td nowrap="nowrap">--------------------------------------------</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_555">555</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_556">556</td><td nowrap="nowrap">In&nbsp;this&nbsp;section,&nbsp;we'll&nbsp;provide&nbsp;finer&nbsp;control&nbsp;over&nbsp;how&nbsp;the&nbsp;:attr:`first`&nbsp;and</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_557">557</td><td nowrap="nowrap">:attr:`last`&nbsp;attributes&nbsp;are&nbsp;set&nbsp;in&nbsp;the&nbsp;:class:`Noddy`&nbsp;example.&nbsp;In&nbsp;the&nbsp;previous</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_558">558</td><td nowrap="nowrap">version&nbsp;of&nbsp;our&nbsp;module,&nbsp;the&nbsp;instance&nbsp;variables&nbsp;:attr:`first`&nbsp;and&nbsp;:attr:`last`</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_559">559</td><td nowrap="nowrap">could&nbsp;be&nbsp;set&nbsp;to&nbsp;non-string&nbsp;values&nbsp;or&nbsp;even&nbsp;deleted.&nbsp;We&nbsp;want&nbsp;to&nbsp;make&nbsp;sure&nbsp;that</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_560">560</td><td nowrap="nowrap">these&nbsp;attributes&nbsp;always&nbsp;contain&nbsp;strings.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_561">561</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__5">n</a></td><td class="diff_header" id="from34_562">562-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_563">563-</td><td nowrap="nowrap">..&nbsp;include::&nbsp;../includes/noddy3.c</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_556">556+</td><td nowrap="nowrap">..&nbsp;<span class="diff_add">literal</span>include::&nbsp;../includes/noddy3.c</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_564">564-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;:literal:</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_557">557+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_565">565</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_566">566</td><td nowrap="nowrap">To&nbsp;provide&nbsp;greater&nbsp;control,&nbsp;over&nbsp;the&nbsp;:attr:`first`&nbsp;and&nbsp;:attr:`last`&nbsp;attributes,</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_567">567</td><td nowrap="nowrap">we'll&nbsp;use&nbsp;custom&nbsp;getter&nbsp;and&nbsp;setter&nbsp;functions.&nbsp;&nbsp;Here&nbsp;are&nbsp;the&nbsp;functions&nbsp;for</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_568">568</td><td nowrap="nowrap">getting&nbsp;and&nbsp;setting&nbsp;the&nbsp;:attr:`first`&nbsp;attribute::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_569">569</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_570">570</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Noddy_getfirst(Noddy&nbsp;*self,&nbsp;void&nbsp;*closure)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_571">571</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_572">572</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Py_INCREF(self-&gt;first);</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__5"></td><td class="diff_header" id="from34_618">618</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL},</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_619">619</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{NULL}&nbsp;&nbsp;/*&nbsp;Sentinel&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_620">620</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;};</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_621">621</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_622">622</td><td nowrap="nowrap">and&nbsp;register&nbsp;it&nbsp;in&nbsp;the&nbsp;:attr:`tp_getset`&nbsp;slot::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_623">623</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_624">624</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Noddy_getseters,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;tp_getset&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_625">625</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__6">n</a></td><td class="diff_header" id="from34_626">626-</td><td nowrap="nowrap">to&nbsp;register&nbsp;ou<span class="diff_chg">t</span>&nbsp;attribute&nbsp;getters&nbsp;and&nbsp;setters.</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to34__6">n</a></td><td class="diff_header" id="to34_619">619+</td><td nowrap="nowrap">to&nbsp;register&nbsp;ou<span class="diff_chg">r</span>&nbsp;attribute&nbsp;getters&nbsp;and&nbsp;setters.</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_627">627</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_628">628</td><td nowrap="nowrap">The&nbsp;last&nbsp;item&nbsp;in&nbsp;a&nbsp;:ctype:`PyGetSetDef`&nbsp;structure&nbsp;is&nbsp;the&nbsp;closure&nbsp;mentioned</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_629">629</td><td nowrap="nowrap">above.&nbsp;In&nbsp;this&nbsp;case,&nbsp;we&nbsp;aren't&nbsp;using&nbsp;the&nbsp;closure,&nbsp;so&nbsp;we&nbsp;just&nbsp;pass&nbsp;*NULL*.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_630">630</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_631">631</td><td nowrap="nowrap">We&nbsp;also&nbsp;remove&nbsp;the&nbsp;member&nbsp;definitions&nbsp;for&nbsp;these&nbsp;attributes::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_632">632</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_633">633</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;static&nbsp;PyMemberDef&nbsp;Noddy_members[]&nbsp;=&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_634">634</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"number",&nbsp;T_INT,&nbsp;offsetof(Noddy,&nbsp;number),&nbsp;0,</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__6"></td><td class="diff_header" id="from34_700">700</td><td nowrap="nowrap">object&nbsp;to&nbsp;be&nbsp;stored&nbsp;in&nbsp;the&nbsp;:attr:`first`&nbsp;or&nbsp;:attr:`last`&nbsp;attributes.&nbsp;[#]_&nbsp;This</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_701">701</td><td nowrap="nowrap">means&nbsp;that&nbsp;:class:`Noddy`&nbsp;objects&nbsp;can&nbsp;participate&nbsp;in&nbsp;cycles::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_702">702</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_703">703</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;import&nbsp;noddy2</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_704">704</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;n&nbsp;=&nbsp;noddy2.Noddy()</td></tr>            <tr><td class="diff_next" id="difflib_chg_to34__7"></td><td class="diff_header" id="from34_705">705</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;l&nbsp;=&nbsp;[n]</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_706">706</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;n.first&nbsp;=&nbsp;l</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_707">707</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__7">n</a></td><td class="diff_header" id="from34_708">708-</td><td nowrap="nowrap">This&nbsp;is&nbsp;pretty&nbsp;silly,&nbsp;but&nbsp;it&nbsp;gives&nbsp;us&nbsp;an&nbsp;excuse&nbsp;to&nbsp;add&nbsp;support&nbsp;for&nbsp;the<span class="diff_sub">&nbsp;cyclic-</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to34__7">n</a></td><td class="diff_header" id="to34_701">701+</td><td nowrap="nowrap">This&nbsp;is&nbsp;pretty&nbsp;silly,&nbsp;but&nbsp;it&nbsp;gives&nbsp;us&nbsp;an&nbsp;excuse&nbsp;to&nbsp;add&nbsp;support&nbsp;for&nbsp;the</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_709">709-</td><td nowrap="nowrap">garbage&nbsp;collector&nbsp;to&nbsp;the&nbsp;:class:`Noddy`&nbsp;example.&nbsp;&nbsp;To&nbsp;support&nbsp;cyclic<span class="diff_sub">&nbsp;garbage</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_702">702+</td><td nowrap="nowrap"><span class="diff_add">cyclic-</span>garbage&nbsp;collector&nbsp;to&nbsp;the&nbsp;:class:`Noddy`&nbsp;example.&nbsp;&nbsp;To&nbsp;support&nbsp;cyclic</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_710">710-</td><td nowrap="nowrap">collection,&nbsp;types&nbsp;need&nbsp;to&nbsp;fill&nbsp;two&nbsp;slots&nbsp;and&nbsp;set&nbsp;a&nbsp;class&nbsp;flag&nbsp;that<span class="diff_sub">&nbsp;enables&nbsp;these</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_703">703+</td><td nowrap="nowrap"><span class="diff_add">garbage&nbsp;</span>collection,&nbsp;types&nbsp;need&nbsp;to&nbsp;fill&nbsp;two&nbsp;slots&nbsp;and&nbsp;set&nbsp;a&nbsp;class&nbsp;flag&nbsp;that</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_711">711-</td><td nowrap="nowrap"><span class="diff_sub">slots:</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_704">704+</td><td nowrap="nowrap"><span class="diff_add">enables&nbsp;these&nbsp;slots:</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_712">712</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__8">n</a></td><td class="diff_header" id="from34_713">713-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_714">714-</td><td nowrap="nowrap">..&nbsp;include::&nbsp;../includes/noddy4.c</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_706">706+</td><td nowrap="nowrap">..&nbsp;<span class="diff_add">literal</span>include::&nbsp;../includes/noddy4.c</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_715">715-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;:literal:</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_707">707+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_716">716</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_717">717</td><td nowrap="nowrap">The&nbsp;traversal&nbsp;method&nbsp;provides&nbsp;access&nbsp;to&nbsp;subobjects&nbsp;that&nbsp;could&nbsp;participate&nbsp;in</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_718">718</td><td nowrap="nowrap">cycles::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_719">719</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_720">720</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;static&nbsp;int</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_721">721</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Noddy_traverse(Noddy&nbsp;*self,&nbsp;visitproc&nbsp;visit,&nbsp;void&nbsp;*arg)</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_722">722</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_723">723</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;vret;</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__8"></td><td class="diff_header" id="from34_813">813</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_814">814</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;Py_TPFLAGS_DEFAULT&nbsp;|&nbsp;Py_TPFLAGS_BASETYPE&nbsp;|&nbsp;Py_TPFLAGS_HAVE_GC,&nbsp;/*tp_flags*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_815">815</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_816">816</td><td nowrap="nowrap">That's&nbsp;pretty&nbsp;much&nbsp;it.&nbsp;&nbsp;If&nbsp;we&nbsp;had&nbsp;written&nbsp;custom&nbsp;:attr:`tp_alloc`&nbsp;or</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_817">817</td><td nowrap="nowrap">:attr:`tp_free`&nbsp;slots,&nbsp;we'd&nbsp;need&nbsp;to&nbsp;modify&nbsp;them&nbsp;for&nbsp;cyclic-garbage&nbsp;collection.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_818">818</td><td nowrap="nowrap">Most&nbsp;extensions&nbsp;will&nbsp;use&nbsp;the&nbsp;versions&nbsp;automatically&nbsp;provided.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_819">819</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_820">820</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__9">n</a></td><td class="diff_header" id="to34_813">813+</td><td nowrap="nowrap"><span class="diff_add">Subclassing&nbsp;other&nbsp;types</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_814">814+</td><td nowrap="nowrap"><span class="diff_add">-----------------------</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_815">815+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_816">816+</td><td nowrap="nowrap"><span class="diff_add">It&nbsp;is&nbsp;possible&nbsp;to&nbsp;create&nbsp;new&nbsp;extension&nbsp;types&nbsp;that&nbsp;are&nbsp;derived&nbsp;from&nbsp;existing</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_817">817+</td><td nowrap="nowrap"><span class="diff_add">types.&nbsp;It&nbsp;is&nbsp;easiest&nbsp;to&nbsp;inherit&nbsp;from&nbsp;the&nbsp;built&nbsp;in&nbsp;types,&nbsp;since&nbsp;an&nbsp;extension&nbsp;can</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_818">818+</td><td nowrap="nowrap"><span class="diff_add">easily&nbsp;use&nbsp;the&nbsp;:class:`PyTypeObject`&nbsp;it&nbsp;needs.&nbsp;It&nbsp;can&nbsp;be&nbsp;difficult&nbsp;to&nbsp;share</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_819">819+</td><td nowrap="nowrap"><span class="diff_add">these&nbsp;:class:`PyTypeObject`&nbsp;structures&nbsp;between&nbsp;extension&nbsp;modules.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_820">820+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_821">821+</td><td nowrap="nowrap"><span class="diff_add">In&nbsp;this&nbsp;example&nbsp;we&nbsp;will&nbsp;create&nbsp;a&nbsp;:class:`Shoddy`&nbsp;type&nbsp;that&nbsp;inherits&nbsp;from&nbsp;the</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_822">822+</td><td nowrap="nowrap"><span class="diff_add">builtin&nbsp;:class:`list`&nbsp;type.&nbsp;The&nbsp;new&nbsp;type&nbsp;will&nbsp;be&nbsp;completely&nbsp;compatible&nbsp;with</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_823">823+</td><td nowrap="nowrap"><span class="diff_add">regular&nbsp;lists,&nbsp;but&nbsp;will&nbsp;have&nbsp;an&nbsp;additional&nbsp;:meth:`increment`&nbsp;method&nbsp;that</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_824">824+</td><td nowrap="nowrap"><span class="diff_add">increases&nbsp;an&nbsp;internal&nbsp;counter.&nbsp;::</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_825">825+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_826">826+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;import&nbsp;shoddy</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_827">827+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;s&nbsp;=&nbsp;shoddy.Shoddy(range(3))</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_828">828+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;s.extend(s)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_829">829+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;print&nbsp;len(s)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_830">830+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;6</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_831">831+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;print&nbsp;s.increment()</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_832">832+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;1</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_833">833+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;print&nbsp;s.increment()</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_834">834+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;2</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_835">835+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_836">836+</td><td nowrap="nowrap"><span class="diff_add">..&nbsp;literalinclude::&nbsp;../includes/shoddy.c</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_837">837+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_838">838+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_839">839+</td><td nowrap="nowrap"><span class="diff_add">As&nbsp;you&nbsp;can&nbsp;see,&nbsp;the&nbsp;source&nbsp;code&nbsp;closely&nbsp;resembles&nbsp;the&nbsp;:class:`Noddy`&nbsp;examples&nbsp;in</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_840">840+</td><td nowrap="nowrap"><span class="diff_add">previous&nbsp;sections.&nbsp;We&nbsp;will&nbsp;break&nbsp;down&nbsp;the&nbsp;main&nbsp;differences&nbsp;between&nbsp;them.&nbsp;::</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_841">841+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_842">842+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;typedef&nbsp;struct&nbsp;{</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_843">843+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PyListObject&nbsp;list;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_844">844+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;state;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_845">845+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;}&nbsp;Shoddy;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_846">846+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_847">847+</td><td nowrap="nowrap"><span class="diff_add">The&nbsp;primary&nbsp;difference&nbsp;for&nbsp;derived&nbsp;type&nbsp;objects&nbsp;is&nbsp;that&nbsp;the&nbsp;base&nbsp;type's&nbsp;object</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_848">848+</td><td nowrap="nowrap"><span class="diff_add">structure&nbsp;must&nbsp;be&nbsp;the&nbsp;first&nbsp;value.&nbsp;The&nbsp;base&nbsp;type&nbsp;will&nbsp;already&nbsp;include&nbsp;the</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_849">849+</td><td nowrap="nowrap"><span class="diff_add">:cfunc:`PyObject_HEAD`&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;its&nbsp;structure.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_850">850+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_851">851+</td><td nowrap="nowrap"><span class="diff_add">When&nbsp;a&nbsp;Python&nbsp;object&nbsp;is&nbsp;a&nbsp;:class:`Shoddy`&nbsp;instance,&nbsp;its&nbsp;*PyObject\**&nbsp;pointer&nbsp;can</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_852">852+</td><td nowrap="nowrap"><span class="diff_add">be&nbsp;safely&nbsp;cast&nbsp;to&nbsp;both&nbsp;*PyListObject\**&nbsp;and&nbsp;*Shoddy\**.&nbsp;::</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_853">853+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_854">854+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;static&nbsp;int</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_855">855+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;Shoddy_init(Shoddy&nbsp;*self,&nbsp;PyObject&nbsp;*args,&nbsp;PyObject&nbsp;*kwds)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_856">856+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;{</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_857">857+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(PyList_Type.tp_init((PyObject&nbsp;*)self,&nbsp;args,&nbsp;kwds)&nbsp;&lt;&nbsp;0)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_858">858+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;-1;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_859">859+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self-&gt;state&nbsp;=&nbsp;0;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_860">860+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_861">861+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;}</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_862">862+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_863">863+</td><td nowrap="nowrap"><span class="diff_add">In&nbsp;the&nbsp;:attr:`__init__`&nbsp;method&nbsp;for&nbsp;our&nbsp;type,&nbsp;we&nbsp;can&nbsp;see&nbsp;how&nbsp;to&nbsp;call&nbsp;through&nbsp;to</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_864">864+</td><td nowrap="nowrap"><span class="diff_add">the&nbsp;:attr:`__init__`&nbsp;method&nbsp;of&nbsp;the&nbsp;base&nbsp;type.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_865">865+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_866">866+</td><td nowrap="nowrap"><span class="diff_add">This&nbsp;pattern&nbsp;is&nbsp;important&nbsp;when&nbsp;writing&nbsp;a&nbsp;type&nbsp;with&nbsp;custom&nbsp;:attr:`new`&nbsp;and</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_867">867+</td><td nowrap="nowrap"><span class="diff_add">:attr:`dealloc`&nbsp;methods.&nbsp;The&nbsp;:attr:`new`&nbsp;method&nbsp;should&nbsp;not&nbsp;actually&nbsp;create&nbsp;the</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_868">868+</td><td nowrap="nowrap"><span class="diff_add">memory&nbsp;for&nbsp;the&nbsp;object&nbsp;with&nbsp;:attr:`tp_alloc`,&nbsp;that&nbsp;will&nbsp;be&nbsp;handled&nbsp;by&nbsp;the&nbsp;base</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_869">869+</td><td nowrap="nowrap"><span class="diff_add">class&nbsp;when&nbsp;calling&nbsp;its&nbsp;:attr:`tp_new`.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_870">870+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_871">871+</td><td nowrap="nowrap"><span class="diff_add">When&nbsp;filling&nbsp;out&nbsp;the&nbsp;:cfunc:`PyTypeObject`&nbsp;for&nbsp;the&nbsp;:class:`Shoddy`&nbsp;type,&nbsp;you&nbsp;see</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_872">872+</td><td nowrap="nowrap"><span class="diff_add">a&nbsp;slot&nbsp;for&nbsp;:cfunc:`tp_base`.&nbsp;Due&nbsp;to&nbsp;cross&nbsp;platform&nbsp;compiler&nbsp;issues,&nbsp;you&nbsp;can't</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_873">873+</td><td nowrap="nowrap"><span class="diff_add">fill&nbsp;that&nbsp;field&nbsp;directly&nbsp;with&nbsp;the&nbsp;:cfunc:`PyList_Type`;&nbsp;it&nbsp;can&nbsp;be&nbsp;done&nbsp;later&nbsp;in</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_874">874+</td><td nowrap="nowrap"><span class="diff_add">the&nbsp;module's&nbsp;:cfunc:`init`&nbsp;function.&nbsp;::</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_875">875+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_876">876+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;PyMODINIT_FUNC</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_877">877+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;initshoddy(void)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_878">878+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;{</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_879">879+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PyObject&nbsp;*m;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_880">880+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_881">881+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ShoddyType.tp_base&nbsp;=&nbsp;&amp;PyList_Type;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_882">882+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(PyType_Ready(&amp;ShoddyType)&nbsp;&lt;&nbsp;0)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_883">883+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_884">884+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_885">885+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;=&nbsp;Py_InitModule3("shoddy",&nbsp;NULL,&nbsp;"Shoddy&nbsp;module");</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_886">886+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m&nbsp;==&nbsp;NULL)</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_887">887+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_888">888+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_889">889+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Py_INCREF(&amp;ShoddyType);</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_890">890+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PyModule_AddObject(m,&nbsp;"Shoddy",&nbsp;(PyObject&nbsp;*)&nbsp;&amp;ShoddyType);</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_891">891+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;}</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_892">892+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_893">893+</td><td nowrap="nowrap"><span class="diff_add">Before&nbsp;calling&nbsp;:cfunc:`PyType_Ready`,&nbsp;the&nbsp;type&nbsp;structure&nbsp;must&nbsp;have&nbsp;the</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_894">894+</td><td nowrap="nowrap"><span class="diff_add">:attr:`tp_base`&nbsp;slot&nbsp;filled&nbsp;in.&nbsp;When&nbsp;we&nbsp;are&nbsp;deriving&nbsp;a&nbsp;new&nbsp;type,&nbsp;it&nbsp;is&nbsp;not</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_895">895+</td><td nowrap="nowrap"><span class="diff_add">necessary&nbsp;to&nbsp;fill&nbsp;out&nbsp;the&nbsp;:attr:`tp_alloc`&nbsp;slot&nbsp;with&nbsp;:cfunc:`PyType_GenericNew`</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_896">896+</td><td nowrap="nowrap"><span class="diff_add">--&nbsp;the&nbsp;allocate&nbsp;function&nbsp;from&nbsp;the&nbsp;base&nbsp;type&nbsp;will&nbsp;be&nbsp;inherited.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_897">897+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_898">898+</td><td nowrap="nowrap"><span class="diff_add">After&nbsp;that,&nbsp;calling&nbsp;:cfunc:`PyType_Ready`&nbsp;and&nbsp;adding&nbsp;the&nbsp;type&nbsp;object&nbsp;to&nbsp;the</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_899">899+</td><td nowrap="nowrap"><span class="diff_add">module&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;with&nbsp;the&nbsp;basic&nbsp;:class:`Noddy`&nbsp;examples.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_900">900+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_901">901+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_821">821</td><td nowrap="nowrap">..&nbsp;_dnt-type-methods:</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_822">822</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_823">823</td><td nowrap="nowrap">Type&nbsp;Methods</td></tr>            <tr><td class="diff_next" id="difflib_chg_to34__9"></td><td class="diff_header" id="from34_824">824</td><td nowrap="nowrap">============</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_825">825</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_826">826</td><td nowrap="nowrap">This&nbsp;section&nbsp;aims&nbsp;to&nbsp;give&nbsp;a&nbsp;quick&nbsp;fly-by&nbsp;on&nbsp;the&nbsp;various&nbsp;type&nbsp;methods&nbsp;you&nbsp;can</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_827">827</td><td nowrap="nowrap">implement&nbsp;and&nbsp;what&nbsp;they&nbsp;do.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_828">828</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_829">829</td><td nowrap="nowrap">Here&nbsp;is&nbsp;the&nbsp;definition&nbsp;of&nbsp;:ctype:`PyTypeObject`,&nbsp;with&nbsp;some&nbsp;fields&nbsp;only&nbsp;used&nbsp;in</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_830">830</td><td nowrap="nowrap">debug&nbsp;builds&nbsp;omitted:</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_831">831</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__10">n</a></td><td class="diff_header" id="from34_832">832-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_833">833-</td><td nowrap="nowrap">..&nbsp;include::&nbsp;../includes/typestruct.h</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_913">913+</td><td nowrap="nowrap">..&nbsp;<span class="diff_add">literal</span>include::&nbsp;../includes/typestruct.h</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_834">834-</td><td nowrap="nowrap"><span class="diff_sub">&nbsp;&nbsp;&nbsp;:literal:</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_914">914+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_835">835</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_836">836</td><td nowrap="nowrap">Now&nbsp;that's&nbsp;a&nbsp;*lot*&nbsp;of&nbsp;methods.&nbsp;&nbsp;Don't&nbsp;worry&nbsp;too&nbsp;much&nbsp;though&nbsp;-&nbsp;if&nbsp;you&nbsp;have&nbsp;a&nbsp;type</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_837">837</td><td nowrap="nowrap">you&nbsp;want&nbsp;to&nbsp;define,&nbsp;the&nbsp;chances&nbsp;are&nbsp;very&nbsp;good&nbsp;that&nbsp;you&nbsp;will&nbsp;only&nbsp;implement&nbsp;a</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_838">838</td><td nowrap="nowrap">handful&nbsp;of&nbsp;these.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_839">839</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_840">840</td><td nowrap="nowrap">As&nbsp;you&nbsp;probably&nbsp;expect&nbsp;by&nbsp;now,&nbsp;we're&nbsp;going&nbsp;to&nbsp;go&nbsp;over&nbsp;this&nbsp;and&nbsp;give&nbsp;more</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_841">841</td><td nowrap="nowrap">information&nbsp;about&nbsp;the&nbsp;various&nbsp;handlers.&nbsp;&nbsp;We&nbsp;won't&nbsp;go&nbsp;in&nbsp;the&nbsp;order&nbsp;they&nbsp;are</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_842">842</td><td nowrap="nowrap">defined&nbsp;in&nbsp;the&nbsp;structure,&nbsp;because&nbsp;there&nbsp;is&nbsp;a&nbsp;lot&nbsp;of&nbsp;historical&nbsp;baggage&nbsp;that</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__10"></td><td class="diff_header" id="from34_1062">1062</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1063">1063</td><td nowrap="nowrap">#.&nbsp;No&nbsp;special&nbsp;processing&nbsp;is&nbsp;needed&nbsp;to&nbsp;record&nbsp;that&nbsp;an&nbsp;attribute&nbsp;was&nbsp;looked&nbsp;up&nbsp;or</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1064">1064</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;set,&nbsp;nor&nbsp;do&nbsp;actions&nbsp;need&nbsp;to&nbsp;be&nbsp;taken&nbsp;based&nbsp;on&nbsp;the&nbsp;value.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1065">1065</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1066">1066</td><td nowrap="nowrap">Note&nbsp;that&nbsp;this&nbsp;list&nbsp;does&nbsp;not&nbsp;place&nbsp;any&nbsp;restrictions&nbsp;on&nbsp;the&nbsp;values&nbsp;of&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1067">1067</td><td nowrap="nowrap">attributes,&nbsp;when&nbsp;the&nbsp;values&nbsp;are&nbsp;computed,&nbsp;or&nbsp;how&nbsp;relevant&nbsp;data&nbsp;is&nbsp;stored.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1068">1068</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1069">1069</td><td nowrap="nowrap">When&nbsp;:cfunc:`PyType_Ready`&nbsp;is&nbsp;called,&nbsp;it&nbsp;uses&nbsp;three&nbsp;tables&nbsp;referenced&nbsp;by&nbsp;the</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__11">n</a></td><td class="diff_header" id="from34_1070">1070-</td><td nowrap="nowrap">type&nbsp;object&nbsp;to&nbsp;create&nbsp;<span class="diff_chg">*</span>descriptors<span class="diff_sub">*</span>&nbsp;which&nbsp;are&nbsp;placed&nbsp;in&nbsp;the&nbsp;dictionary&nbsp;of&nbsp;the</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to34__11">n</a></td><td class="diff_header" id="to34_1150">1150+</td><td nowrap="nowrap">type&nbsp;object&nbsp;to&nbsp;create&nbsp;<span class="diff_chg">:term:`</span>descriptor<span class="diff_add">`\</span>s&nbsp;which&nbsp;are&nbsp;placed&nbsp;in&nbsp;the&nbsp;dictionary&nbsp;of&nbsp;the</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1071">1071</td><td nowrap="nowrap">type&nbsp;object.&nbsp;&nbsp;Each&nbsp;descriptor&nbsp;controls&nbsp;access&nbsp;to&nbsp;one&nbsp;attribute&nbsp;of&nbsp;the&nbsp;instance</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1072">1072</td><td nowrap="nowrap">object.&nbsp;&nbsp;Each&nbsp;of&nbsp;the&nbsp;tables&nbsp;is&nbsp;optional;&nbsp;if&nbsp;all&nbsp;three&nbsp;are&nbsp;*NULL*,&nbsp;instances&nbsp;of</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1073">1073</td><td nowrap="nowrap">the&nbsp;type&nbsp;will&nbsp;only&nbsp;have&nbsp;attributes&nbsp;that&nbsp;are&nbsp;inherited&nbsp;from&nbsp;their&nbsp;base&nbsp;type,&nbsp;and</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1074">1074</td><td nowrap="nowrap">should&nbsp;leave&nbsp;the&nbsp;:attr:`tp_getattro`&nbsp;and&nbsp;:attr:`tp_setattro`&nbsp;fields&nbsp;*NULL*&nbsp;as</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1075">1075</td><td nowrap="nowrap">well,&nbsp;allowing&nbsp;the&nbsp;base&nbsp;type&nbsp;to&nbsp;handle&nbsp;attributes.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1076">1076</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1077">1077</td><td nowrap="nowrap">The&nbsp;tables&nbsp;are&nbsp;declared&nbsp;as&nbsp;three&nbsp;fields&nbsp;of&nbsp;the&nbsp;type&nbsp;object::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1078">1078</td><td nowrap="nowrap"></td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__11"></td><td class="diff_header" id="from34_1082">1082</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1083">1083</td><td nowrap="nowrap">If&nbsp;:attr:`tp_methods`&nbsp;is&nbsp;not&nbsp;*NULL*,&nbsp;it&nbsp;must&nbsp;refer&nbsp;to&nbsp;an&nbsp;array&nbsp;of</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1084">1084</td><td nowrap="nowrap">:ctype:`PyMethodDef`&nbsp;structures.&nbsp;&nbsp;Each&nbsp;entry&nbsp;in&nbsp;the&nbsp;table&nbsp;is&nbsp;an&nbsp;instance&nbsp;of&nbsp;this</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1085">1085</td><td nowrap="nowrap">structure::</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1086">1086</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1087">1087</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;typedef&nbsp;struct&nbsp;PyMethodDef&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1088">1088</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ml_name;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;method&nbsp;name&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1089">1089</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PyCFunction&nbsp;&nbsp;ml_meth;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;implementation&nbsp;function&nbsp;*/</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__12">n</a></td><td class="diff_header" id="from34_1090">1090-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int<span class="diff_chg">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ml_flags;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;flags&nbsp;*/</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to34__12">n</a></td><td class="diff_header" id="to34_1170">1170+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int<span class="diff_chg">&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ml_flags;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;flags&nbsp;*/</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1091">1091</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ml_doc;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;docstring&nbsp;*/</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1092">1092</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;}&nbsp;PyMethodDef;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1093">1093</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1094">1094</td><td nowrap="nowrap">One&nbsp;entry&nbsp;should&nbsp;be&nbsp;defined&nbsp;for&nbsp;each&nbsp;method&nbsp;provided&nbsp;by&nbsp;the&nbsp;type;&nbsp;no&nbsp;entries&nbsp;are</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1095">1095</td><td nowrap="nowrap">needed&nbsp;for&nbsp;methods&nbsp;inherited&nbsp;from&nbsp;a&nbsp;base&nbsp;type.&nbsp;&nbsp;One&nbsp;additional&nbsp;entry&nbsp;is&nbsp;needed</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1096">1096</td><td nowrap="nowrap">at&nbsp;the&nbsp;end;&nbsp;it&nbsp;is&nbsp;a&nbsp;sentinel&nbsp;that&nbsp;marks&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;array.&nbsp;&nbsp;The</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1097">1097</td><td nowrap="nowrap">:attr:`ml_name`&nbsp;field&nbsp;of&nbsp;the&nbsp;sentinel&nbsp;must&nbsp;be&nbsp;*NULL*.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1098">1098</td><td nowrap="nowrap"></td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__12"></td><td class="diff_header" id="from34_1106">1106</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;typedef&nbsp;struct&nbsp;PyMemberDef&nbsp;{</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1107">1107</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;*name;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1108">1108</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp;&nbsp;type;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1109">1109</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp;&nbsp;offset;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1110">1110</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp;&nbsp;flags;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1111">1111</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;*doc;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1112">1112</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;}&nbsp;PyMemberDef;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1113">1113</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__13">n</a></td><td class="diff_header" id="from34_1114">1114-</td><td nowrap="nowrap">For&nbsp;each&nbsp;entry&nbsp;in&nbsp;the&nbsp;table,&nbsp;a&nbsp;descriptor&nbsp;will&nbsp;be&nbsp;constructed&nbsp;and&nbsp;added&nbsp;to&nbsp;the</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to34__13">n</a></td><td class="diff_header" id="to34_1194">1194+</td><td nowrap="nowrap">For&nbsp;each&nbsp;entry&nbsp;in&nbsp;the&nbsp;table,&nbsp;a&nbsp;<span class="diff_add">:term:`</span>descriptor<span class="diff_add">`</span>&nbsp;will&nbsp;be&nbsp;constructed&nbsp;and&nbsp;added&nbsp;to&nbsp;the</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1115">1115</td><td nowrap="nowrap">type&nbsp;which&nbsp;will&nbsp;be&nbsp;able&nbsp;to&nbsp;extract&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;instance&nbsp;structure.&nbsp;&nbsp;The</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1116">1116</td><td nowrap="nowrap">:attr:`type`&nbsp;field&nbsp;should&nbsp;contain&nbsp;one&nbsp;of&nbsp;the&nbsp;type&nbsp;codes&nbsp;defined&nbsp;in&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1117">1117</td><td nowrap="nowrap">:file:`structmember.h`&nbsp;header;&nbsp;the&nbsp;value&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;determine&nbsp;how&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1118">1118</td><td nowrap="nowrap">convert&nbsp;Python&nbsp;values&nbsp;to&nbsp;and&nbsp;from&nbsp;C&nbsp;values.&nbsp;&nbsp;The&nbsp;:attr:`flags`&nbsp;field&nbsp;is&nbsp;used&nbsp;to</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1119">1119</td><td nowrap="nowrap">store&nbsp;flags&nbsp;which&nbsp;control&nbsp;how&nbsp;the&nbsp;attribute&nbsp;can&nbsp;be&nbsp;accessed.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1120">1120</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1121">1121</td><td nowrap="nowrap">XXX&nbsp;Need&nbsp;to&nbsp;move&nbsp;some&nbsp;of&nbsp;this&nbsp;to&nbsp;a&nbsp;shared&nbsp;section!</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1122">1122</td><td nowrap="nowrap"></td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__13"></td><td class="diff_header" id="from34_1148">1148</td><td nowrap="nowrap">descriptors&nbsp;that&nbsp;are&nbsp;used&nbsp;at&nbsp;runtime&nbsp;is&nbsp;that&nbsp;any&nbsp;attribute&nbsp;defined&nbsp;this&nbsp;way&nbsp;can</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1149">1149</td><td nowrap="nowrap">have&nbsp;an&nbsp;associated&nbsp;doc&nbsp;string&nbsp;simply&nbsp;by&nbsp;providing&nbsp;the&nbsp;text&nbsp;in&nbsp;the&nbsp;table.&nbsp;&nbsp;An</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1150">1150</td><td nowrap="nowrap">application&nbsp;can&nbsp;use&nbsp;the&nbsp;introspection&nbsp;API&nbsp;to&nbsp;retrieve&nbsp;the&nbsp;descriptor&nbsp;from&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1151">1151</td><td nowrap="nowrap">class&nbsp;object,&nbsp;and&nbsp;get&nbsp;the&nbsp;doc&nbsp;string&nbsp;using&nbsp;its&nbsp;:attr:`__doc__`&nbsp;attribute.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1152">1152</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1153">1153</td><td nowrap="nowrap">As&nbsp;with&nbsp;the&nbsp;:attr:`tp_methods`&nbsp;table,&nbsp;a&nbsp;sentinel&nbsp;entry&nbsp;with&nbsp;a&nbsp;:attr:`name`&nbsp;value</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1154">1154</td><td nowrap="nowrap">of&nbsp;*NULL*&nbsp;is&nbsp;required.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1155">1155</td><td nowrap="nowrap"></td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__14">n</a></td><td class="diff_header" id="from34_1156">1156-</td><td nowrap="nowrap">..<span class="diff_sub">&nbsp;%</span>&nbsp;XXX&nbsp;Descriptors&nbsp;need&nbsp;to&nbsp;be&nbsp;explained&nbsp;in&nbsp;more&nbsp;detail&nbsp;somewhere,&nbsp;but</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to34__14">n</a></td><td class="diff_header" id="to34_1236">1236+</td><td nowrap="nowrap">..&nbsp;XXX&nbsp;Descriptors&nbsp;need&nbsp;to&nbsp;be&nbsp;explained&nbsp;in&nbsp;more&nbsp;detail&nbsp;somewhere,&nbsp;but<span class="diff_add">&nbsp;not&nbsp;here.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_1157">1157-</td><td nowrap="nowrap"><span class="diff_sub">..&nbsp;%&nbsp;not&nbsp;here.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_1237">1237+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_1158">1158-</td><td nowrap="nowrap"><span class="diff_sub">..&nbsp;%&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_1159">1159-</td><td nowrap="nowrap"><span class="diff_chg">..&nbsp;%</span>&nbsp;Descriptor&nbsp;objects&nbsp;have&nbsp;two&nbsp;handler&nbsp;functions&nbsp;which&nbsp;correspond&nbsp;to</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_1238">1238+</td><td nowrap="nowrap"><span class="diff_chg">&nbsp;&nbsp;</span>&nbsp;Descriptor&nbsp;objects&nbsp;have&nbsp;two&nbsp;handler&nbsp;functions&nbsp;which&nbsp;correspond&nbsp;to<span class="diff_add">&nbsp;the</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_1160">1160-</td><td nowrap="nowrap"><span class="diff_chg">..&nbsp;%&nbsp;the</span>&nbsp;\member{tp_getattro}&nbsp;and&nbsp;\member{tp_setattro}&nbsp;handlers.&nbsp;&nbsp;The</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_1239">1239+</td><td nowrap="nowrap"><span class="diff_chg">&nbsp;&nbsp;</span>&nbsp;\member{tp_getattro}&nbsp;and&nbsp;\member{tp_setattro}&nbsp;handlers.&nbsp;&nbsp;The</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_1161">1161-</td><td nowrap="nowrap"><span class="diff_chg">..&nbsp;%</span>&nbsp;\method{__get__()}&nbsp;handler&nbsp;is&nbsp;a&nbsp;function&nbsp;which&nbsp;is&nbsp;passed&nbsp;the</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_1240">1240+</td><td nowrap="nowrap"><span class="diff_chg">&nbsp;&nbsp;</span>&nbsp;\method{__get__()}&nbsp;handler&nbsp;is&nbsp;a&nbsp;function&nbsp;which&nbsp;is&nbsp;passed&nbsp;the<span class="diff_add">&nbsp;descriptor,</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_1162">1162-</td><td nowrap="nowrap"><span class="diff_chg">..&nbsp;%&nbsp;descriptor,</span>&nbsp;instance,&nbsp;and&nbsp;type&nbsp;objects,&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the</td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_1241">1241+</td><td nowrap="nowrap"><span class="diff_chg">&nbsp;&nbsp;</span>&nbsp;instance,&nbsp;and&nbsp;type&nbsp;objects,&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the<span class="diff_add">&nbsp;attribute,&nbsp;or&nbsp;it</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_1163">1163-</td><td nowrap="nowrap"><span class="diff_sub">..&nbsp;%&nbsp;attribute,&nbsp;or&nbsp;it&nbsp;returns&nbsp;\NULL{}&nbsp;and&nbsp;sets&nbsp;an&nbsp;exception.&nbsp;&nbsp;The</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_1242">1242+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;returns&nbsp;\NULL{}&nbsp;and&nbsp;sets&nbsp;an&nbsp;exception.&nbsp;&nbsp;The&nbsp;\method{__set__()}&nbsp;handler&nbsp;is</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_1164">1164-</td><td nowrap="nowrap"><span class="diff_sub">..&nbsp;%&nbsp;\method{__set__()}&nbsp;handler&nbsp;is&nbsp;passed&nbsp;the&nbsp;descriptor,&nbsp;instance,&nbsp;type,</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_1243">1243+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;&nbsp;&nbsp;passed&nbsp;the&nbsp;descriptor,&nbsp;instance,&nbsp;type,&nbsp;and&nbsp;new&nbsp;value;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_1165">1165-</td><td nowrap="nowrap"><span class="diff_sub">..&nbsp;%&nbsp;and&nbsp;new&nbsp;value;</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1166">1166</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1167">1167</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1168">1168</td><td nowrap="nowrap">Type-specific&nbsp;Attribute&nbsp;Management</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1169">1169</td><td nowrap="nowrap">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1170">1170</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1171">1171</td><td nowrap="nowrap">For&nbsp;simplicity,&nbsp;only&nbsp;the&nbsp;:ctype:`char\*`&nbsp;version&nbsp;will&nbsp;be&nbsp;demonstrated&nbsp;here;&nbsp;the</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1172">1172</td><td nowrap="nowrap">type&nbsp;of&nbsp;the&nbsp;name&nbsp;parameter&nbsp;is&nbsp;the&nbsp;only&nbsp;difference&nbsp;between&nbsp;the&nbsp;:ctype:`char\*`</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1173">1173</td><td nowrap="nowrap">and&nbsp;:ctype:`PyObject\*`&nbsp;flavors&nbsp;of&nbsp;the&nbsp;interface.&nbsp;This&nbsp;example&nbsp;effectively&nbsp;does</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__14"></td><td class="diff_header" id="from34_1262">1262</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;result;</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1263">1263</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;}</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1264">1264</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1265">1265</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1266">1266</td><td nowrap="nowrap">Abstract&nbsp;Protocol&nbsp;Support</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1267">1267</td><td nowrap="nowrap">-------------------------</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1268">1268</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1269">1269</td><td nowrap="nowrap">Python&nbsp;supports&nbsp;a&nbsp;variety&nbsp;of&nbsp;*abstract*&nbsp;'protocols;'&nbsp;the&nbsp;specific&nbsp;interfaces</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__15">n</a></td><td class="diff_header" id="from34_1270">1270-</td><td nowrap="nowrap">provided&nbsp;to&nbsp;use&nbsp;these&nbsp;interfaces&nbsp;are&nbsp;documented&nbsp;in&nbsp;<span class="diff_chg">the&nbsp;Python/C&nbsp;API&nbsp;R</span>ef<span class="diff_chg">e</span>r<span class="diff_chg">en</span>c<span class="diff_chg">e</span></td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to34__15">n</a></td><td class="diff_header" id="to34_1348">1348+</td><td nowrap="nowrap">provided&nbsp;to&nbsp;use&nbsp;these&nbsp;interfaces&nbsp;are&nbsp;documented&nbsp;in&nbsp;<span class="diff_chg">:r</span>ef<span class="diff_chg">:`abst</span>r<span class="diff_chg">a</span>c<span class="diff_chg">t`.</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_1271">1271-</td><td nowrap="nowrap"><span class="diff_sub">Manual&nbsp;(XXX&nbsp;reference:&nbsp;../api/api.html)&nbsp;in&nbsp;the&nbsp;chapter&nbsp;"Abstract&nbsp;Objects&nbsp;Layer</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="to34_1349">1349+</td><td nowrap="nowrap"><span class="diff_add">&nbsp;</span></td></tr>
<tr><td class="diff_next"></td><td class="diff_header" id="from34_1272">1272-</td><td nowrap="nowrap"><span class="diff_sub">(XXX&nbsp;reference:&nbsp;../api/abstract.html)."</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1273">1273</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1274">1274</td><td nowrap="nowrap">A&nbsp;number&nbsp;of&nbsp;these&nbsp;abstract&nbsp;interfaces&nbsp;were&nbsp;defined&nbsp;early&nbsp;in&nbsp;the&nbsp;development&nbsp;of</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1275">1275</td><td nowrap="nowrap">the&nbsp;Python&nbsp;implementation.&nbsp;&nbsp;In&nbsp;particular,&nbsp;the&nbsp;number,&nbsp;mapping,&nbsp;and&nbsp;sequence</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1276">1276</td><td nowrap="nowrap">protocols&nbsp;have&nbsp;been&nbsp;part&nbsp;of&nbsp;Python&nbsp;since&nbsp;the&nbsp;beginning.&nbsp;&nbsp;Other&nbsp;protocols&nbsp;have</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1277">1277</td><td nowrap="nowrap">been&nbsp;added&nbsp;over&nbsp;time.&nbsp;&nbsp;For&nbsp;protocols&nbsp;which&nbsp;depend&nbsp;on&nbsp;several&nbsp;handler&nbsp;routines</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1278">1278</td><td nowrap="nowrap">from&nbsp;the&nbsp;type&nbsp;implementation,&nbsp;the&nbsp;older&nbsp;protocols&nbsp;have&nbsp;been&nbsp;defined&nbsp;as&nbsp;optional</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1279">1279</td><td nowrap="nowrap">blocks&nbsp;of&nbsp;handlers&nbsp;referenced&nbsp;by&nbsp;the&nbsp;type&nbsp;object.&nbsp;&nbsp;For&nbsp;newer&nbsp;protocols&nbsp;there&nbsp;are</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1280">1280</td><td nowrap="nowrap">additional&nbsp;slots&nbsp;in&nbsp;the&nbsp;main&nbsp;type&nbsp;object,&nbsp;with&nbsp;a&nbsp;flag&nbsp;bit&nbsp;being&nbsp;set&nbsp;to&nbsp;indicate</td></tr>        </tbody>        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to34__15"></td><td class="diff_header" id="from34_1493">1493</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;type&nbsp;doesn't&nbsp;support&nbsp;garbage&nbsp;collection.&nbsp;Even&nbsp;if&nbsp;a&nbsp;type&nbsp;supports&nbsp;garbage</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1494">1494</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;collection,&nbsp;there&nbsp;are&nbsp;calls&nbsp;that&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;"untrack"&nbsp;the&nbsp;object&nbsp;from</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1495">1495</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;garbage&nbsp;collection,&nbsp;however,&nbsp;these&nbsp;calls&nbsp;are&nbsp;advanced&nbsp;and&nbsp;not&nbsp;covered&nbsp;here.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1496">1496</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1497">1497</td><td nowrap="nowrap">..&nbsp;[#]&nbsp;We&nbsp;now&nbsp;know&nbsp;that&nbsp;the&nbsp;first&nbsp;and&nbsp;last&nbsp;members&nbsp;are&nbsp;strings,&nbsp;so&nbsp;perhaps&nbsp;we&nbsp;could&nbsp;be</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1498">1498</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;less&nbsp;careful&nbsp;about&nbsp;decrementing&nbsp;their&nbsp;reference&nbsp;counts,&nbsp;however,&nbsp;we&nbsp;accept</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1499">1499</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;instances&nbsp;of&nbsp;string&nbsp;subclasses.&nbsp;Even&nbsp;though&nbsp;deallocating&nbsp;normal&nbsp;strings&nbsp;won't</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1500">1500</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;call&nbsp;back&nbsp;into&nbsp;our&nbsp;objects,&nbsp;we&nbsp;can't&nbsp;guarantee&nbsp;that&nbsp;deallocating&nbsp;an&nbsp;instance&nbsp;of</td></tr><tr><td class="diff_next"><a href="#difflib_chg_to34__top">t</a></td><td class="diff_header" id="from34_1501">1501-</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;a&nbsp;string&nbsp;subclass&nbsp;won't<span class="diff_sub">.</span>&nbsp;call&nbsp;back&nbsp;into&nbsp;ou<span class="diff_chg">t</span>&nbsp;objects.</td></tr>
<tr><td class="diff_next"><a href="#difflib_chg_to34__top">t</a></td><td class="diff_header" id="to34_1578">1578+</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;a&nbsp;string&nbsp;subclass&nbsp;won't&nbsp;call&nbsp;back&nbsp;into&nbsp;ou<span class="diff_chg">r</span>&nbsp;objects.</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1502">1502</td><td nowrap="nowrap"></td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1503">1503</td><td nowrap="nowrap">..&nbsp;[#]&nbsp;Even&nbsp;in&nbsp;the&nbsp;third&nbsp;version,&nbsp;we&nbsp;aren't&nbsp;guaranteed&nbsp;to&nbsp;avoid&nbsp;cycles.&nbsp;&nbsp;Instances&nbsp;of</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1504">1504</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;string&nbsp;subclasses&nbsp;are&nbsp;allowed&nbsp;and&nbsp;string&nbsp;subclasses&nbsp;could&nbsp;allow&nbsp;cycles&nbsp;even&nbsp;if</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1505">1505</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;normal&nbsp;strings&nbsp;don't.</td></tr>            <tr><td class="diff_next"></td><td class="diff_header" id="from34_1506">1506</td><td nowrap="nowrap"></td></tr>        </tbody>
        </table>
    <table class="diff" summary="Legends">
        <tr> <th colspan="2"> Legends </th> </tr>
        <tr> <td> <table border="" summary="Colors">
                      <tr><th> Colors </th> </tr>
                      <tr><td class="diff_add">&nbsp;Added&nbsp;</td></tr>
                      <tr><td class="diff_chg">Changed</td> </tr>
                      <tr><td class="diff_sub">Deleted</td> </tr>
                  </table></td>
             <td> <table border="" summary="Links">
                      <tr><th colspan="2"> Links </th> </tr>
                      <tr><td>(f)irst change</td> </tr>
                      <tr><td>(n)ext change</td> </tr>
                      <tr><td>(t)op</td> </tr>
                  </table></td> </tr>
    </table>
</body>

</html>