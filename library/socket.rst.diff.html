<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>library/socket.rst</title>
<style type="text/css">
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<div class="highlight"><pre><span class="gu">@@ -196,34 +196,41 @@</span>
    the TIPC documentation for more information.
 
    .. versionadded:: 2.6
 
 .. data:: has_ipv6
 
    This constant contains a boolean value which indicates if IPv6 is supported on
    this platform.
 
    .. versionadded:: 2.3
 
 
<span class="gd">-.. function:: create_connection(address[, timeout])</span>
<span class="gi">+.. function:: create_connection(address[, timeout[, source_address]])</span>
 
    Convenience function.  Connect to *address* (a 2-tuple ``(host, port)``),
    and return the socket object.  Passing the optional *timeout* parameter will
    set the timeout on the socket instance before attempting to connect.  If no
    *timeout* is supplied, the global default timeout setting returned by
    :func:`getdefaulttimeout` is used.
 
<span class="gi">+   If supplied, *source_address* must be a 2-tuple ``(host, port)`` for the</span>
<span class="gi">+   socket to bind to as its source address before connecting.  If host or port</span>
<span class="gi">+   are &#39;&#39; or 0 respectively the OS default behavior will be used.</span>
<span class="gi">+</span>
    .. versionadded:: 2.6
 
<span class="gi">+   .. versionchanged:: 2.7</span>
<span class="gi">+      *source_address* was added.</span>
<span class="gi">+</span>
 
 .. function:: getaddrinfo(host, port, family=0, socktype=0, proto=0, flags=0)
 
    Translate the *host*/*port* argument into a sequence of 5-tuples that contain
    all the necessary arguments for creating a socket connected to that service.
    *host* is a domain name, a string representation of an IPv4/v6 address
    or ``None``. *port* is a string service name such as ``&#39;http&#39;``, a numeric
    port number or ``None``.  By passing ``None`` as the value of *host*
    and *port*, you can pass ``NULL`` to the underlying C API.
 
    The *family*, *socktype* and *proto* arguments can be optionally specified
    in order to narrow the list of addresses returned.  Passing zero as a
<span class="gu">@@ -499,24 +506,27 @@</span>
 
 .. data:: SocketType
 
    This is a Python type object that represents the socket object type. It is the
    same as ``type(socket(...))``.
 
 
 .. seealso::
 
    Module :mod:`SocketServer`
       Classes that simplify writing network servers.
 
<span class="gi">+   Module :mod:`ssl`</span>
<span class="gi">+      A TLS/SSL wrapper for socket objects.</span>
<span class="gi">+</span>
 
 .. _socket-objects:
 
 Socket Objects
 --------------
 
 Socket objects have the following methods.  Except for :meth:`makefile` these
 correspond to Unix system calls applicable to sockets.
 
 
 .. method:: socket.accept()
 
<span class="gu">@@ -535,24 +545,30 @@</span>
 
       This method has historically accepted a pair of parameters for :const:`AF_INET`
       addresses instead of only a tuple.  This was never intentional and is no longer
       available in Python 2.0 and later.
 
 
 .. method:: socket.close()
 
    Close the socket.  All future operations on the socket object will fail. The
    remote end will receive no more data (after queued data is flushed). Sockets are
    automatically closed when they are garbage-collected.
 
<span class="gi">+   .. note::</span>
<span class="gi">+      :meth:`close()` releases the resource associated with a connection but</span>
<span class="gi">+      does not necessarily close the connection immediately.  If you want</span>
<span class="gi">+      to close the connection in a timely fashion, call :meth:`shutdown()`</span>
<span class="gi">+      before :meth:`close()`.</span>
<span class="gi">+</span>
 
 .. method:: socket.connect(address)
 
    Connect to a remote socket at *address*. (The format of *address* depends on the
    address family --- see above.)
 
    .. note::
 
       This method has historically accepted a pair of parameters for :const:`AF_INET`
       addresses instead of only a tuple.  This was never intentional and is no longer
       available in Python 2.0 and later.
 
<span class="gu">@@ -619,40 +635,46 @@</span>
    &lt;http://msdn.microsoft.com/en-us/library/ms741621%28VS.85%29.aspx&gt;`_ for more
    information.
 
    On other platforms, the generic :func:`fcntl.fcntl` and :func:`fcntl.ioctl`
    functions may be used; they accept a socket object as their first argument.
 
    .. versionadded:: 2.6
 
 
 .. method:: socket.listen(backlog)
 
    Listen for connections made to the socket.  The *backlog* argument specifies the
<span class="gd">-   maximum number of queued connections and should be at least 1; the maximum value</span>
<span class="gd">-   is system-dependent (usually 5).</span>
<span class="gi">+   maximum number of queued connections and should be at least 0; the maximum value</span>
<span class="gi">+   is system-dependent (usually 5), the minimum value is forced to 0.</span>
 
 
 .. method:: socket.makefile([mode[, bufsize]])
 
    .. index:: single: I/O control; buffering
 
    Return a :dfn:`file object` associated with the socket.  (File objects are
    described in :ref:`bltin-file-objects`.) The file object
    references a :cfunc:`dup`\ ped version of the socket file descriptor, so the
    file object and socket object may be closed or garbage-collected independently.
    The socket must be in blocking mode (it can not have a timeout). The optional
    *mode* and *bufsize* arguments are interpreted the same way as by the built-in
    :func:`file` function.
 
<span class="gi">+   .. note::</span>
<span class="gi">+</span>
<span class="gi">+      On Windows, the file-like object created by :meth:`makefile` cannot be</span>
<span class="gi">+      used where a file object with a file descriptor is expected, such as the</span>
<span class="gi">+      stream arguments of :meth:`subprocess.Popen`.</span>
<span class="gi">+</span>
 
 .. method:: socket.recv(bufsize[, flags])
 
    Receive data from the socket.  The return value is a string representing the
    data received.  The maximum amount of data to be received at once is specified
    by *bufsize*.  See the Unix manual page :manpage:`recv(2)` for the meaning of
    the optional argument *flags*; it defaults to zero.
 
    .. note::
 
       For best match with hardware and network realities, the value of  *bufsize*
       should be a relatively small power of 2, for example, 4096.
<span class="gu">@@ -724,25 +746,25 @@</span>
    set to non-blocking, else to blocking mode.  Initially all sockets are in
    blocking mode.  In non-blocking mode, if a :meth:`recv` call doesn&#39;t find any
    data, or if a :meth:`send` call can&#39;t immediately dispose of the data, a
    :exc:`error` exception is raised; in blocking mode, the calls block until they
    can proceed. ``s.setblocking(0)`` is equivalent to ``s.settimeout(0.0)``;
    ``s.setblocking(1)`` is equivalent to ``s.settimeout(None)``.
 
 
 .. method:: socket.settimeout(value)
 
    Set a timeout on blocking socket operations.  The *value* argument can be a
    nonnegative float expressing seconds, or ``None``. If a float is given,
<span class="gd">-   subsequent socket operations will raise an :exc:`timeout` exception if the</span>
<span class="gi">+   subsequent socket operations will raise a :exc:`timeout` exception if the</span>
    timeout period *value* has elapsed before the operation has completed.  Setting
    a timeout of ``None`` disables timeouts on socket operations.
    ``s.settimeout(0.0)`` is equivalent to ``s.setblocking(0)``;
    ``s.settimeout(None)`` is equivalent to ``s.setblocking(1)``.
 
    .. versionadded:: 2.3
 
 
 .. method:: socket.gettimeout()
 
    Return the timeout in floating seconds associated with socket operations, or
    ``None`` if no timeout is set.  This reflects the last call to
<span class="gu">@@ -782,25 +804,27 @@</span>
    :manpage:`setsockopt(2)`).  The needed symbolic constants are defined in the
    :mod:`socket` module (:const:`SO_\*` etc.).  The value can be an integer or a
    string representing a buffer.  In the latter case it is up to the caller to
    ensure that the string contains the proper bits (see the optional built-in
    module :mod:`struct` for a way to encode C structures as strings).
 
 
 .. method:: socket.shutdown(how)
 
    Shut down one or both halves of the connection.  If *how* is :const:`SHUT_RD`,
    further receives are disallowed.  If *how* is :const:`SHUT_WR`, further sends
    are disallowed.  If *how* is :const:`SHUT_RDWR`, further sends and receives are
<span class="gd">-   disallowed.</span>
<span class="gi">+   disallowed.  Depending on the platform, shutting down one half of the connection</span>
<span class="gi">+   can also close the opposite half (e.g. on Mac OS X, ``shutdown(SHUT_WR)`` does</span>
<span class="gi">+   not allow further reads on the other end of the connection).</span>
 
 Note that there are no methods :meth:`read` or :meth:`write`; use
 :meth:`~socket.recv` and :meth:`~socket.send` without *flags* argument instead.
 
 Socket objects also have these (read-only) attributes that correspond to the
 values given to the :class:`socket` constructor.
 
 
 .. attribute:: socket.family
 
    The socket family.
 
</pre></div>

</body>
</html>