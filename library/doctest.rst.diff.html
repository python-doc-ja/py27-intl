<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>library/doctest.rst</title>
<style type="text/css">
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<div class="highlight"><pre><span class="gu">@@ -95,7 +95,7 @@</span>
    $
 
 There&#39;s no output!  That&#39;s normal, and it means all the examples worked.  Pass
<span class="gd">-:option:`-v` to the script, and :mod:`doctest` prints a detailed log of what</span>
<span class="gi">+``-v`` to the script, and :mod:`doctest` prints a detailed log of what</span>
 it&#39;s trying, and prints a summary at the end::
 
    $ python example.py -v
<span class="gu">@@ -163,7 +163,7 @@</span>
 final line of output is ``***Test Failed*** N failures.``, where *N* is the
 number of examples that failed.
 
<span class="gd">-Run it with the :option:`-v` switch instead::</span>
<span class="gi">+Run it with the ``-v`` switch instead::</span>
 
    python M.py -v
 
<span class="gu">@@ -172,7 +172,7 @@</span>
 
 You can force verbose mode by passing ``verbose=True`` to :func:`testmod`, or
 prohibit it by passing ``verbose=False``.  In either of those cases,
<span class="gd">-``sys.argv`` is not examined by :func:`testmod` (so passing :option:`-v` or not</span>
<span class="gi">+``sys.argv`` is not examined by :func:`testmod` (so passing ``-v`` or not</span>
 has no effect).
 
 Since Python 2.6, there is also a command line shortcut for running
<span class="gu">@@ -242,7 +242,7 @@</span>
 that can be used to tell it to look for files in other locations.
 
 Like :func:`testmod`, :func:`testfile`&#39;s verbosity can be set with the
<span class="gd">-:option:`-v` command-line switch or with the optional keyword argument</span>
<span class="gi">+``-v`` command-line switch or with the optional keyword argument</span>
 *verbose*.
 
 Since Python 2.6, there is also a command line shortcut for running
<span class="gu">@@ -331,7 +331,7 @@</span>
   blank line, put ``&lt;BLANKLINE&gt;`` in your doctest example each place a blank line
   is expected.
 
<span class="gd">-  .. versionchanged:: 2.4</span>
<span class="gi">+  .. versionadded:: 2.4</span>
      ``&lt;BLANKLINE&gt;`` was added; there was no way to use expected output containing
      empty lines in previous versions.
 
<span class="gu">@@ -446,6 +446,9 @@</span>
 The last three lines (starting with :exc:`ValueError`) are compared against the
 exception&#39;s type and detail, and the rest are ignored.
 
<span class="gi">+.. versionchanged:: 2.4</span>
<span class="gi">+   Previous versions were unable to handle multi-line exception details.</span>
<span class="gi">+</span>
 Best practice is to omit the traceback stack, unless it adds significant
 documentation value to the example.  So the last example is probably better as::
 
<span class="gu">@@ -477,8 +480,9 @@</span>
   with an alphanumeric is taken to be the start of the exception detail.  Of
   course this does the right thing for genuine tracebacks.
 
<span class="gd">-* When the :const:`IGNORE_EXCEPTION_DETAIL` doctest option is is specified,</span>
<span class="gd">-  everything following the leftmost colon is ignored.</span>
<span class="gi">+* When the :const:`IGNORE_EXCEPTION_DETAIL` doctest option is specified,</span>
<span class="gi">+  everything following the leftmost colon and any module information in the</span>
<span class="gi">+  exception name is ignored.</span>
 
 * The interactive shell omits the traceback header line for some
   :exc:`SyntaxError`\ s.  But doctest uses the traceback header line to
<span class="gu">@@ -506,10 +510,6 @@</span>
          ^
      SyntaxError: invalid syntax
 
<span class="gd">-.. versionchanged:: 2.4</span>
<span class="gd">-   The ability to handle a multi-line exception detail, and the</span>
<span class="gd">-   :const:`IGNORE_EXCEPTION_DETAIL` doctest option, were added.</span>
<span class="gd">-</span>
 
 .. _doctest-options:
 
<span class="gu">@@ -572,20 +572,38 @@</span>
    exception raised is ``ValueError: 3*14``, but will fail, e.g., if
    :exc:`TypeError` is raised.
 
<span class="gd">-   Note that a similar effect can be obtained using :const:`ELLIPSIS`, and</span>
<span class="gd">-   :const:`IGNORE_EXCEPTION_DETAIL` may go away when Python releases prior to 2.4</span>
<span class="gd">-   become uninteresting.  Until then, :const:`IGNORE_EXCEPTION_DETAIL` is the only</span>
<span class="gd">-   clear way to write a doctest that doesn&#39;t care about the exception detail yet</span>
<span class="gd">-   continues to pass under Python releases prior to 2.4 (doctest directives appear</span>
<span class="gd">-   to be comments to them).  For example, ::</span>
<span class="gi">+   It will also ignore the module name used in Python 3 doctest reports. Hence</span>
<span class="gi">+   both these variations will work regardless of whether the test is run under</span>
<span class="gi">+   Python 2.7 or Python 3.2 (or later versions):</span>
<span class="gi">+</span>
<span class="gi">+      &gt;&gt;&gt; raise CustomError(&#39;message&#39;) #doctest: +IGNORE_EXCEPTION_DETAIL</span>
<span class="gi">+      Traceback (most recent call last):</span>
<span class="gi">+      CustomError: message</span>
<span class="gi">+</span>
<span class="gi">+      &gt;&gt;&gt; raise CustomError(&#39;message&#39;) #doctest: +IGNORE_EXCEPTION_DETAIL</span>
<span class="gi">+      Traceback (most recent call last):</span>
<span class="gi">+      my_module.CustomError: message</span>
<span class="gi">+</span>
<span class="gi">+   Note that :const:`ELLIPSIS` can also be used to ignore the</span>
<span class="gi">+   details of the exception message, but such a test may still fail based</span>
<span class="gi">+   on whether or not the module details are printed as part of the</span>
<span class="gi">+   exception name. Using :const:`IGNORE_EXCEPTION_DETAIL` and the details</span>
<span class="gi">+   from Python 2.3 is also the only clear way to write a doctest that doesn&#39;t</span>
<span class="gi">+   care about the exception detail yet continues to pass under Python 2.3 or</span>
<span class="gi">+   earlier (those releases do not support doctest directives and ignore them</span>
<span class="gi">+   as irrelevant comments). For example, ::</span>
 
       &gt;&gt;&gt; (1, 2)[3] = &#39;moo&#39; #doctest: +IGNORE_EXCEPTION_DETAIL
       Traceback (most recent call last):
         File &quot;&lt;stdin&gt;&quot;, line 1, in ?
       TypeError: object doesn&#39;t support item assignment
 
<span class="gd">-   passes under Python 2.4 and Python 2.3.  The detail changed in 2.4, to say &quot;does</span>
<span class="gd">-   not&quot; instead of &quot;doesn&#39;t&quot;.</span>
<span class="gi">+   passes under Python 2.3 and later Python versions, even though the detail</span>
<span class="gi">+   changed in Python 2.4 to say &quot;does not&quot; instead of &quot;doesn&#39;t&quot;.</span>
<span class="gi">+</span>
<span class="gi">+   .. versionchanged:: 2.7</span>
<span class="gi">+      :const:`IGNORE_EXCEPTION_DETAIL` now also ignores any information</span>
<span class="gi">+      relating to the module containing the exception under test</span>
 
 
 .. data:: SKIP
<span class="gu">@@ -598,6 +616,8 @@</span>
 
    The SKIP flag can also be used for temporarily &quot;commenting out&quot; examples.
 
<span class="gi">+.. versionadded:: 2.5</span>
<span class="gi">+</span>
 
 .. data:: COMPARISON_FLAGS
 
<span class="gu">@@ -700,17 +720,13 @@</span>
 functions that run doctests, establishing different defaults.  In such cases,
 disabling an option via ``-`` in a directive can be useful.
 
<span class="gd">-.. versionchanged:: 2.4</span>
<span class="gd">-   Constants :const:`DONT_ACCEPT_BLANKLINE`, :const:`NORMALIZE_WHITESPACE`,</span>
<span class="gi">+.. versionadded:: 2.4</span>
<span class="gi">+   Doctest directives and the associated constants</span>
<span class="gi">+   :const:`DONT_ACCEPT_BLANKLINE`, :const:`NORMALIZE_WHITESPACE`,</span>
    :const:`ELLIPSIS`, :const:`IGNORE_EXCEPTION_DETAIL`, :const:`REPORT_UDIFF`,
    :const:`REPORT_CDIFF`, :const:`REPORT_NDIFF`,
    :const:`REPORT_ONLY_FIRST_FAILURE`, :const:`COMPARISON_FLAGS` and
<span class="gd">-   :const:`REPORTING_FLAGS` were added; by default ``&lt;BLANKLINE&gt;`` in expected</span>
<span class="gd">-   output matches an empty line in actual output; and doctest directives were</span>
<span class="gd">-   added.</span>
<span class="gd">-</span>
<span class="gd">-.. versionchanged:: 2.5</span>
<span class="gd">-   Constant :const:`SKIP` was added.</span>
<span class="gi">+   :const:`REPORTING_FLAGS` were added.</span>
 
 There&#39;s also a way to register new option flag names, although this isn&#39;t useful
 unless you intend to extend :mod:`doctest` internals via subclassing:
<span class="gu">@@ -956,18 +972,17 @@</span>
 supplies many flexible ways to combine tests from multiple sources.  So, in
 Python 2.4, :mod:`doctest`&#39;s :class:`Tester` class is deprecated, and
 :mod:`doctest` provides two functions that can be used to create :mod:`unittest`
<span class="gd">-test suites from modules and text files containing doctests.  These test suites</span>
<span class="gd">-can then be run using :mod:`unittest` test runners::</span>
<span class="gi">+test suites from modules and text files containing doctests.  To integrate with</span>
<span class="gi">+:mod:`unittest` test discovery, include a :func:`load_tests` function in your</span>
<span class="gi">+test module::</span>
 
    import unittest
    import doctest
<span class="gd">-   import my_module_with_doctests, and_another</span>
<span class="gd">-</span>
<span class="gd">-   suite = unittest.TestSuite()</span>
<span class="gd">-   for mod in my_module_with_doctests, and_another:</span>
<span class="gd">-       suite.addTest(doctest.DocTestSuite(mod))</span>
<span class="gd">-   runner = unittest.TextTestRunner()</span>
<span class="gd">-   runner.run(suite)</span>
<span class="gi">+   import my_module_with_doctests</span>
<span class="gi">+</span>
<span class="gi">+   def load_tests(loader, tests, ignore):</span>
<span class="gi">+       tests.addTests(doctest.DocTestSuite(my_module_with_doctests))</span>
<span class="gi">+       return tests</span>
 
 There are two main functions for creating :class:`unittest.TestSuite` instances
 from text files and modules with doctests:
<span class="gu">@@ -1438,7 +1453,7 @@</span>
    verbosity.  If *verbose* is ``True``, then information is printed about each
    example, as it is run.  If *verbose* is ``False``, then only failures are
    printed.  If *verbose* is unspecified, or ``None``, then verbose output is used
<span class="gd">-   iff the command-line switch :option:`-v` is used.</span>
<span class="gi">+   iff the command-line switch ``-v`` is used.</span>
 
    The optional keyword argument *optionflags* can be used to control how the test
    runner compares expected output to actual output, and how it displays failures.
<span class="gu">@@ -1753,7 +1768,7 @@</span>
 
 .. exception:: DocTestFailure(test, example, got)
 
<span class="gd">-   An exception thrown by :class:`DocTestRunner` to signal that a doctest example&#39;s</span>
<span class="gi">+   An exception raised by :class:`DocTestRunner` to signal that a doctest example&#39;s</span>
    actual output did not match its expected output. The constructor arguments are
    used to initialize the member variables of the same names.
 
<span class="gu">@@ -1777,9 +1792,9 @@</span>
 
 .. exception:: UnexpectedException(test, example, exc_info)
 
<span class="gd">-   An exception thrown by :class:`DocTestRunner` to signal that a doctest example</span>
<span class="gd">-   raised an unexpected exception.  The constructor arguments are used to</span>
<span class="gd">-   initialize the member variables of the same names.</span>
<span class="gi">+   An exception raised by :class:`DocTestRunner` to signal that a doctest</span>
<span class="gi">+   example raised an unexpected exception.  The constructor arguments are used</span>
<span class="gi">+   to initialize the member variables of the same names.</span>
 
 :exc:`UnexpectedException` defines the following member variables:
 
</pre></div>

</body>
</html>