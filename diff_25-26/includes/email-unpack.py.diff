--- rest25/includes/email-unpack.py	2008-10-21 04:56:44.784843316 +0900
+++ rest26/includes/email-unpack.py	2008-10-21 05:03:05.269178466 +0900
@@ -44,25 +44,25 @@
     msg = email.message_from_file(fp)
     fp.close()
 
     counter = 1
     for part in msg.walk():
         # multipart/* are just containers
         if part.get_content_maintype() == 'multipart':
             continue
         # Applications should really sanitize the given filename so that an
         # email message can't be used to overwrite important files
         filename = part.get_filename()
         if not filename:
-            ext = mimetypes.guess_extension(part.get_type())
+            ext = mimetypes.guess_extension(part.get_content_type())
             if not ext:
                 # Use a generic bag-of-bits extension
                 ext = '.bin'
             filename = 'part-%03d%s' % (counter, ext)
         counter += 1
         fp = open(os.path.join(opts.directory, filename), 'wb')
         fp.write(part.get_payload(decode=True))
         fp.close()
 
 
 if __name__ == '__main__':
     main()
