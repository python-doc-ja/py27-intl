\section{\module{user} ---
ユーザー設定のフック}
%User-specific configuration hook

\declaremodule{standard}{user}
\modulesynopsis{ユーザー設定を参照するための標準的な方法を提供するモジュー
ル}

\indexii{.pythonrc.py}{file}
\indexiii{user}{configuration}{file}

%As a policy, Python doesn't run user-specified code on startup of
%Python programs.  (Only interactive sessions execute the script
%specified in the \envvar{PYTHONSTARTUP} environment variable if it
%exists).

ポリシーとして、Pythonは起動時にユーザー毎の設定を行うコードを実行することは
しません(ただし対話型セッションで環境変数\envvar{PYTHONSTARTUP}が設定されて
いた場合にはそのスクリプトを実行します。)。

%However, some programs or sites may find it convenient to allow users
%to have a standard customization file, which gets run when a program
%requests it.  This module implements such a mechanism.  A program
%that wishes to use the mechanism must execute the statement

しかしながら、プログラムやサイトによっては、プログラムが要求した時に
ユーザーごとの設定ファイルを実行できると便利なこともあります。このモジュー
ルはそのような機構を実装しています。この機構を利用したいプログラムでは、
以下の文を実行してください。

\begin{verbatim}
import user
\end{verbatim}

%The \module{user} module looks for a file \file{.pythonrc.py} in the user's
%home directory and if it can be opened, executes it (using
%\function{execfile()}\bifuncindex{execfile}) in its own (the
%module \module{user}'s) global namespace.  Errors during this phase
%are not caught; that's up to the program that imports the
%\module{user} module, if it wishes.  The home directory is assumed to
%be named by the \envvar{HOME} environment variable; if this is not set,
%the current directory is used.

\module{user}モジュールはユーザーのホームディレクトリの
\file{.pythonrc.py}ファイルを探し、オープンできるならグローバル名前空間
で実行します(\function{execfile()}\bifuncindex{execfile}を利用します)。
この段階で発生したエラーはcatchされません。\module{user}モジュー
ルをimportしたプログラムに影響します。ホームディレクトリは環境変数
\envvar{HOME}が仮定されていますが、もし設定されていなければカレントディ
レクトリが使われます。

%The user's \file{.pythonrc.py} could conceivably test for
%\code{sys.version} if it wishes to do different things depending on
%the Python version.

ユーザーの\file{.pythonrc.py}ではPythonのバージョンに従って異なる動作を
行うために\code{sys.version}のテストを行うことが
考えられます。

%A warning to users: be very conservative in what you place in your
%\file{.pythonrc.py} file.  Since you don't know which programs will
%use it, changing the behavior of standard modules or functions is
%generally not a good idea.

ユーザーへの警告: \file{.pythonrc.py}ファイルに書く内容には慎重になって
ください。どのプログラムが利用しているかわからない状況で、標準のモジュール
や関数のふるまいを替えることはおすすめできません。

%A suggestion for programmers who wish to use this mechanism: a simple
%way to let users specify options for your package is to have them
%define variables in their \file{.pythonrc.py} file that you test in
%your module.  For example, a module \module{spam} that has a verbosity
%level can look for a variable \code{user.spam_verbose}, as follows:

この機構を使おうとするプログラマへの提案: 
あなたのパッケージ向けのオプションをユーザーが設定できるようにするシンプ
ルな方法は、\file{.pythonrc.py}ファイルで変数を定義して、あなたのプログ
ラムでテストする方法です。たとえば、\module{spam}モジュールで
メッセージ出力のレベルを替える \code{user.spam_verbose}変数を参照するに
は以下のようにします:

\begin{verbatim}
import user

verbose = bool(getattr(user, "spam_verbose", 0))
\end{verbatim}

%(The three-argument form of \function{getattr()} is used in case
%the user has not defined \code{spam_verbose} in their
%\file{.pythonrc.py} file.)

(ユーザが\code{spam_verbose}を
ファイル\file{.pythonrc.py}内で定義していない時に\function{getattr()}
の3引数形式は使われます。)

%Programs with extensive customization needs are better off reading a
%program-specific customization file.

大規模な設定の必要があるプログラムではプログラムごとの設定ファイルを作る
といいです。

%Programs with security or privacy concerns should \emph{not} import
%this module; a user can easily break into a program by placing
%arbitrary code in the \file{.pythonrc.py} file.

セキュリティやプライバシーに配慮するプログラムではこのモジュールをimport
し\emph{ない}でください。このモジュールを使うと、ユーザーは
\file{.pythonrc.py}に任意のコードを書くことで簡単に侵入することができて
しまいます。

%Modules for general use should \emph{not} import this module; it may
%interfere with the operation of the importing program.
汎用のモジュールではこのモジュールをimportし\emph{ない}でください。
importしたプログラムの動作にも影響してしまいます。

\begin{seealso}
  \seemodule{site}{サイト毎のカスタマイズを行う機構}
\end{seealso}
