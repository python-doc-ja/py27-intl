\section{\module{jpeg} ---
         JPEGファイルの読み書きを行う}

\declaremodule{builtin}{jpeg}
  \platform{IRIX}
\modulesynopsis{JPEGファイルの読み書きを行います。}

この\module{jpeg}モジュールはIndependent JPEG Group
\index{Independent JPEG Group}(IJG)
によって書かれたJEPG圧縮及び展開アルゴリズムを提供します。
JPEG形式は写真等の画像圧縮で標準的に利用され、ISO 10918で定義されてます。
JPEG、あるいはIndependent JPEG Groupソフトウェアの詳細は、
標準JPEG、若しくは提供されるソフトウェアのドキュメントを参照してください。

JPEGファイルを扱うポータブルなインタフェースはFredrik Lundhによる
Python Imaging Library (PIL)があります。また、PILの情報は
\url{http://www.pythonware.com/products/pil/}で見つけることができます。
\index{Python Imaging Library}
\index{PIL (the Python Imaging Library)}
\index{Lundh, Fredrik}

モジュール\module{jpeg}では、一つの例外といくつかの関数を定義しています。

\begin{excdesc}{error}
関数\function{compress()}または\function{decompress()}のエラーで
上げられる例外です。
\end{excdesc}

\begin{funcdesc}{compress}{data, w, h, b}
イメージファイルの幅\var{w}、高さ\var{h}、1ピクセルあたりのバイト数\var{b}を
引数として扱います。データはSGI GL順になっていて、
最初のピクセルは左下端になります。
また、これは\function{gl.lrectread()}が返す値をすぐに\function{compress()}に
かけるためです。現在は、1バイト若しくは4バイトのピクセルを
取り扱うことができます、前者はグレースケール、後者はRGBカラーを扱います。
\function{compress()}は、圧縮されたJFIF\index{JFIF}形式のイメージが
含まれた文字列を返します。
\end{funcdesc}

\begin{funcdesc}{decompress}{data}
データは圧縮されたJFIF\index{JFIF}形式のイメージが含まれた文字列で、
この関数はタプル\code{(\var{data}, \var{width}, \var{height},
\var{bytesperpixel})}を返します。また、そのデータは
\function{gl.lrectwrite()}を通過します。
\end{funcdesc}

\begin{funcdesc}{setoption}{name, value}
\function{compress()}と\function{decompress()}を呼ぶための様々な
オプションをセットします。次のオプションが利用できます:

\begin{tableii}{l|p{3in}}{code}{オプション}{効果}
  \lineii{'forcegray'}{%
    入力がRGBでも強制的にグレースケールを出力します。}
  \lineii{'quality'}{%
    圧縮後イメージの品質を\code{0}から\code{100}の間の値で指定します
    (デフォルトは\code{75}です)。これは圧縮にのみ影響します。}
  \lineii{'optimize'}{%
    ハフマンテーブルを最適化します。時間がかかりますが、高圧縮になります。
    これは圧縮にのみ影響します。}
  \lineii{'smooth'}{%
    圧縮されていないイメージ上でインターブロックスムーシングを行います。
    低品質イメージに役立ちます。これは展開にのみ影響します。}
\end{tableii}
\end{funcdesc}


\begin{seealso}
  \seetitle{JPEG Still Image Data Compression Standard}{The 
            canonical reference for the JPEG image format, by
            Pennebaker and Mitchell.}

  \seetitle[http://www.w3.org/Graphics/JPEG/itu-t81.pdf]{Information
            Technology - Digital Compression and Coding of
            Continuous-tone Still Images - Requirements and
            Guidelines}{The ISO standard for JPEG is also published as
            ITU T.81.  This is available online in PDF form.}
\end{seealso}
